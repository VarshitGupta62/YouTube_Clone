define.alias("@glimmer/component/-private/ember-component-manager","msg-overlay/component-managers/glimmer")
define("msg-overlay/components/-dynamic-element-alt",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define("msg-overlay/components/-dynamic-element",["exports","@glimmer/component"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class n extends t.default{}e.default=n}))
define.alias("helpcenter-in-product-ember/components/announcement-list-view","msg-overlay/components/announcement-list-view")
define.alias("helpcenter-in-product-ember/components/announcement-view","msg-overlay/components/announcement-view")
define.alias("artdeco-button/components/artdeco-button","msg-overlay/components/artdeco-button")
define.alias("artdeco-datepicker/components/artdeco-calendar","msg-overlay/components/artdeco-calendar")
define.alias("artdeco-card/components/artdeco-card-image","msg-overlay/components/artdeco-card-image")
define.alias("artdeco-card/components/artdeco-card","msg-overlay/components/artdeco-card")
define.alias("artdeco-carousel/components/artdeco-carousel-item","msg-overlay/components/artdeco-carousel-item")
define.alias("artdeco-carousel/components/artdeco-carousel-slider","msg-overlay/components/artdeco-carousel-slider")
define.alias("artdeco-carousel/components/artdeco-carousel-title","msg-overlay/components/artdeco-carousel-title")
define.alias("artdeco-carousel/components/artdeco-carousel","msg-overlay/components/artdeco-carousel")
define.alias("artdeco-completeness-meter-linear/components/artdeco-completeness-meter-linear","msg-overlay/components/artdeco-completeness-meter-linear")
define.alias("artdeco-modal/components/artdeco-confirmation-dialog","msg-overlay/components/artdeco-confirmation-dialog")
define.alias("artdeco-datepicker/components/artdeco-datepicker-embedded-cal","msg-overlay/components/artdeco-datepicker-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-datepicker","msg-overlay/components/artdeco-datepicker")
define.alias("artdeco-datepicker/components/artdeco-daterange-embedded-cal","msg-overlay/components/artdeco-daterange-embedded-cal")
define.alias("artdeco-datepicker/components/artdeco-daterange","msg-overlay/components/artdeco-daterange")
define.alias("artdeco-dropdown/components/artdeco-dropdown-content","msg-overlay/components/artdeco-dropdown-content")
define.alias("artdeco-dropdown/components/artdeco-dropdown-header","msg-overlay/components/artdeco-dropdown-header")
define.alias("artdeco-dropdown/components/artdeco-dropdown-item","msg-overlay/components/artdeco-dropdown-item")
define.alias("artdeco-dropdown/components/artdeco-dropdown-trigger","msg-overlay/components/artdeco-dropdown-trigger")
define.alias("artdeco-dropdown/components/artdeco-dropdown","msg-overlay/components/artdeco-dropdown")
define.alias("artdeco-empty-state/components/artdeco-empty-state","msg-overlay/components/artdeco-empty-state")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-badge","msg-overlay/components/artdeco-entity-lockup-badge")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-caption","msg-overlay/components/artdeco-entity-lockup-caption")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-content","msg-overlay/components/artdeco-entity-lockup-content")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-image","msg-overlay/components/artdeco-entity-lockup-image")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-metadata","msg-overlay/components/artdeco-entity-lockup-metadata")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-subtitle","msg-overlay/components/artdeco-entity-lockup-subtitle")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup-title","msg-overlay/components/artdeco-entity-lockup-title")
define.alias("artdeco-entity-lockup/components/artdeco-entity-lockup","msg-overlay/components/artdeco-entity-lockup")
define.alias("artdeco-entity-pile/components/artdeco-entity-pile","msg-overlay/components/artdeco-entity-pile")
define.alias("artdeco-hoverables/components/artdeco-hoverable-content","msg-overlay/components/artdeco-hoverable-content")
define.alias("artdeco-hoverables/components/artdeco-hoverable-trigger","msg-overlay/components/artdeco-hoverable-trigger")
define.alias("artdeco-inline-feedback/components/artdeco-inline-feedback","msg-overlay/components/artdeco-inline-feedback")
define.alias("artdeco-loader/components/artdeco-loader","msg-overlay/components/artdeco-loader")
define.alias("artdeco-modal/components/container","msg-overlay/components/artdeco-modal-container")
define.alias("artdeco-modal/components/artdeco-modal-content","msg-overlay/components/artdeco-modal-content")
define.alias("artdeco-modal/components/artdeco-modal-footer","msg-overlay/components/artdeco-modal-footer")
define.alias("artdeco-modal/components/artdeco-modal-header","msg-overlay/components/artdeco-modal-header")
define.alias("artdeco-modal/components/artdeco-modal","msg-overlay/components/artdeco-modal")
define.alias("artdeco-notification-badge/components/artdeco-notification-badge","msg-overlay/components/artdeco-notification-badge")
define.alias("artdeco-pagination/components/artdeco-pagination-ellipsis","msg-overlay/components/artdeco-pagination-ellipsis")
define.alias("artdeco-pagination/components/artdeco-pagination-indicator","msg-overlay/components/artdeco-pagination-indicator")
define.alias("artdeco-pagination/components/artdeco-pagination","msg-overlay/components/artdeco-pagination")
define.alias("artdeco-pill/components/artdeco-pill-choice-group","msg-overlay/components/artdeco-pill-choice-group")
define.alias("artdeco-pill/components/artdeco-pill-choice","msg-overlay/components/artdeco-pill-choice")
define.alias("artdeco-pill/components/artdeco-pill-dismiss","msg-overlay/components/artdeco-pill-dismiss")
define.alias("artdeco-pill/components/artdeco-pill-input","msg-overlay/components/artdeco-pill-input")
define.alias("artdeco-pill/components/artdeco-pill-link","msg-overlay/components/artdeco-pill-link")
define.alias("artdeco-pill/components/artdeco-pill-toggle","msg-overlay/components/artdeco-pill-toggle")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tab","msg-overlay/components/artdeco-spotlight-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-spotlight-tablist","msg-overlay/components/artdeco-spotlight-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tab","msg-overlay/components/artdeco-tab")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tablist","msg-overlay/components/artdeco-tablist")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabpanel","msg-overlay/components/artdeco-tabpanel")
define.alias("ember-cli-artdeco-tabs/components/artdeco-tabs","msg-overlay/components/artdeco-tabs")
define.alias("artdeco-text-input/components/artdeco-text-input-multi","msg-overlay/components/artdeco-text-input-multi")
define.alias("artdeco-text-input/components/artdeco-text-input-single","msg-overlay/components/artdeco-text-input-single")
define.alias("artdeco-text-input/components/artdeco-text-input","msg-overlay/components/artdeco-text-input")
define.alias("artdeco-toast/components/artdeco-toast-item","msg-overlay/components/artdeco-toast-item")
define.alias("artdeco-toast/components/artdeco-toasts","msg-overlay/components/artdeco-toasts")
define.alias("artdeco-toggle/components/artdeco-toggle","msg-overlay/components/artdeco-toggle")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-input","msg-overlay/components/artdeco-typeahead-input")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-result","msg-overlay/components/artdeco-typeahead-result")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead-results-list","msg-overlay/components/artdeco-typeahead-results-list")
define.alias("ember-cli-artdeco-typeahead/components/artdeco-typeahead","msg-overlay/components/artdeco-typeahead")
define.alias("helpcenter-in-product-ember/components/article-link","msg-overlay/components/article-link")
define.alias("helpcenter-in-product-ember/components/article-view","msg-overlay/components/article-view")
define("msg-overlay/components/audio-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/helper","@ember/component","@glimmer/tracking","@glimmer/component","@ember/object","msg-shared/modifiers/block-scrolling","@ember/modifier","ember-set-helper/helpers/set","asset-loader/components/asset-loader","artdeco-loader/components/artdeco-loader"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var b,v
e.default=(0,s.setComponentTemplate)((0,o.createTemplateFactory)({id:"86uhnstR",block:'[[[1,"\\n"],[1,"    "],[11,0],[16,1,[29,[[30,1]]]],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-bubble msg-overlay-audio-bubble\\n        ",[52,[30,2],"msg-overlay-audio-bubble--is-minimized"],"\\n        ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n        ",[52,[30,3],"msg-overlay-audio-bubble--is-hidden-at-md"]]]],[4,[32,0],null,null],[4,[32,1],["transitioned",[28,[32,2],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n      "],[8,[32,3],null,[["@bundle"],["rooms"]],[["resolved","pending"],[[[[1,"\\n"],[44,[[28,[30,4,["component"]],["rooms-call-container"],null]],[[[1,"            "],[8,[30,5],null,[["@onGoLive","@room","@ugcPostUrn","@autoJoin","@onLeaveCall","@isMinimized","@toggleMinimize"],[[30,6,["onGoLive"]],[30,6,["room"]],[30,6,["ugcPostUrn"]],[30,6,["autoJoin"]],[30,0,["closeBubble"]],[30,2],[30,7]]],null],[1,"\\n"]],[5]]],[1,"        "]],[4]],[[[1,"\\n          "],[10,0],[14,0,"msg-overlay-audio-bubble__loading-section"],[12],[1,"\\n            "],[8,[32,4],null,null,null],[1,"\\n          "],[13],[1,"\\n        "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "]],["@bubbleId","@isMinimized","@hideAudioBubbleAtMdBreakPoint","resolved","RoomsCallContainer","@bubble","@toggleMinimize"],false,["if","let"]]',moduleName:"msg-overlay/components/audio-bubble.gjs",scope:()=>[d.default,p.on,m.default,g.default,h.default],isStrictMode:!0}),(b=class extends c.default{constructor(){super(...arguments);(0,t.default)(this,"isInMinimizeTransition",v,this)}closeBubble(){var e,t,n,i
null===(e=(t=this.args.bubble).onCloseBubble)||void 0===e||e.call(t)
null===(n=(i=this.args).closeBubble)||void 0===n||n.call(i)}},v=(0,i.default)(b.prototype,"isInMinimizeTransition",[l.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(b.prototype,"closeBubble",[u.action],Object.getOwnPropertyDescriptor(b.prototype,"closeBubble"),b.prototype),b))}))
define.alias("ember-semaphore/components/block-profile","msg-overlay/components/block-profile")
define.alias("ember-semaphore/components/cleared-content-modal-v2","msg-overlay/components/cleared-content-modal-v2")
define.alias("ember-semaphore/components/cleared-content-modal","msg-overlay/components/cleared-content-modal")
define("msg-overlay/components/connection-search-result-item-presenter",["exports","@ember/template-factory","@ember/helper","@ember/component/template-only","@ember/component","@ember/modifier","ember-vector-images/components/lazy-image","ember-cli-pemberly-i18n/helpers/t"],(function(e,t,n,i,a,o,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const l=(0,a.setComponentTemplate)((0,t.createTemplateFactory)({id:"I15VFhRj",block:'[[[1,"\\n"],[1,"  "],[11,0],[24,0,"display-flex align-items-center overflow-hidden"],[24,"tabindex","-1"],[17,1],[4,[32,0],["mousemove",[30,2]],null],[4,[32,0],["click",[30,3]],null],[12],[1,"\\n    "],[10,0],[14,0,"msg-overlay-search-result-picture circle display-flex flex-shrink-zero"],[12],[1,"\\n      "],[8,[32,1],null,[["@classNames","@image","@alt","@ghostType","@desiredWidth"],["msg-overlay-search-result-picture__background-img full-width full-height round",[30,4,["entityWithPresenceViewData","image"]],[30,4,["recipientName"]],"person",100]],null],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"display-flex overflow-hidden pv1 pl2"],[12],[1,"\\n      "],[10,"h4"],[14,0,"msg-overlay-search-result-name t-12 t-black t-bold flex-shrink-zero truncate"],[12],[1,"\\n        "],[1,[30,4,["recipientName"]]],[1,"\\n      "],[13],[1,"\\n"],[41,[30,4,["subtext"]],[[[1,"        "],[10,1],[14,0,"t-12 t-black--light t-normal flex-shrink-zero ph1 truncate"],[12],[1,"\\n          "],[1,[28,[32,2],["dot","msg-overlay/components/connection-search-result-item-presenter"],null]],[1,"\\n        "],[13],[1,"\\n        "],[10,2],[14,0,"t-12 t-black--light t-normal truncate"],[12],[1,"\\n          "],[1,[30,4,["subtext"]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"]],["&attrs","@onMouseMove","@onClick","@viewData"],false,["if"]]',moduleName:"msg-overlay/components/connection-search-result-item-presenter.gjs",scope:()=>[o.on,r.default,s.default],isStrictMode:!0}),(0,i.default)("connection-search-result-item-presenter","ConnectionSearchResultItemPresenter"))
e.default=l}))
define.alias("helpcenter-in-product-ember/components/contextual-help","msg-overlay/components/contextual-help")
define("msg-overlay/components/conversation-bubble-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/classPrivateMethodGet","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/helper","@ember/component","msg-data/utils/sdk-view-data-helpers","data-layer/utils/profile/get-profile","msg-shared/utils/view-data-helpers","msg-overlay/viewdata/sdk-conversation-bubble-viewdata","global-utils/utils/a11y-focus-element","global-utils/utils/keyboard-utils","msg-shared/utils/document-is-hidden","urn-utils","msg-shared/utils/constants","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/custom-tracking","global-utils/utils/is-browser","@glimmer/tracking","@glimmer/component","@ember/object","ember-lifeline","ember-batcher","@ember/service","@ember/debug","@ember/destroyable","ember-cli-pemberly-i18n/helpers/t","@ember/modifier","@ember/render-modifiers/modifiers/did-insert","ember-cli-pemberly-tracking/modifiers/track-view","msg-shared/modifiers/block-scrolling","message-button/components/mcie-tracking-beacon","msg-overlay/components/conversation-bubble-header-feature","msg-spinmail/components/sponsored-conversation-thread-feature","msg-spinmail/components/spinmail-thread-presenter","msg-ui/components/conversation-preview-presenter","msg-ui/components/compose-feature","global-helpers/helpers/not","artdeco-modal/components/artdeco-confirmation-dialog","ember-async-data","msg-ui/components/dispatcher","ember-test-waiters","global-helpers/helpers/eq","rsvp"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D,k,S,O,I,P,x,E,R,A,T,N,U,B,F,z,L,j,V,q,Y,H,K){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var W,G,J,X,Q,$,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue,de,pe,me,ge,he,be,ve,fe,ye,_e,we,Me,Ce,De,ke,Se
const{ACTION_TYPES:Oe,CONTROL_NAMES:Ie,KEYCODES:{ESC:Pe,SPACEBAR:xe,ENTER:Ee},MODULE_KEYS:Re,OVERLAY:{BUBBLE_ACTIONS:{TOGGLE_JUMBO:Ae,TOGGLE_MINIMIZED:Te}},PAGEVIEW_KEYS:Ne,ATTACHMENT_DRAG_AND_DROP_TRACKING_KEYS:Ue}=v.default,Be=".msg-form__contenteditable",Fe=(0,Y.buildWaiter)("smooth-scroll-waiter")
e.default=(0,l.setComponentTemplate)((0,r.createTemplateFactory)({id:"dHMeHa8e",block:'[[[1,"\\n"],[1,"    "],[11,0],[16,1,[29,[[30,1,["id"]]]]],[24,"data-feedback-redacted",""],[24,"tabindex","-1"],[16,0,[29,["msg-convo-wrapper msg-overlay-conversation-bubble msg-overlay-conversation-bubble--default-inactive ml4\\n        ",[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble--is-compose"],"\\n        ",[52,[30,1,["isActive"]],"msg-overlay-conversation-bubble--is-active"],"\\n        ",[52,[30,1,["isMinimized"]],"msg-overlay-conversation-bubble--is-minimized"],"\\n        ",[52,[30,1,["isJumbo"]],"msg-overlay-conversation-bubble--jumbo","msg-overlay-conversation-bubble--petite"],"\\n        ",[52,[28,[32,0],[[30,1,["dispatcherEntryPointArgs","courierAPIArgs","composeOptionArgs","screenContext"]],"JOB_DETAILS_HIRING_TEAM"],null],"msg-overlay-conversation-bubble__job-details-hiring-team"],"\\n        ",[52,[51,[30,0,["hasDispatcherLoaded"]]],"hidden"]]]],[24,"role","dialog"],[16,"aria-label",[28,[32,1],["a11y_message_dialog","msg-overlay/components/conversation-bubble-feature"],null]],[24,"data-view-name","message-overlay-conversation-bubble-item"],[4,[32,2],["keyup",[30,0,["handlekeyUp"]]],null],[4,[32,2],["keydown",[30,0,["handlekeyDown"]]],null],[4,[32,3],[[30,0,["handleDidInsert"]]],null],[4,[32,4],null,[["viewName","genericTrackingLixKey","routeName","currentRoute"],["message-overlay-conversation-bubble-item","voyager.web.tracking3-batch-9",[28,[32,5],[[53,"outletState"],"render.name"],null],[28,[32,5],[[53,"outletState"],"render"],null]]]],[4,[32,6],null,null],[12],[1,"\\n      "],[8,[32,7],null,[["@entryPointData","@subject","@prefilledMessage","@prefilledAttachments","@isOverlay","@dispatcherEntryPointArgs","@recipientsChanged","@composeViewContext","@composeToNonConnection","@contextByRecipients","@openConversation","@conversation","@conversationUrn","@msgAdapterOptions","@messageContext","@forwardedEvent","@updateModel","@didSubmitMessage","@isTYAHFlow","@conversationTrackedAsyncData","@fetchInitialDataEnabled"],[[30,1,["entryPointData"]],[30,1,["subject"]],[30,1,["message"]],[30,1,["attachments"]],true,[30,1,["dispatcherEntryPointArgs"]],[30,0,["recipientsChanged"]],[30,0,["composeViewContext"]],[30,0,["composeToNonConnection"]],[30,0,["contextByRecipients"]],[30,0,["openConversation"]],[30,0,["conversation"]],[30,0,["conversationUrn"]],[30,1,["msgAdapterOptions"]],[30,1,["messageContext"]],[30,1,["forwardedEvent"]],[30,0,["updateModel"]],[30,0,["didSubmitMessage"]],[30,0,["isTYAHFlow"]],[30,0,["conversationTrackedAsyncData"]],[30,0,["msgDataManager","dispatcherFetchInitialDataForOverlay"]]]],[["default"],[[[[1,"\\n"],[41,[30,2,["conversationTrackedAsyncData","isResolved"]],[[[1,"          "],[8,[32,8],null,[["@composeOptionType","@controlUrn","@conversationUrn","@messageComposeFlowTrackingId","@prefilledText","@recipientUrns","@referringModuleKey","@entryPageKey","@draftMessage","@sourceType"],[[30,2,["entryPointData","composeOptionType"]],[30,2,["entryPointData","controlUrn"]],[30,0,["conversationUrn"]],[30,2,["entryPointData","messageComposeFlowTrackingId"]],[30,2,["trackingData","prefilledText"]],[30,2,["entryPointData","recipientUrns"]],[30,2,["entryPointData","referringModuleKey"]],[30,2,["entryPointData","entryPageKey"]],[30,2,["trackingData","draftMessage"]],"OVERLAY"]],null],[1,"\\n"]],[]],null],[1,"\\n"],[1,"        "],[8,[32,9],null,[["@hasBadge","@toggleMinimize","@bubble","@conversation","@messageRecipients","@isCompanySender","@presenceStatus","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],[[30,0,["hasBadge"]],[30,0,["toggleMinimize"]],[30,1],[30,2,["conversation"]],[30,1,["messageRecipients"]],[30,0,["isCompanySender"]],[30,0,["presenceStatus"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["toggleShowRenameConversation"]],[30,0,["enableReportingSponsoredConversation"]],[30,0,["toggleConversationMute"]],[30,0,["trackingModuleName"]],[30,0,["actionTrackingPrefix"]],[30,0,["showVideoMeetingButtonInHeader"]],[30,0,["updateMessageCompose"]],[30,0,["toggleJumboSize"]],[30,0,["handleCloseBubble"]]]],null],[1,"\\n"],[1,"        "],[11,0],[16,0,[29,["msg-overlay-conversation-bubble__content-wrapper relative display-flex flex-column\\n            ",[52,[30,0,["showRenameConversationForm"]]," msg-overlay-conversation-bubble__content-wrapper--disabled"]]]],[4,[32,2],["mouseup",[30,0,["onActive"]]],null],[4,[32,2],["focusin",[30,0,["onActive"]]],null],[12],[1,"\\n"],[41,[30,1,["isDeprecatedLinkToJoin"]],[[[1,"            "],[10,0],[14,0,"display-flex flex-column align-items-center full-height pt7"],[12],[1,"\\n              "],[10,0],[14,0,"msg-overlay-conversation-bubble__link-to-join-deprecation-illustration"],[12],[13],[1,"\\n              "],[10,0],[14,0,"mt4 ph6 t-14 text-align-center"],[12],[1,[28,[32,1],["i18n_link_to_join_deprecated_text","msg-overlay/components/conversation-bubble-feature"],null]],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],[[[41,[30,1,["isConversationPreview"]],[[[1,"              "],[8,[32,10],null,[["@bubble","@onConversationUpdate"],[[30,1],[30,0,["onConversationUpdate"]]]],null],[1,"\\n"]],[]],[[[41,[30,0,["viewData","isSponsoredConversation"]],[[[1,"              "],[8,[32,11],null,[["@viewData","@renderThread","@isOverlay","@entryPointData"],[[30,0,["viewData","sponsoredConversationThreadViewData"]],[30,0,["viewData","sponsoredConversationThreadViewData","conversation"]],true,[30,2,["entryPointData"]]]],null],[1,"\\n"]],[]],[[[41,[30,0,["viewData","isSponsoredInMail"]],[[[1,"              "],[8,[32,12],null,[["@viewData","@actionTrackingPrefix","@isCompanySender"],[[30,0,["viewData","spinmailThreadViewData"]],[30,0,["actionTrackingPrefix"]],[30,0,["isCompanySender"]]]],null],[1,"\\n"]],[]],[[[1,"              "],[8,[32,13],null,[["@actionTrackingPrefix","@addParticipantsPageKey","@bubbleId","@composeModuleKey","@composeToNonConnection","@composeViewContext","@contextByRecipients","@contextWidth","@conversation","@conversationTrackedAsyncData","@conversationDetailModuleKey","@conversationName","@customPlaceholderText","@didSubmitMessage","@dragAndDropTrackingKeys","@entryPointData","@fileUploadControlName","@forwardedEvent","@handleSuccessfulDiscardRequest","@hasPrefilledConversationName","@imagePasteControlName","@imageUploadControlName","@inmailReplyDeepLink","@invitationUrn","@is1on1Compose","@isInMailCompose","@isNew","@isOriginalSize","@isOverlay","@messageActions","@messageComposeFlowTrackingId","@messageContext","@messageRecipients","@msgAdapterOptions","@noConvoHistoryInNewConvo","@onConversationFetched","@openConversation","@prefilledAttachments","@prefilledMessage","@quickRepliesUseCase","@recipientsChanged","@recipientSuggestionEnabled","@renamePageKey","@sendMessageControlName","@showPremiumUpsell","@showRenameConversationForm","@smpContent","@subject","@targetUrl","@toggleShowRenameConversation","@update","@onEnterGaiFlow","@focusInputInit"],[[30,0,["CONTROL_NAMES","OVERLAY_PREFIX"]],"flagship3_messaging_overlay_participant_detail_screen_displayed",[30,1,["id"]],[30,0,["MODULE_KEYS","OVERLAY_COMPOSE"]],[30,2,["composeToNonConnection"]],[30,2,["composeViewContext"]],[30,2,["contextByRecipients"]],[30,0,["width"]],[30,2,["conversation"]],[30,2,["conversationTrackedAsyncData"]],[30,0,["MODULE_KEYS","OVERLAY_CONVERSATION_DETAIL"]],[30,1,["groupConversationName"]],[30,1,["placeholderText"]],[30,2,["didSubmitMessage"]],[30,0,["dragAndDropTrackingKeys"]],[30,2,["entryPointData"]],[30,0,["CONTROL_NAMES","OVERLAY","FILE_UPLOAD"]],[30,2,["forwardedEvent"]],[30,0,["handleSuccessfulDiscardRequest"]],[30,1,["groupConversationName"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_PASTE"]],[30,0,["CONTROL_NAMES","OVERLAY","IMAGE_UPLOAD"]],[30,1,["inmailReplyDeepLink"]],[30,1,["invitationUrn"]],[30,2,["entryPointData","is1on1Compose"]],[30,1,["isInMailCompose"]],[30,1,["isNew"]],[28,[32,14],[[30,1,["isJumbo"]]],null],true,[30,1,["messageActions"]],[30,3],[30,2,["messageContext"]],[30,1,["messageRecipients"]],[30,2,["msgAdapterOptions"]],[30,2,["noConvoHistoryInNewConvo"]],[30,0,["onConversationFetched"]],[30,2,["openConversation"]],[30,2,["prefilledAttachments"]],[30,2,["prefilledMessage"]],"QUICK_REPLY_OVERLAY",[30,2,["recipientsChanged"]],true,"flagship3_messaging_overlay_conversation_window_rename.page",[30,0,["CONTROL_NAMES","OVERLAY","SEND"]],[30,1,["showPremiumUpsell"]],[30,0,["showRenameConversationForm"]],[30,1,["smpContent"]],[30,2,["subject"]],[30,1,["targetUrl"]],[30,0,["toggleShowRenameConversation"]],[30,1,["update"]],[30,0,["onEnterGaiFlow"]],[30,1,["focusInputInit"]]]],null],[1,"\\n            "]],[]]]],[]]]],[]]]],[]]],[1,"        "],[13],[1,"\\n      "]],[2]]]]],[1,"\\n      "],[8,[32,15],null,[["@isOpen","@title","@content","@primaryActionText","@secondaryActionText","@onPrimary","@onSecondary","@onEscape"],[[30,0,["showMessageDiscardModal"]],[52,[30,0,["msgDataManager","isServerSideDraftsEnabled"]],[28,[32,1],["i18n_unsaved_changes_title","msg-overlay/components/conversation-bubble-feature"],null],[28,[32,1],["i18n_discard_message","msg-overlay/components/conversation-bubble-feature"],null]],[52,[30,0,["msgDataManager","isServerSideDraftsEnabled"]],[28,[32,1],["i18n_unsaved_changes_body","msg-overlay/components/conversation-bubble-feature"],null],[28,[32,1],["i18n_discard_body","msg-overlay/components/conversation-bubble-feature"],null]],[52,[30,0,["msgDataManager","isServerSideDraftsEnabled"]],[28,[32,1],["i18n_leave","msg-overlay/components/conversation-bubble-feature"],null],[28,[32,1],["i18n_discard","msg-overlay/components/conversation-bubble-feature"],null]],[28,[32,1],["i18n_cancel","msg-overlay/components/conversation-bubble-feature"],null],[30,0,["closeBubble"]],[30,0,["closeDiscardModal"]],[30,0,["closeDiscardModal"]]]],null],[1,"\\n    "],[13],[1,"\\n  "]],["@bubble","DispatcherInstance","@messageComposeFlowTrackingId"],false,["if","unless","-get-dynamic-var"]]',moduleName:"msg-overlay/components/conversation-bubble-feature.gjs",scope:()=>[H.default,P.default,x.on,E.default,R.default,s.get,A.default,q.default,T.default,N.default,F.default,U.default,B.default,z.default,L.default,j.default],isStrictMode:!0}),(W=(0,S.inject)("i18n"),G=(0,S.inject)("msg-data@data-manager"),J=(0,S.inject)("msg-overlay-manager@msg-overlay-manager"),X=(0,S.inject)("jet"),Q=(0,S.inject)("tracking"),$=(0,S.inject)("persistent-toast-manager@persistent-toast-manager"),Z=(0,S.inject)("authentication@authenticated-user"),ee=(0,S.inject)("presence@presence-api-dash"),te=(0,S.inject)("msg-ui@update-message-compose"),ne=(0,S.inject)("global-services@store-shim"),ie=(0,S.inject)("@linkedin/ember-restli-graphql@graphql"),ae=(Se=new WeakSet,class extends M.default{get conversation(){this.conversationUrn
return this.msgOverlayManager.getConversationFromBubble(this.args.bubble)}get hasBadge(){return this.args.bubble.hasUnseenMessages&&!this.msgOverlayManager.forcedMinimizedAtRoute&&this.viewData.isUnread}get isCompanySender(){return this.viewData.isCompanyProfile}get presenceStatus(){const{nonSelfParticipantUrns:e}=this.viewData
if(null!=e&&e[0])return this.presenceAPI.getPresenceStatus(this.viewData.nonSelfParticipantUrns[0])}get showVideoMeetingButtonInHeader(){var e,t
return!(null!==(e=this.args)&&void 0!==e&&null!==(t=e.bubble)&&void 0!==t&&t.isMinimized)&&this.conversation&&this.viewData.isVideoMeetingEnabled&&!this.isCompanySender}get viewData(){var e
return new p.default({conversation:this.conversation,msgDataManager:this.msgDataManager,authenticatedUserProfile:null===(e=this.authenticatedUser.miniProfile)||void 0===e?void 0:e.content,presenceAPI:this.presenceAPI,messageRecipients:this.args.bubble.messageRecipients,graphql:this.graphql})}updateModel(e){var t,n
if(e.ui.autoclose)return
this.conversationUrn=(null===(t=e.ui.conversation)||void 0===t?void 0:t.entityUrn)??(null===(n=e.ui.conversation)||void 0===n?void 0:n.clientId);(0,C.setProperties)(this.args.bubble,{conversation:e.ui.conversation,messageRecipients:e.ui.messageRecipients,isNew:e.ui.isNew,isInMailCompose:e.ui.isInMailCompose})
const a=this._userHasToggledJumbo??this.args.bubble.dispatcherEntryPointArgs.client.senderContext.ui.isJumbo??e.ui.isJumbo
this.hasDispatcherLoaded=!0;(0,i.default)(this,Se,ze).call(this,a)}_fetchAndSetComposeContext(e,t,n){this.composeViewContext=new V.TrackedAsyncData(this.msgDataManager.fetchComposeContext({recipients:e,composeOptionType:t,context:n}).then((e=>{if(this.isDestroying)return
n&&("MESSAGE_REQUEST"===t||"HIGH_INTENT"===t)&&(0,C.set)(this.args.bubble,"messageContext",{contextEntityUrn:n,contextText:e.contextText,composeOptionType:t})
return e})))}constructor(){super(...arguments)
Se.add(this);(0,t.default)(this,"i18n",oe,this);(0,t.default)(this,"msgDataManager",re,this);(0,t.default)(this,"msgOverlayManager",se,this);(0,t.default)(this,"jet",le,this);(0,t.default)(this,"tracking",ce,this);(0,t.default)(this,"persistentToastManager",ue,this);(0,t.default)(this,"authenticatedUser",de,this);(0,t.default)(this,"presenceAPI",pe,this);(0,t.default)(this,"updateMessageComposeService",me,this);(0,t.default)(this,"storeShim",ge,this);(0,t.default)(this,"graphql",he,this);(0,n.default)(this,"CONTROL_NAMES",Ie);(0,n.default)(this,"MODULE_KEYS",Re);(0,n.default)(this,"actionTrackingPrefix",Ie.OVERLAY_PREFIX);(0,n.default)(this,"trackingModuleName",Re.OVERLAY_CONVERSATION_DETAIL);(0,t.default)(this,"composeViewContext",be,this);(0,t.default)(this,"enableReportingSponsoredConversation",ve,this);(0,t.default)(this,"showMessageDiscardModal",fe,this);(0,t.default)(this,"showRenameConversationForm",ye,this);(0,t.default)(this,"width",_e,this);(0,t.default)(this,"contextByRecipients",we,this);(0,n.default)(this,"dragAndDropTrackingKeys",Ue.OVERLAY);(0,n.default)(this,"shouldProcessHeaderFocusEvents",!1);(0,t.default)(this,"conversationUrn",Me,this);(0,n.default)(this,"_userHasToggledJumbo",void 0);(0,t.default)(this,"isTYAHFlow",Ce,this);(0,t.default)(this,"hasDispatcherLoaded",De,this);(0,t.default)(this,"conversationTrackedAsyncData",ke,this);(0,n.default)(this,"_conversationLastLoadedAt",Date.now())
this.conversationEntryTime||(this.conversationEntryTime=Date.now());(0,C.set)(this,"enableReportingSponsoredConversation",this.viewData.enableReportingSponsoredConversation)
const{conversation:e,messageRecipients:i}=this.args.bubble
e&&null!=e&&e.entityUrn&&(this.conversationTrackedAsyncData=new V.TrackedAsyncData((0,K.resolve)(this.msgDataManager.setConversationAsActive(e))))
!this.msgDataManager.dispatcherFetchInitialDataForOverlay&&null!=i&&i.length&&(this.conversationTrackedAsyncData=new V.TrackedAsyncData(this.msgDataManager.fetchLatestConversationByRecipients(i.map((e=>(0,d.getProfileDashUrn)(e)))).then((e=>{this.isDestroying||this.onConversationFetched(e,this.args.bubble.isNew)}))))
if(void 0===this.args.bubble.isJumbo&&!this.msgDataManager.dispatcherFetchInitialDataForOverlay){const{isSponsoredInMail:e,isSponsoredConversation:t,events:n}=this.viewData;(0,C.set)(this.args.bubble,"isJumbo",this.args.bubble.isInMail||this.args.bubble.isInMailCompose||e||t&&1===n.length)}this.args.bubble.dispatcherEntryPointArgs||this._setComposeContextFromEntryPoint()
if(_.default){(0,D.addEventListener)(this,window,"focus",(()=>{(0,k.readDOM)((()=>{this.shouldProcessHeaderFocusEvents=!0}))}));(0,D.addEventListener)(this,window,"blur",(()=>{this.shouldProcessHeaderFocusEvents=!1}))}}setConversationTrackedAsyncData(e){this.conversationTrackedAsyncData=new V.TrackedAsyncData(e)}_setComposeContextFromEntryPoint(){var e,t,n,i,a,o
const{conversation:r}=this.args.bubble
let s,l,c
if(r&&!this.args.bubble.isNew){s=this.viewData.nonSelfParticipantUrns
l="REPLY"
c=this.viewData.hostConversationUrn}const{messageRecipients:u,composeOptionType:d}=this.args.bubble,p=this.args.bubble.invitationUrn||(null===(e=this.args.bubble.messageContext)||void 0===e?void 0:e.contextEntityUrn)||(null===(t=this.args.bubble.inMailComposeViewContext)||void 0===t?void 0:t.contextEntityUrn)||(null===(n=this.args.bubble.msgAdapterOptions)||void 0===n?void 0:n.jobApplication)||(null===(i=this.args.bubble.msgAdapterOptions)||void 0===i?void 0:i.groupUrn)
if((!r||this.args.bubble.isNew)&&null!=u&&u.length){s=this.viewData.recipientUrns
l=d||(null!=p&&p.toLowerCase().includes("group")?"MESSAGE_REQUEST":null!=p&&p.toLowerCase().includes("jobapplication")?"CONNECTION_MESSAGE":this.args.bubble.isInMailCompose?"PREMIUM_INMAIL":"CONNECTION_MESSAGE")
c=p}this.args.bubble.entryPointData||(this.args.bubble.entryPointData={messageComposeFlowTrackingId:(0,f.generateBase64UUID)(),recipientUrns:s})
const m=this.args.bubble.isNew&&((null==u?void 0:u.length)||d),g=!this.args.bubble.isNew
null!==(a=this.args.bubble)&&void 0!==a&&null!==(o=a.entryPointData)&&void 0!==o&&o.composeOptionOverride||!m&&!g||this._fetchAndSetComposeContext(s,l,c)}handleDidInsert(e){this._element=e
if((0,h.default)())this.args.bubble.isMinimized||(this.isPageViewEventPending=!0)
else{this._fireBubblePVE()
this.shouldProcessHeaderFocusEvents=!0}this._handleInitialFocus();(0,D.addEventListener)(this,this._element,"transitionend",(e=>{"width"===e.propertyName&&(0,k.readDOM)((()=>{this.isDestroying||(this.width=this._element.offsetWidth)}))}))
if(_.default){(0,D.addEventListener)(this,document,"mousedown",(e=>{this._element&&!this._element.contains(e.target)&&this._updateActiveState(!1)}));(0,D.addEventListener)(this,window,"visibilitychange",this._handleVisibilityChange.bind(this));(0,D.addEventListener)(this,window,"beforeunload",(e=>{if(this.conversation&&(0,c.conversationHasNonEmptyDraftMessage)(this.conversation)){this.tracking.fireInteractionEvent("overlay.before_discard_draft")
e.preventDefault();(e||window.event).returnValue=!0
return!0}}))}}_handleInitialFocus(){let e
this.args.bubble.focusInputOnInit&&(e=this.viewData.isConversationWithAdvertiser?this._element.querySelector(".msg-overlay-bubble-header"):this._element.querySelector(this.args.bubble.isInMailCompose?".msg-form__subject input":Be)||this._element.querySelector(".msg-overlay-bubble-header__title"))
if(e){e.focus()
this.onActive()}}_handleVisibilityChange(){if(!(0,h.default)()&&this.isPageViewEventPending){this._fireBubblePVE()
this.isPageViewEventPending=!1}}_updateActiveState(e){(0,C.set)(this.args.bubble,"isActive",e)}handlekeyUp(e){e.keyCode!==Pe||this.isOpenActionsDropdownEsc||this.handleCloseBubble()
this.isOpenActionsDropdownEsc=!1}handlekeyDown(e){var t
const n=null===(t=document.querySelector(`#${this.args.bubble.id} .msg-form__send-button`))||void 0===t?void 0:t.disabled,i=this.args.bubble.isInMailCompose&&(document.activeElement.classList.contains("emoji-hoverable-trigger")&&n||document.activeElement.classList.contains("msg-form__send-button")||document.activeElement.classList.contains("artdeco-button--premium"))
if((0,g.isTabKey)(e)&&(document.activeElement.classList.contains("msg-form__send-toggle")||i)){(0,m.default)(this,`#${this.args.bubble.id}`)
e.preventDefault()}e.keyCode===Pe&&(e.target.classList.contains("msg-thread-actions__dropdown-options")||e.target.classList.contains("msg-thread-actions__dropdown-option"))&&(this.isOpenActionsDropdownEsc=!0)}_focusConversation(){if(_.default&&window.getSelection().toString())return
let e
e=this.viewData.isConversationWithAdvertiser?".msg-overlay-bubble-header":Be
const t=this._element.querySelector(e)
t&&t.focus()}_showSuccessToast(e){const t=this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble-feature",e)([])
this.persistentToastManager.success({message:t})}onActive(){this._updateActiveState(!0)
this.msgOverlayManager.markConversationAsRead(this.args.bubble)}handleCloseBubble(){var e,t
let n
const i=this.conversation&&(0,c.conversationHasNonEmptyDraftMessage)(this.conversation)
if(this.msgDataManager.isServerSideDraftsEnabled&&i&&"Server"===(null===(e=this.conversation)||void 0===e||null===(t=e.draftMessage)||void 0===t?void 0:t.status)){var a,o
n=!1
if((null===(a=this.conversation)||void 0===a||null===(o=a.draftMessage)||void 0===o?void 0:o.lastEditedAt)>this._conversationLastLoadedAt){const e=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_draft_saved_toast_message")()
this.persistentToastManager.success({message:e})}}else n=i
if(n){this.showMessageDiscardModal=!0
this.tracking.firePageViewEvent("flagship3_messaging_compose_exit_new_conversation")}else{this.args.closeBubble()
if(this.conversation){const{conversationUrn:e,inboxType:t,sponsoredCreativeUrn:n}=this.viewData
if(e&&t){let i="OTHER"
"PRIMARY"===t?i="PRIMARY_INBOX":"SECONDARY"===t&&(i="SECONDARY_INBOX")
const a={conversationUrn:e,inboxType:i,origin:"WEB_OVERLAY",conversationEntryTime:this.conversationEntryTime,conversationExitTime:Date.now()}
this.tracking.fireTrackingPayload("ConversationDwellEvent",a)
if((0,c.canShowCsAdMovementToast)(this.msgDataManager,t,n)){const e=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_message_moved_to_other")()
this.persistentToastManager.success({message:e})
this.msgDataManager.removeConversationStarterAdPreview()}}}}(0,D.runTask)(this,(()=>{var e,t
return null===(e=this.args.bubble.messageActions)||void 0===e||null===(t=e.afterCloseBubble)||void 0===t?void 0:t.call(e)}),1)}toggleJumboSize(){(0,i.default)(this,Se,ze).call(this)
this._userHasToggledJumbo=!this.args.bubble.isJumbo}onEnterGaiFlow(){this.args.bubble.isJumbo||this.toggleJumboSize()}toggleMinimize(e){var t
e.preventDefault()
if(!("keypress"===e.type&&e.keyCode!==Ee&&e.keyCode!==xe||null!==(t=e.target)&&void 0!==t&&t.closest(".msg-overlay-bubble-header__controls"))){this.msgOverlayManager.resizeBubble(this.args.bubble,Te)
this.msgOverlayManager.syncCachedConvos()
if(this.args.bubble.isMinimized){this.args.bubble.hasUnseenMessages&&this.msgOverlayManager.markConversationAsRead(this.args.bubble);(0,D.runTask)(this,(()=>{this._focusConversation()}))
this._fireBubblePVE()}(0,D.runTask)(this,(()=>{(0,C.set)(this.args.bubble,"isMinimized",!this.args.bubble.isMinimized)
this._updateActiveState(!this.args.bubble.isMinimized)}))}}toggleShowRenameConversation(){this.viewData.isGroupChat&&(this.showRenameConversationForm=!this.showRenameConversationForm)}onConversationUpdate(e){this.conversationUrn=e}openConversation(e){this.isTYAHFlow=!0
this.msgDataManager.fetchConversation(e).then((e=>{if(!(0,I.isDestroying)(this)&&e){this.onConversationFetched(e,!1);(0,D.scheduleTask)(this,"actions",(()=>{this._handleInitialFocus()}))}}))}async openInMailCompose(e,t,n){const i=Fe.beginAsync(),a=await(0,u.getProfileById)(this.storeShim,e,"com.linkedin.voyager.dash.deco.identity.profile.MiniProfile")
if((0,I.isDestroying)(this))return
const o=await this.msgDataManager.fetchLatestConversationByRecipients([a.entityUrn])
if(!(0,I.isDestroying)(this)){this.msgDataManager.isServerSideDraftsEnabled&&this.setConversationTrackedAsyncData(o)
Fe.endAsync(i)
this.conversationUrn=o.entityUrn||o.clientId;(0,C.setProperties)(this.args.bubble,{conversation:o,composeOptionType:"PREMIUM_INMAIL",isInMailCompose:!0,isJumbo:!t,messageRecipients:a?[a]:void 0,showPremiumUpsell:t,targetUrl:n});(0,D.scheduleTask)(this,"actions",(()=>{this._handleInitialFocus()}))}}composeToNonConnection(e,t){var n,i,a,o
let{composeOption:r={},upsellContextUrn:s}=t
this.isTYAHFlow=!0
const{composeOptionType:l,composeNavigationContext:c}=r
if(c&&"UPSELL"!==l){this.jet.info(new Error("[MSG-67581] composeToNonConnection fetching composeOptions."),["MSG-67581",l],{shouldRethrow:!1})
this._fetchAndSetComposeContext(c.serialize().recipientUrns,l)}switch(l){case"UPSELL":this.openInMailCompose((0,b.extractEntityInfoFromUrn)(s).id,!0,(null===(n=r.composeNavigationContext)||void 0===n?void 0:n.targetUrl)??r.targetUrl)
break
case"PREMIUM_INMAIL":this.openInMailCompose((0,b.extractEntityInfoFromUrn)(null===(i=r.composeNavigationContext)||void 0===i||null===(a=i.recipientUrns)||void 0===a?void 0:a[0]).id)
break
case"REPLY":this.openConversation((0,b.extractEntityInfoFromUrn)(null===(o=r.composeNavigationContext)||void 0===o?void 0:o.existingConversationUrn).id)
break
default:e()}}toggleConversationMute(){const{conversation:e}=this.args.bubble,t=this.viewData.isMuted,n=this.msgDataManager.toggleConversationMute(this.viewData.conversationUrn,!t),i=t?Oe.MUTE:Oe.UNMUTE
y.default.fireDetailActionEvent({actionType:i,controlName:Ie.OVERLAY.MUTE,conversationObjectUrn:this.viewData.conversationBackendUrn,participantUrns:this.viewData.participantTrackingUrns,participantPresenceStatuses:(0,c.getParticipantPresenceStatuses)(e.decoratedParticipants.map((e=>e.entityUrn)),this.presenceAPI),trackingService:this.tracking})
return n}didSubmitMessage(e){var t,n,i
this.conversationUrn=e.entityUrn;(0,C.setProperties)(this.args.bubble,{message:"",attachments:[],conversation:e,isNew:!1,isInMailCompose:!1,forwardedEvent:void 0,update:null,smpContent:null})
const a=null===(t=this.args)||void 0===t||null===(n=t.bubble)||void 0===n||null===(i=n.messageActions)||void 0===i?void 0:i.afterSendTracking
if(a){const e=a()
this.tracking.fireTrackingPayload(e.name,e.body)}}onConversationFetched(e,t){this.conversationUrn=e.entityUrn||e.clientId
this._conversationLastLoadedAt=Date.now();(0,C.setProperties)(this.args.bubble,{conversation:e,isNew:t})
if(!e.isDraft){this.msgDataManager.setConversationAsActive(e)
const t=this.args.bubble.isJumbo;(0,C.setProperties)(this.args.bubble,{isInMailCompose:!1,isJumbo:!!this.msgDataManager.isExpandBubbleEnabled||e.groupChat})
const{isJumbo:n}=this.args.bubble
n!==t&&!(!1===n&&void 0===t)&&this.msgOverlayManager.resizeBubble(this.args.bubble,"TOGGLE_JUMBO")}}recipientsChanged(e,t){var n,i
this.isTYAHFlow=!0
this.contextByRecipients=t;(0,C.setProperties)(this.args.bubble,{messageRecipients:e,messageContext:void 0})
this.conversationTrackedAsyncData=e.length?new V.TrackedAsyncData(this.msgDataManager.fetchLatestConversationByRecipients(e.map((e=>(0,d.getProfileDashUrn)(e)))).then((e=>{this.isDestroying||this.onConversationFetched(e,this.args.bubble.isNew)}))):void 0
if(0===e.length){this.composeViewContext=new V.TrackedAsyncData(null)
return}const a=null!=t&&null!==(n=t[0])&&void 0!==n&&n.contextEntityUrn.includes("company")?"MESSAGE_REQUEST":"CONNECTION_MESSAGE"
this._fetchAndSetComposeContext(e.map((e=>{let{entityUrn:t}=e
return t})),a,null==t||null===(i=t[0])||void 0===i?void 0:i.contextEntityUrn)}updateMessageCompose(e){let{body:t}=e
this.updateMessageComposeService.triggerUpdateMessageCompose({bubbleId:this.args.bubble.id,isOverlay:!0,messageText:t})}_fireBubblePVE(){this.args.bubble.isMinimized||this.tracking.firePageViewEvent(Ne.OVERLAY_CONVO)}handleSuccessfulDiscardRequest(){var e,t
const{bubble:n}=this.args,i=n.conversation?n.conversation.entityUrn:n.id
this.msgOverlayManager.closeBubbleByConversationUrnOrBubbleId(i)
null===(e=(t=this.args).handleSuccessfulDiscardRequest)||void 0===e||e.call(t,...arguments)}closeDiscardModal(){(0,C.set)(this,"showMessageDiscardModal",!1)
this.tracking.fireInteractionEvent(Ie.DISCARD_COMPOSE_MODAL.CANCEL)}closeBubble(){this.tracking.fireInteractionEvent(Ie.DISCARD_COMPOSE_MODAL.DISCARD)
this.args.closeBubble()}}),oe=(0,a.default)(ae.prototype,"i18n",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,a.default)(ae.prototype,"msgDataManager",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=(0,a.default)(ae.prototype,"msgOverlayManager",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,a.default)(ae.prototype,"jet",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=(0,a.default)(ae.prototype,"tracking",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,a.default)(ae.prototype,"persistentToastManager",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=(0,a.default)(ae.prototype,"authenticatedUser",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=(0,a.default)(ae.prototype,"presenceAPI",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=(0,a.default)(ae.prototype,"updateMessageComposeService",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=(0,a.default)(ae.prototype,"storeShim",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=(0,a.default)(ae.prototype,"graphql",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=(0,a.default)(ae.prototype,"composeViewContext",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=(0,a.default)(ae.prototype,"enableReportingSponsoredConversation",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=(0,a.default)(ae.prototype,"showMessageDiscardModal",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ye=(0,a.default)(ae.prototype,"showRenameConversationForm",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=(0,a.default)(ae.prototype,"width",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=(0,a.default)(ae.prototype,"contextByRecipients",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=(0,a.default)(ae.prototype,"conversationUrn",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=(0,a.default)(ae.prototype,"isTYAHFlow",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De=(0,a.default)(ae.prototype,"hasDispatcherLoaded",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!this.msgDataManager.dispatcherFetchInitialDataForOverlay}}),ke=(0,a.default)(ae.prototype,"conversationTrackedAsyncData",[w.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(ae.prototype,"updateModel",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"updateModel"),ae.prototype),(0,a.default)(ae.prototype,"setConversationTrackedAsyncData",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"setConversationTrackedAsyncData"),ae.prototype),(0,a.default)(ae.prototype,"handleDidInsert",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"handleDidInsert"),ae.prototype),(0,a.default)(ae.prototype,"handlekeyUp",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"handlekeyUp"),ae.prototype),(0,a.default)(ae.prototype,"handlekeyDown",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"handlekeyDown"),ae.prototype),(0,a.default)(ae.prototype,"onActive",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"onActive"),ae.prototype),(0,a.default)(ae.prototype,"handleCloseBubble",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"handleCloseBubble"),ae.prototype),(0,a.default)(ae.prototype,"toggleJumboSize",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"toggleJumboSize"),ae.prototype),(0,a.default)(ae.prototype,"onEnterGaiFlow",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"onEnterGaiFlow"),ae.prototype),(0,a.default)(ae.prototype,"toggleMinimize",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"toggleMinimize"),ae.prototype),(0,a.default)(ae.prototype,"toggleShowRenameConversation",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"toggleShowRenameConversation"),ae.prototype),(0,a.default)(ae.prototype,"onConversationUpdate",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"onConversationUpdate"),ae.prototype),(0,a.default)(ae.prototype,"openConversation",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"openConversation"),ae.prototype),(0,a.default)(ae.prototype,"composeToNonConnection",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"composeToNonConnection"),ae.prototype),(0,a.default)(ae.prototype,"toggleConversationMute",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"toggleConversationMute"),ae.prototype),(0,a.default)(ae.prototype,"didSubmitMessage",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"didSubmitMessage"),ae.prototype),(0,a.default)(ae.prototype,"onConversationFetched",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"onConversationFetched"),ae.prototype),(0,a.default)(ae.prototype,"recipientsChanged",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"recipientsChanged"),ae.prototype),(0,a.default)(ae.prototype,"updateMessageCompose",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"updateMessageCompose"),ae.prototype),(0,a.default)(ae.prototype,"handleSuccessfulDiscardRequest",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"handleSuccessfulDiscardRequest"),ae.prototype),(0,a.default)(ae.prototype,"closeDiscardModal",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"closeDiscardModal"),ae.prototype),(0,a.default)(ae.prototype,"closeBubble",[C.action],Object.getOwnPropertyDescriptor(ae.prototype,"closeBubble"),ae.prototype),ae))
function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.args.bubble.isJumbo
this.msgOverlayManager.resizeBubble(this.args.bubble,Ae);(0,C.set)(this.args.bubble,"isJumbo",e)
this.msgOverlayManager.syncCachedConvos()}}))
define("msg-overlay/components/conversation-bubble-header-controls-presenter",["exports","@ember/template-factory","@ember/component/template-only","@ember/component","msg-shared-modals/components/conversation-header-dropdown-menu-presenter","ember-semaphore/components/ember-semaphore","msg-ui/components/virtual-meeting-cta-presenter","@ember/helper","artdeco-button/components/artdeco-button","ember-cli-pemberly-i18n/helpers/t","ember-cli-pemberly-tracking/modifiers/track-interaction","@ember/modifier"],(function(e,t,n,i,a,o,r,s,l,c,u,d){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const p=(0,i.setComponentTemplate)((0,t.createTemplateFactory)({id:"WwI9vx02",block:'[[[1,"\\n"],[1,"  "],[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex align-items-center"],[12],[1,"\\n"],[41,[51,[30,1,["isMinimized"]]],[[[41,[30,2,["showDropdownMenu"]],[[[1,"        "],[8,[32,0],null,[["@viewData","@handleSuccessfulDiscardRequest","@showRenameConversationForm","@externalComps","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@addParticipantsPageKey","@isOverlay","@inverse","@parentRefocusElement"],[[30,2,["conversationHeaderDropdownMenuViewData"]],[30,3],[28,[32,1],[[30,4],true],null],[28,[32,2],null,[["semaphoreComp"],[[50,[32,3],0,null,null]]]],[30,5],[30,6],[30,7],[30,8],"flagship3_messaging_overlay_participant_detail_screen_displayed",true,[30,9],[28,[32,4],["#",[30,1,["id"]]],null]]],null],[1,"\\n\\n"],[41,[30,10],[[[1,"          "],[8,[32,5],null,[["@bubbleId","@viewData","@ctaSize","@isOverlay","@updateTextarea","@parentRefocusElement","@invertColor"],[[30,1,["id"]],[30,2,["virtualMeetingCtaViewData"]],1,true,[30,11],[28,[32,4],["#",[30,1,["id"]]],null],[30,9]]],null],[1,"\\n"]],[]],null]],[]],null],[1,"      "],[8,[32,6],[[16,"aria-expanded",[52,[30,1,["isJumbo"]],"true","false"]],[4,[32,8],["click",[30,12]],null],[4,[32,9],[[52,[30,1,["isJumbo"]],"overlay.shrink_conversation_window","overlay.expand_conversation_window"]],null]],[["@type","@color","@circle","@size","@icon","@class","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],true,1,[52,[30,1,["isJumbo"]],"minimize","maximize"],"msg-overlay-bubble-header__control msg-overlay-conversation-bubble__expand-btn",[52,[30,1,["isJumbo"]],[28,[32,7],[[52,[30,1,["isNew"]],"i18n_minimize_bubble_new","i18n_minimize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]],[28,[32,7],[[52,[30,1,["isNew"]],"i18n_maximize_bubble_new","i18n_maximize_bubble"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[1,"    "],[8,[32,6],[[4,[32,8],["click",[30,13]],null],[4,[32,9],["overlay.close_conversation_window"],null]],[["@type","@color","@class","@circle","@size","@icon","@text"],[[52,[30,9],"primary","tertiary"],[52,[30,9],"default","muted"],"msg-overlay-bubble-header__control",true,1,"close",[28,[32,7],[[52,[30,1,["isNew"]],"a11y_close_convo_new","a11y_close_convo"],"msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[52,[30,2,["conversationName"]],[30,2,["conversationName"]],[28,[32,7],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-controls-presenter"],[["names"],[[30,2,["participantNames"]]]]]]]]]]],null],[1,"\\n  "],[13],[1,"\\n"]],["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@hasBadge","@showVideoMeetingButtonInHeader","@updateMessageCompose","@toggleJumboSize","@handleCloseBubble"],false,["unless","if","component"]]',moduleName:"msg-overlay/components/conversation-bubble-header-controls-presenter.gjs",scope:()=>[a.default,s.fn,s.hash,o.default,s.concat,r.default,l.default,c.default,d.on,u.default],isStrictMode:!0}),(0,n.default)("conversation-bubble-header-controls-presenter","ConversationBubbleHeaderControlsPresenter"))
e.default=p}))
define("msg-overlay/components/conversation-bubble-header-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/helper","@ember/component","@ember/service","msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata","@glimmer/component","@ember/modifier","ember-cli-pemberly-tracking/modifiers/track-interaction","msg-ui/components/delay-remove-from-dom","msg-ui/components/conversation-entity-presenter","ember-cli-pemberly-i18n/helpers/t","global-helpers/helpers/and","global-helpers/helpers/not","app-aware-link/components/navigation-context-link","ember-engines/components/link-to-external","global-helpers/helpers/time-ago","msg-overlay/components/conversation-bubble-header-controls-presenter","@ember/render-modifiers/modifiers/did-insert","@glimmer/tracking","global-utils/utils/is-browser","@ember/object"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D,k){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var S,O,I,P,x,E,R,A,T,N,U,B
e.default=(0,s.setComponentTemplate)((0,o.createTemplateFactory)({id:"lzKFNRwJ",block:'[[[1,"\\n"],[1,"    "],[11,"header"],[16,0,[29,["msg-overlay-bubble-header msg-overlay-conversation-bubble-header justify-space-between\\n        ",[52,[30,1,["isInMailCompose"]]," premium-accent-bar"]]]],[24,"tabindex","0"],[4,[32,0],["click",[30,2]],null],[4,[32,0],["keypress",[30,2]],null],[4,[32,1],[[52,[30,1,["isMinimized"]],"overlay.maximize_conversation_window_bar","overlay.minimize_conversation_window_bar"]],null],[12],[1,"\\n"],[1,"      "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n          ",[52,[30,3],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n\\n"],[1,"      "],[8,[32,2],null,[["@containerClass","@renderIf","@delay","@hideClass"],["align-items-center display-flex",[30,1,["isNew"]],132,"msg-overlay-conversation-bubble-header--fade-out"]],[["default"],[[[[1,"\\n        "],[10,0],[14,0,"flex-grow-1"],[12],[1,"\\n          "],[10,"h2"],[15,0,[29,["msg-overlay-bubble-header__title truncate t-14 t-bold\\n              ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n              pr1"]]],[14,"tabindex","-1"],[12],[1,"\\n            "],[1,[30,0,["defaultTitle"]]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isNew"]]],[[[1,"        "],[10,0],[15,0,[29,[[52,[30,1,["isNew"]],"msg-overlay-conversation-bubble-header--hidden","msg-overlay-conversation-bubble-header--fade-in"],"\\n            display-flex align-items-center flex-grow-1 overflow-hidden chrome-zindex-fix"]]],[12],[1,"\\n          "],[8,[32,3],null,[["@classNames","@viewData","@entitySize","@iconSize","@hasParticipants","@isInCoversationBubbleHeader"],["mr1",[30,0,["viewData","conversationEntityViewData"]],1,"small",[30,0,["viewData","hasParticipants"]],true]],null],[1,"\\n\\n"],[1,"          "],[10,0],[15,0,[29,["pl2 flex-grow-1 overflow-hidden\\n              ",[52,[28,[32,4],[[30,0,["showReplyResponseRate"]],[28,[32,5],[[30,1,["isMinimized"]]],null]],null],"display-flex flex-column"],"\\n              ",[52,[30,0,["isReplyResponseRateTruncated"]],"pv2"]]]],[12],[1,"\\n            "],[10,"h2"],[15,0,[29,["pr1 msg-overlay-bubble-header__title truncate t-14 t-bold\\n                ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"],"\\n                ",[52,[51,[30,0,["showReplyResponseRate"]]],"pl1"],"\\n                "]]],[14,"tabindex","-1"],[12],[1,"\\n"],[41,[30,0,["viewData","isCompanyRecipient"]],[[[41,[30,1,["isMinimized"]],[[[1,"                  "],[1,[28,[32,6],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]],[[[41,[28,[32,4],[[30,0,["viewData","pageUrl"]],[30,0,["viewData","pageName"]]],null],[[[1,"                    "],[8,[32,7],[[24,"target","_self"]],[["@href","@useDefaultLinkBehavior"],[[30,0,["viewData","pageUrl"]],false]],[["default"],[[[[1,"\\n                      "],[10,1],[15,0,[29,["hoverable-link-text\\n                          ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                        "],[1,[28,[32,6],["i18n_page_name","msg-overlay/components/conversation-bubble-header-feature"],[["pageName"],[[30,0,["viewData","pageName"]]]]]],[1,"\\n                      "],[13],[1,"\\n                    "]],[]]]]],[1,"\\n"]],[]],[[[1,"                    "],[8,[32,8],null,[["@route","@model"],["companies.company",[30,0,["viewData","companyRecipientId"]]]],[["default"],[[[[1,"\\n                      "],[10,1],[15,0,[29,["hoverable-link-text\\n                          ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                        "],[1,[28,[32,6],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                      "],[13],[1,"\\n                    "]],[]]]]],[1,"\\n"]],[]]]],[]]]],[]],[[[41,[30,0,["viewData","isGroupChat"]],[[[1,"                "],[1,[52,[30,0,["viewData","conversationName"]],[30,0,["viewData","conversationName"]],[28,[32,6],["i18n_participant_familiar","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNamesWithSelf"]]]]]]],[1,"\\n\\n"],[41,[51,[30,1,["isMinimized"]]],[[[1,"                  "],[10,"h3"],[15,0,[29,["t-12 t-normal truncate js-msg-group-participants\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[30,0,["viewData","existingGroupParticipantsTitle"]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null]],[]],[[[41,[30,1,["isMinimized"]],[[[1,"                "],[1,[28,[32,6],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n"]],[]],[[[41,[30,0,["shouldRenderStaticName"]],[[[1,"                  "],[10,1],[15,0,[29,["t-14 t-bold\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[28,[32,6],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","recipientProfileId"]],[[[1,"                  "],[8,[32,8],null,[["@route","@model","@bubbles"],["profile.common.profile",[30,0,["viewData","recipientProfileId"]],false]],[["default"],[[[[1,"\\n                    "],[10,1],[15,0,[29,["t-14 t-bold hoverable-link-text\\n                        ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                      "],[1,[28,[32,6],["i18n_participants_full_names","msg-overlay/components/conversation-bubble-header-feature"],[["names"],[[30,0,["viewData","participantNames"]]]]]],[1,"\\n                    "],[13],[1,"\\n                  "]],[]]]]],[1,"\\n                "]],[]],null]],[]]],[1,"              "]],[]]]],[]]]],[]]],[1,"            "],[13],[1,"\\n"],[41,[28,[32,4],[[30,0,["showReplyResponseRate"]],[28,[32,5],[[30,1,["isMinimized"]]],null]],null],[[[1,"              "],[11,1],[16,0,[29,["t-12 t-normal pr1 msg-overlay-bubble-header-dark--average-response-time\\n                  ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black--light"]]]],[4,[32,9],[[30,0,["checkReplyResponseRateTruncated"]]],null],[12],[1,"\\n                "],[1,[30,0,["viewData","averageResponseTimeText"]]],[1,"\\n              "],[13],[1,"\\n"]],[]],[[[41,[30,0,["viewData","hasPresenceInformation"]],[[[41,[51,[30,1,["isMinimized"]]],[[[41,[30,4,["isOnline"]],[[[1,"                  "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[28,[32,6],["i18n_active_now","msg-overlay/components/conversation-bubble-header-feature"],null]],[1,"\\n                  "],[13],[1,"\\n"]],[]],[[[41,[30,4,["isReachable"]],[[[1,"                  "],[10,0],[15,0,[29,["pl1 truncate t-12 t-normal\\n                      ",[52,[30,3],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n                    "],[1,[52,[30,4,["lastActiveAt"]],[28,[32,6],["i18n_mobile","msg-overlay/components/conversation-bubble-header-feature"],[["date"],[[28,[32,10],[[30,4,["lastActiveAt"]],"short-ago"],null]]]],[28,[32,6],["i18n_available_on_mobile","msg-overlay/components/conversation-bubble-header-feature"],null]]],[1,"\\n                  "],[13],[1,"\\n                "]],[]],null]],[]]]],[]],null],[1,"            "]],[]],null]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[1,"      "],[8,[32,11],null,[["@bubble","@viewData","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@hasBadge","@handleCloseBubble","@toggleJumboSize"],[[30,1],[30,0,["viewData","conversationBubbleHeaderControlsViewData"]],[30,5],[30,6],[30,7],[30,8],[30,9],[30,10],[30,11],[30,12],[30,3],[30,13],[30,14]]],null],[1,"\\n\\n    "],[13],[1,"\\n  "]],["@bubble","@toggleMinimize","@hasBadge","@presenceStatus","@handleSuccessfulDiscardRequest","@toggleShowRenameConversation","@enableReportingSponsoredConversation","@toggleConversationMute","@trackingModuleName","@actionTrackingPrefix","@showVideoMeetingButtonInHeader","@updateMessageCompose","@handleCloseBubble","@toggleJumboSize"],false,["if","unless"]]',moduleName:"msg-overlay/components/conversation-bubble-header-feature.gjs",scope:()=>[d.on,p.default,m.default,g.default,b.default,v.default,h.default,f.default,y.default,M.default,_.default,w.default],isStrictMode:!0}),(S=(0,l.inject)("i18n"),O=(0,l.inject)("formatter"),I=(0,l.inject)("msg-data@data-manager"),P=(0,l.inject)("authentication@authenticated-user"),x=(0,l.inject)("presence@presence-api-dash"),E=class extends u.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",R,this);(0,t.default)(this,"formatter",A,this);(0,t.default)(this,"msgDataManager",T,this);(0,t.default)(this,"authenticatedUser",N,this);(0,t.default)(this,"presenceAPI",U,this);(0,t.default)(this,"isReplyResponseRateTruncated",B,this)}get showReplyResponseRate(){return this.viewData.averageResponseTimeText}get viewData(){var e
const{conversation:t,messageRecipients:n}=this.args
return new c.default({conversation:t,participantStateMap:this.msgDataManager.mailboxParticipants,messageRecipients:n,authenticatedUserProfile:null===(e=this.authenticatedUser.miniProfile)||void 0===e?void 0:e.content,msgDataManager:this.msgDataManager,formatter:this.formatter,i18n:this.i18n,presenceAPI:this.presenceAPI})}get shouldRenderStaticName(){const{oneToOneParticipantPublicProfileId:e,creatorProfileViewEnabled:t}=this.viewData
return!t||!!e&&"UNKNOWN"===e}get defaultTitle(){const{bubble:e}=this.args
let t="i18n_new_message"
e.isDeprecatedLinkToJoin&&(t="i18n_join_group_chat")
return t?this.i18n.lookupTranslation("components/msg-overlay@conversation-bubble-header-feature",t)():""}checkReplyResponseRateTruncated(e){this.isReplyResponseRateTruncated=D.default&&e&&e.offsetWidth<=e.scrollWidth}},R=(0,i.default)(E.prototype,"i18n",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(E.prototype,"formatter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(E.prototype,"msgDataManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(E.prototype,"authenticatedUser",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.default)(E.prototype,"presenceAPI",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(E.prototype,"isReplyResponseRateTruncated",[C.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(E.prototype,"checkReplyResponseRateTruncated",[k.action],Object.getOwnPropertyDescriptor(E.prototype,"checkReplyResponseRateTruncated"),E.prototype),E))}))
define.alias("ember-vector-images/components/custom-image","msg-overlay/components/custom-image")
define.alias("ember-semaphore/components/ember-semaphore","msg-overlay/components/ember-semaphore")
define.alias("ember-wormhole/components/ember-wormhole","msg-overlay/components/ember-wormhole")
define.alias("helpcenter-in-product-ember/components/external-link","msg-overlay/components/external-link")
define.alias("helpcenter-in-product-ember/components/feature-launcher","msg-overlay/components/feature-launcher")
define.alias("helpcenter-in-product-ember/components/header","msg-overlay/components/header")
define.alias("helpcenter-in-product-ember/components/iph-widget-container","msg-overlay/components/iph-widget-container")
define.alias("helpcenter-in-product-ember/components/iph-widget-trigger","msg-overlay/components/iph-widget-trigger")
define.alias("helpcenter-in-product-ember/components/iph-widget","msg-overlay/components/iph-widget")
define.alias("ember-vector-images/components/lazy-background","msg-overlay/components/lazy-background")
define.alias("ember-vector-images/components/lazy-image","msg-overlay/components/lazy-image")
define.alias("ember-line-clamp/components/line-clamp","msg-overlay/components/line-clamp")
define.alias("artdeco-icons-web/components/linkedin-logo","msg-overlay/components/linkedin-logo")
define("msg-overlay/components/list-bubble-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/component","msg-shared/utils/category-filter","ember-test-waiters","msg-overlay/viewdata/list-bubble-viewdata","@ember/object/internals","@glimmer/tracking","@glimmer/component","ember-lifeline","rsvp","global-utils/utils/is-browser","msg-ui/utils/realtime-onboarding","msg-shared/utils/constants","@ember/object","@ember/service","@ember/destroyable","msg-shared/modifiers/block-scrolling","@ember/modifier","ember-set-helper/helpers/set","msg-overlay/components/presence-onboarding-presenter","ember-cli-pemberly-tracking/modifiers/track-interaction","presence/components/entity-with-presence-presenter","ember-cli-pemberly-i18n/helpers/t","hue-web-icons/components/icon","artdeco-dropdown/components/artdeco-dropdown","artdeco-dropdown/components/artdeco-dropdown-item","global-helpers/helpers/eq","artdeco-button/components/artdeco-button","msg-ui/components/premium-mailboxes","msg-ui/components/primitives/bulk-actions-panel-presenter","msg-overlay/components/overlay-search-feature","msg-cross-pillar/components/selected-filter-presenter","msg-ui/components/focused-inbox-tabs-presenter","@ember/helper","msg-ui/components/kindness-reminder-presenter","msg-ui/components/away-message-reminder-banner-presenter","msg-ui/components/harmful-content-detection-presenter","msg-ui/components/loader","global-modifiers/modifiers/scroll-into-view","msg-ui/components/message-request-list-header-presenter","msg-ui/components/focused-inbox-secondary-preview-banner-presenter","msg-ui/components/focused-inbox-banner-presenter","msg-ui/components/inbox-header-with-message-request-presenter","msg-overlay/components/overlay-conversation-list-feature","artdeco-empty-state/components/artdeco-empty-state","msg-cross-pillar/components/visible-beacon","msg-shared-modals/components/msg-settings-modal-presenter","msg-shared-modals/components/away-message-settings-modal-presenter","message-button/components/entry-point","msg-ui/components/circle-invitation-list-feature"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D,k,S,O,I,P,x,E,R,A,T,N,U,B,F,z,L,j,V,q,Y,H,K,W,G,J,X,Q,$,Z,ee){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var te,ne,ie,ae,oe,re,se,le,ce,ue,de,pe,me,ge,he,be,ve,fe,ye,_e,we,Me,Ce,De,ke,Se,Oe,Ie,Pe,xe,Ee,Re,Ae,Te,Ne,Ue,Be,Fe,ze,Le,je,Ve,qe,Ye,He,Ke,We,Ge,Je,Xe,Qe,$e,Ze,et,tt,nt
const{MESSAGE_REQUEST_STATUS:{MESSAGE_REQUEST_PENDING:it,MESSAGE_REQUEST_DECLINED:at},OVERLAY_LS_CONVERSATIONS_FILTER_KEY:ot,OVERLAY:{QUALITY_MEMBER_CONNECTIONS_THRESHOLD:rt},OVERLAY_FILTERS_INTERACTION_EVENTS:st,PAGEVIEW_KEYS:lt,KINDNESS_REMINDER_LEGO:ct,AWAY_MESSAGE_ONBOARDING_LEGO:ut,INBOX_TYPES:dt,MESSAGE_COLLECTION_TYPES:pt,DRAFTS_FILTER:mt}=v.default,gt=(0,l.buildWaiter)("msg-overlay:list-bubble-feature:load-inbox"),ht=(0,l.buildWaiter)("msg-overlay:list-bubble-feature:load-more")
e.default=(0,r.setComponentTemplate)((0,o.createTemplateFactory)({id:"xrvrt+EY",block:'[[[1,"\\n"],[1,"    "],[11,0],[24,"tabindex","-1"],[16,0,[29,["msg-overlay-list-bubble\\n        ",[52,[30,0,["isMinimized"]],"msg-overlay-list-bubble--is-minimized"],"\\n        ",[52,[30,0,["isInMinimizeTransition"]],"msg-overlay-list-bubble--during-transition"],"\\n        ml4 msg-overlay-list-bubble__tablet-height"]]],[4,[32,0],null,null],[4,[32,1],["transitionend",[28,[32,2],[[30,0],"isInMinimizeTransition",false],null]],null],[12],[1,"\\n      "],[10,"header"],[14,0,"msg-overlay-bubble-header"],[12],[1,"\\n        "],[10,0],[15,0,[29,["msg-overlay-bubble-header__badge-container\\n            ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header--inverse msg-overlay-bubble-header--is-badged"]]]],[12],[13],[1,"\\n        "],[8,[32,3],null,null,null],[1,"\\n"],[1,"        "],[11,0],[24,0,"msg-overlay-bubble-header__details flex-row align-items-center ml1"],[4,[32,1],["click",[30,0,["toggleMinimize"]]],null],[4,[32,4],[[30,0,["toggleMinimizeTrackingControlName"]]],null],[12],[1,"\\n          "],[8,[32,5],null,[["@viewData","@size"],[[30,0,["viewData","entityWithPresenceViewData"]],1]],null],[1,"\\n          "],[10,"button"],[14,0,"msg-overlay-bubble-header__button truncate ml2"],[14,4,"button"],[12],[1,"\\n            "],[10,1],[15,0,[29,["truncate t-14 t-bold\\n                ",[52,[30,0,["hasBadge"]],"msg-overlay-bubble-header-dark--active","t-black"]]]],[12],[1,"\\n              "],[10,1],[14,"aria-hidden","true"],[12],[1,"\\n                "],[1,[28,[32,6],["messaging","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n              "],[13],[1,"\\n              "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                "],[1,[52,[30,0,["isMinimized"]],[28,[32,6],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[32,6],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n\\n"],[41,[30,0,["hasBadge"]],[[[1,"            "],[10,"mark"],[14,0,"msg-overlay-bubble-header__unread-count"],[14,"aria-hidden","true"],[12],[1,"\\n              "],[10,"abbr"],[15,"title",[28,[32,6],["a11y_unseen_messages","msg-overlay/components/list-bubble-feature"],[["count"],[[30,0,["msgOverlayService","unseenMsgCount"]]]]]],[12],[1,"\\n                "],[1,[30,0,["msgOverlayService","unseenMsgCount"]]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[41,[30,0,["enableRealtimeConnectionStatus"]],[[[1,"            "],[10,0],[15,0,[28,[32,7],["msg-overlay-bubble-header__realtime-indicator ",[30,0,["realtimeStatusClassName"]]],null]],[12],[1,"\\n              "],[8,[32,8],null,[["@type","@size","@name"],["system","medium","flash"]],null],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"        "],[13],[1,"\\n        "],[10,0],[14,0,"msg-overlay-bubble-header__controls display-flex"],[12],[1,"\\n"],[1,"          "],[8,[32,9],null,[["@isOpen","@onVisibilityChange","@placement","@justification","@onClick","@shouldTriggerRetainFocus"],[[30,0,["isHeaderDropdownMenuOpen"]],[28,[32,2],[[30,0],"isHeaderDropdownMenuOpen"],null],[30,0,["headerDropdownMenuPlacement"]],"right",[30,0,["stopEvtPropagation"]],false]],[["default"],[[[[1,"\\n            "],[8,[30,1,["dropdown-trigger"]],[[4,[32,4],["overlay.dropdown_menu"],null]],[["@class"],[[29,["msg-overlay-bubble-header__dropdown-trigger artdeco-button artdeco-button--1 artdeco-button--circle ",[52,[30,0,["hasBadge"]],"artdeco-button--primary","artdeco-button--muted artdeco-button--tertiary"]]]]],[["default"],[[[[1,"\\n              "],[8,[32,8],null,[["@a11yText","@type","@size","@name"],[[28,[32,6],["i18n_dropdown_menu_description","msg-overlay/components/list-bubble-feature"],null],"system","small","overflow-web-ios"]],null],[1,"\\n            "]],[]]]]],[1,"\\n            "],[10,0],[14,0,"msg-overlay-bubble-header__dropdown-container"],[12],[1,"\\n              "],[8,[30,1,["dropdown-content"]],null,[["@arrowDir"],["right"]],[["default"],[[[[1,"\\n                "],[10,"ul"],[14,0,"white-space-nowrap"],[12],[1,"\\n"],[41,[30,0,["showManageConversationsButtonInHeaderDropdown"]],[[[1,"                    "],[8,[32,10],[[4,[32,4],["overlay.enter_bulk_selection"],null]],[["@itemSelected","@role"],[[30,0,["enterBulkActionsMode"]],"button"]],[["default"],[[[[1,"\\n                      "],[10,0],[14,0,"display-flex align-items-center"],[12],[1,"\\n                        "],[10,1],[12],[1,"\\n                          "],[1,[28,[32,6],["i18n_manage_conversations","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                        "],[13],[1,"\\n                      "],[13],[1,"\\n                    "]],[]]]]],[1,"\\n"]],[]],null],[1,"                  "],[8,[32,10],[[4,[32,4],["overlay.connection_list_settings_from_dropdown"],null]],[["@itemSelected","@role"],[[30,0,["openMessagingSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,6],["i18n_messaging_settings","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n"],[41,[51,[30,0,["enableFocusedInbox"]]],[[[41,[30,0,["showMessageRequestInboxInHeaderDropdown"]],[[[1,"                      "],[8,[32,10],[[4,[32,4],["overlay.overflow_view_message_request_inbox"],null]],[["@itemSelected","@role"],[[30,0,["openMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                        "],[1,[28,[32,6],["i18n_message_request_inbox","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                      "]],[]]]]],[1,"\\n"]],[]],null]],[]],null],[1,"\\n"],[41,[28,[32,11],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"                    "],[8,[32,10],[[4,[32,4],["overlay.view_declined_message_requests"],null]],[["@itemSelected","@role"],[[30,0,["openDeclinedMessageRequestConversationList"]],"button"]],[["default"],[[[[1,"\\n                      "],[1,[28,[32,6],["i18n_declined_message_requests","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                    "]],[]]]]],[1,"\\n"]],[]],null],[1,"                  "],[8,[32,10],null,[["@itemSelected","@role"],[[30,0,["openAwayMessageSettingsModal"]],"button"]],[["default"],[[[[1,"\\n                    "],[1,[52,[30,0,["msgDataManager","currentAwayStatus"]],[28,[32,6],["i18n_update_away_message","msg-overlay/components/list-bubble-feature"],null],[28,[32,6],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n          "]],[1]]]]],[1,"\\n\\n"],[41,[30,0,["msgDataManager","dispatcherFetchInitialDataForOverlay"]],[[[1,"            "],[8,[32,12],null,[["@controlUrn","@referringModuleKey","@target"],["msg-overlay-compose","messaging:overlay-inbox-compose","OVERLAY"]],[["default"],[[[[1,"\\n              "],[8,[32,13],[[4,[32,1],["click",[30,2]],null],[4,[32,4],["overlay.compose_message"],null]],[["@text","@type","@color","@circle","@size","@icon","@class"],[[28,[32,6],["a11y_compose","msg-overlay/components/list-bubble-feature"],null],[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],true,1,"compose-icon","msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn"]],null],[1,"\\n            "]],[2]]]]],[1,"\\n"]],[]],[[[1,"            "],[8,[32,13],[[4,[32,1],["click",[30,0,["newConversation"]]],null],[4,[32,4],["overlay.compose_message"],null]],[["@text","@type","@color","@circle","@size","@icon","@class"],[[28,[32,6],["a11y_compose","msg-overlay/components/list-bubble-feature"],null],[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],true,1,"compose-icon","msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn"]],null],[1,"\\n"]],[]]],[1,"\\n"],[1,"          "],[8,[32,13],[[4,[32,1],["click",[30,0,["toggleMinimize"]]],null],[4,[32,4],[[52,[30,0,["isMinimized"]],"overlay_maximize_inbox","overlay_minimize_inbox"]],null]],[["@type","@color","@text","@circle","@size","@icon","@class"],[[52,[30,0,["hasBadge"]],"primary","tertiary"],[52,[30,0,["hasBadge"]],"default","muted"],[52,[30,0,["isMinimized"]],[28,[32,6],["a11y_open_overlay","msg-overlay/components/list-bubble-feature"],null],[28,[32,6],["a11y_minimize_overlay","msg-overlay/components/list-bubble-feature"],null]],true,1,[52,[30,0,["isMinimized"]],"chevron-up","chevron-down"],"msg-overlay-bubble-header__control msg-overlay-bubble-header__control--new-convo-btn"]],null],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[8,[32,14],null,[["@isOverlay"],[true]],null],[1,"\\n\\n"],[41,[30,0,["shouldRenderContent"]],[[[41,[30,0,["isBulkActionsMode"]],[[[1,"          "],[8,[32,15],null,[["@willExecuteBulkAction","@didExecuteBulkAction","@onExitBulkActionsMode","@isOverlay","@selectedConversationUrns"],[[30,0,["willExecuteBulkAction"]],[30,0,["didExecuteBulkAction"]],[30,0,["onExitBulkActionsMode"]],true,[30,0,["selectedConversationUrns"]]]],null],[1,"\\n"]],[]],null],[1,"\\n        "],[8,[32,16],null,[["@openNewConversation","@openBubble","@currentConvosFilter","@onFilterApply","@onClearFilters","@showSearchInput","@onSearchTermChange","@useEntryPoint","@authenticatedUserMiniProfile"],[[30,3],[30,4],[30,0,["currentConvosFilter"]],[30,0,["applyFilter"]],[30,0,["clearFilters"]],[30,0,["showSearchInput"]],[30,0,["onSearchTermChange"]],[30,0,["msgDataManager","dispatcherFetchInitialDataForOverlay"]],[30,0,["authenticatedUser","miniProfile"]]]],[["default"],[[[[1,"\\n          "],[8,[30,5,["filterSection"]],null,null,[["default"],[[[[1,"\\n            "],[8,[32,17],null,[["@clearFilter","@currentConvosFilter","@trackingPrefix","@disabled","@loadedUnreadConversations","@markAllAsRead"],[[30,0,["clearFilters"]],[30,0,["currentConvosFilter"]],"overlay.",[30,0,["isBulkActionsMode"]],[30,0,["hasLoadedUnreadConversations"]],[30,0,["markAllAsRead"]]]],null],[1,"\\n          "]],[]]]]],[1,"\\n        "]],[5]]]]],[1,"\\n\\n        "],[10,0],[14,0,"msg-overlay-list-bubble__top-static-area"],[12],[1,"\\n"],[41,[30,0,["showFocusedInboxTabs"]],[[[1,"            "],[8,[32,18],null,[["@currentSelection","@showSecondaryTabBadge","@onPrimaryTabSelect","@onSecondaryTabSelect","@isOverlay"],[[30,0,["inboxType"]],[30,0,["hasUnseenSecondaryConversations"]],[28,[32,19],[[30,0,["switchInboxTab"]],"PRIMARY"],null],[28,[32,19],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showKindnessReminder"]],[[[1,"            "],[8,[32,20],[[24,0,"msg-overlay-list-bubble__kindness-reminder"]],[["@type","@legoConfig","@text","@primaryActionText","@onImpression","@onDismiss","@onPrimary"],["basic",[30,0,["kindnessReminderLegoConfig"]],[28,[32,6],["i18n_kindness_reminder_text","msg-overlay/components/list-bubble-feature"],null],[28,[32,6],["i18n_kindness_reminder_learn_more","msg-overlay/components/list-bubble-feature"],null],[30,0,["impressionKindnessReminder"]],[30,0,["onKindnessReminderWidgetDismiss"]],[30,0,["clickKindnessReminder"]]]],null],[1,"\\n"]],[]],null],[1,"\\n          "],[8,[32,21],null,null,null],[1,"\\n\\n"],[41,[51,[30,0,["currentConvosFilter"]]],[[[41,[51,[30,0,["isBulkActionsMode"]]],[[[41,[30,0,["showAwayMessageOnboarding"]],[[[1,"                "],[8,[32,20],null,[["@title","@text","@legoConfig","@onDismiss","@onPrimary","@primaryActionText"],[[28,[32,6],["i18n_away_message_onboarding_title","msg-overlay/components/list-bubble-feature"],null],[28,[32,6],["i18n_away_message_onboarding_text","msg-overlay/components/list-bubble-feature"],null],[30,0,["awayMessageOnboardingLegoConfig"]],[28,[32,2],[[30,0],"showAwayMessageOnboarding",false],null],[28,[32,2],[[30,0],"awayMessageSettingsModalIsOpen",true],null],[28,[32,6],["i18n_set_away_message","msg-overlay/components/list-bubble-feature"],null]]],[["default"],[[[[1,"\\n                  "],[8,[30,6,["leftSection"]],null,null,[["default"],[[[[1,"\\n                    "],[8,[32,8],null,[["@type","@size","@name"],["logo","xsmall","linkedin-bug-premium"]],null],[1,"\\n                  "]],[]]]]],[1,"\\n                "]],[6]]]]],[1,"\\n"]],[]],null]],[]],null]],[]],null],[1,"        "],[13],[1,"\\n\\n"],[41,[51,[30,0,["enableFocusedInbox"]]],[[[1,"          "],[8,[32,22],null,null,null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["inboxDataFetchFailed"]],[[[1,"          "],[10,0],[14,0,"msg-overlay-list-bubble__failed-to-connect-container text-align-center"],[12],[1,"\\n            "],[10,"h3"],[14,0,"t-16 t-black--light t-normal ph3 pb5"],[12],[1,"\\n              "],[1,[28,[32,6],["i18n_failed_connect","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n            "],[13],[1,"\\n            "],[8,[32,13],[[4,[32,1],["click",[30,0,["refetchInboxData"]]],null],[4,[32,4],["overlay.retry"],null]],[["@type","@text"],["secondary",[28,[32,6],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null]]],null],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showInboxLoader"]],[[[1,"            "],[8,[32,23],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["hideConversationsList"]]],[[[1,"            "],[10,"section"],[14,0,"scrollable msg-overlay-list-bubble__content msg-overlay-list-bubble__content--scrollable"],[12],[1,"\\n"],[1,"              "],[11,0],[4,[32,24],null,[["when"],[[30,0,["shouldScrollToTop"]]]]],[12],[13],[1,"\\n"],[1,"              "],[10,0],[14,0,"msg-overlay-list-bubble__default-conversation-container"],[12],[1,"\\n"],[41,[28,[32,11],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_PENDING"],null],[[[1,"                  "],[8,[32,25],null,[["@trackingKey","@goBack"],["back_to_inbox_from_requests_overlay",[30,0,["backToInboxFromMessageRequestList"]]]],null],[1,"\\n"]],[]],[[[41,[28,[32,11],[[30,0,["currentConvosFilter"]],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"                  "],[8,[32,25],null,[["@isDeclinedList","@trackingKey","@goBack"],[true,"back_to_message_requests_from_declined_messages_overlay",[30,0,["messageRequestListHeaderOnGoBack"]]]],null],[1,"\\n                "]],[]],null]],[]]],[1,"\\n"],[41,[30,0,["inboxDataLoaded"]],[[[41,[30,0,["shouldShowSecondaryPreviewBanner"]],[[[1,"                    "],[10,0],[14,0,"msg-conversation-card msg-ui-focused-inbox-secondary-preview-banner-presenter__secondary-preview-banner-card display-flex"],[12],[1,"\\n                      "],[8,[32,26],null,[["@classNames","@onClicked","@isOverlay"],["pl2 mb2 mh2 mt2 ",[28,[32,19],[[30,0,["switchInboxTab"]],"SECONDARY"],null],true]],null],[1,"\\n                    "],[13],[1,"\\n"]],[]],[[[41,[30,0,["showFocusedInboxBanner"]],[[[1,"                    "],[8,[32,27],null,[["@isOverlay","@showLoader"],["true",[30,0,["setLoader"]]]],null],[1,"\\n                  "]],[]],null]],[]]],[1,"\\n                  "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                    "],[1,[28,[32,6],["i18n_a11y_infinite_scroll","msg-overlay/components/list-bubble-feature"],null]],[1,"\\n                  "],[13],[1,"\\n"],[41,[30,0,["showMessageRequestBanner"]],[[[1,"                    "],[8,[32,28],null,[["@headingText","@openMessageRequestConversationList","@trackingKey"],[[30,0,["headerText"]],[30,0,["openMessageRequestConversationList"]],"overlay.bundle_view_message_request_inbox"]],null],[1,"\\n"]],[]],null]],[]],null],[1,"\\n                "],[8,[32,29],null,[["@canRender","@openInviteControlName","@pageKey"],[[30,0,["showCircleInvitations"]],"overlay.open_community_chats_invitation","flagship3_messaging_overlay_community_invites_carousel"]],null],[1,"\\n\\n                "],[8,[32,30],null,[["@conversations","@showLoadingState","@currentConvosFilter","@hasStrongNetwork","@isBulkActionsMode","@disableBulkActions","@openBubble","@newConversation","@onBulkActionToggle","@selectedConversationUrns","@conversationLength","@showNoMessagesPresenter","@useEntryPoint","@authenticatedUserMiniProfile"],[[30,0,["conversations"]],[30,0,["showLoadingState"]],[30,0,["currentConvosFilter"]],[30,0,["hasStrongNetwork"]],[30,0,["isBulkActionsMode"]],[30,0,["disableBulkActions"]],[30,0,["openBubbleByConversationUrn"]],[30,0,["newConversation"]],[30,0,["onListBubbleItemClick"]],[30,0,["selectedConversationUrns"]],[30,0,["conversations","length"]],[30,0,["showNoMessagesPresenter"]],[30,0,["msgDataManager","dispatcherFetchInitialDataForOverlay"]],[30,0,["authenticatedUser","miniProfile"]]]],null],[1,"\\n"],[41,[30,0,["loadMoreError"]],[[[1,"                  "],[10,0],[14,0,"p4 mb6"],[12],[1,"\\n                    "],[8,[32,31],null,[["@class","@headline","@illustration","@message"],["msg-conversations-container__load-error",[28,[32,6],["i18n_oops","msg-overlay/components/list-bubble-feature"],null],"no-connection-muted",[28,[32,6],["i18n_load_more_error","msg-overlay/components/list-bubble-feature"],null]]],null],[1,"\\n                    "],[8,[32,13],[[4,[32,1],["click",[30,0,["retryLoadMore"]]],null],[4,[32,4],["overlay.retry"],null]],[["@class","@text","@type"],["js-retry-button block mlA mrA",[28,[32,6],["i18n_try_again","msg-overlay/components/list-bubble-feature"],null],"secondary"]],null],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"                  "],[8,[32,32],null,[["@inView","@rootSelector"],[[30,0,["loadMore"]],".msg-overlay-list-bubble__content"]],null],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],null]],[]]]],[]],null],[1,"\\n"],[41,[30,0,["isMessagingSettingsModalOpen"]],[[[1,"        "],[8,[32,33],null,[["@closeModal","@returnFocusTo"],[[28,[32,2],[[30,0],"isMessagingSettingsModalOpen",false],null],[30,0,["modalReturnFocusElement"]]]],null],[1,"\\n"]],[]],null],[41,[30,0,["awayMessageSettingsModalIsOpen"]],[[[1,"        "],[8,[32,34],null,[["@closeModal","@returnFocusTo"],[[28,[32,2],[[30,0],"awayMessageSettingsModalIsOpen",false],null],[30,0,["modalReturnFocusElement"]]]],null],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n  "]],["dropdown","openMessaging","@newConversation","@openBubble","OverlaySearchFeatureInstance","widget"],false,["if","unless"]]',moduleName:"msg-overlay/components/list-bubble-feature.gjs",scope:()=>[w.default,M.on,C.default,D.default,k.default,S.default,O.default,F.concat,I.default,P.default,x.default,E.default,Z.default,R.default,A.default,T.default,N.default,U.default,B.default,F.fn,z.default,L.default,j.default,V.default,q.default,Y.default,H.default,K.default,W.default,ee.default,G.default,J.default,X.default,Q.default,$.default],isStrictMode:!0}),(te=(0,y.inject)("authentication@authenticated-user"),ne=(0,y.inject)("global-nav-shared@badge"),ie=(0,y.inject)("lix"),ae=(0,y.inject)("tracking"),oe=(0,y.inject)("i18n"),re=(0,y.inject)("global-services@window"),se=(0,y.inject)("global-services@a11y-notification"),le=(0,y.inject)("msg-overlay-manager@msg-overlay-manager"),ce=(0,y.inject)("global-services@common-time"),ue=(0,y.inject)("global-services@store-shim"),de=(0,y.inject)("global-services@local-storage"),pe=(0,y.inject)("lego@resolver"),me=(0,y.inject)("lego@tracking"),ge=(0,y.inject)("msg-shared@messaging-user-settings"),he=(0,y.inject)("msg-data@data-manager"),be=(0,y.inject)("formatter"),ve=(0,y.inject)("persistent-toast-manager@persistent-toast-manager"),fe=class extends p.default{get isMinimized(){return this.msgOverlayService.listBubbleIsMinimized}get shouldRenderContent(){return!this.isMinimized||this.isInMinimizeTransition}get disableBulkActions(){return this.showMessageRequestConversationList||this.localConvosFilter===mt.DRAFTS}get showMessageRequestConversationList(){return this.currentConvosFilter===it||this.currentConvosFilter===at}get showSearchInput(){return!this.isBulkActionsMode&&(!this.showMessageRequestConversationList||this.enableFocusedInbox)}get showFocusedInboxTabs(){return this.enableFocusedInbox&&(!this.currentConvosFilter||this.currentConvosFilter===it||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter)}get showMessageRequestInboxInHeaderDropdown(){return!this.showMessageRequestConversationList}get showManageConversationsButtonInHeaderDropdown(){return!this.showMessageRequestConversationList}get toggleMinimizeTrackingControlName(){return this.isMinimized?"overlay.maximize_connection_list_bar":"overlay.minimize_connection_list_bar"}get hideConversationsList(){return this.showInboxLoader}get hasBadge(){return this.msgOverlayService.unseenMsgCount>0&&(!this.msgOverlayService.forcedMinimizedAtRoute||this.args.realtimeMsgNotAutoOpened)}get hasStrongNetwork(){return this.numConnections>rt}get showMessageRequestBanner(){return!this.enableFocusedInbox&&this.unreadPendingMessageRequestCount>0&&!this.currentConvosFilter}get headerText(){return this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_message_request_count")([{count:this.unreadPendingMessageRequestCount}])}get unreadPendingMessageRequestCount(){var e
return null===(e=this.msgDataManager.getMailboxState())||void 0===e?void 0:e.unreadCounts[pt.MESSAGE_REQUEST_PENDING]}get showFocusedInboxBanner(){return!(this.currentConvosFilter&&"PRIMARY_INBOX"!==this.currentConvosFilter&&"SECONDARY_INBOX"!==this.currentConvosFilter||this.isBulkActionsMode)}get showKindnessReminder(){return!this.kindnessReminderShown&&!this.currentConvosFilter&&!this.isBulkActionsMode}get realtimeStatusClassName(){var e
return(null===(e=this.commonTime.getCommonTimeClient())||void 0===e?void 0:e.connected)?"msg-overlay-bubble-header__realtime-indicator--online":"msg-overlay-bubble-header__realtime-indicator--offline"}get headerDropdownMenuPlacement(){return this.isMinimized?"top":"bottom"}get shouldLoadMoreConversations(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!!e&&(!e.status.loading&&!e.status.fullyLoaded&&!this.loadMoreError)}get conversations(){return this.msgDataManager.getTrackedConversations(this.mailboxName)}get hasLoadedUnreadConversations(){var e
return((null===(e=this.conversations)||void 0===e?void 0:e.filter((e=>!e.read)))??[]).length>0}get enableRealtimeConnectionStatus(){return this.lix.getTreatmentIsEnabled("voyager.messaging.web.show-realtime-connection-status")}get isCompanyUser(){return this.lix.getTreatmentIsEnabled("voyager.client.staff")}get enableFocusedInbox(){return!!this.msgUserSettings.focusedInboxEnabled}get hasUnseenSecondaryConversations(){return!!this.enableFocusedInbox&&null!==this.msgDataManager.inboxManager.secondaryPreviewBannerData}get shouldShowSecondaryPreviewBanner(){return this.hasUnseenSecondaryConversations&&this.showFocusedInboxTabs&&"PRIMARY"===this.inboxType}get showLoadingState(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!e||e.status.loading}get viewData(){return new c.default({formatter:this.formatter,authenticatedUserProfile:this.authenticatedUser.miniProfile.content})}get shouldScrollToTop(){const e=this.currentConvosFilter!==this._previousConvosFilter
this._previousConvosFilter=this.currentConvosFilter
return e}get defaultConvosFilter(){let e=this.args.filterFromDeeplink??null
e||(e=this.localStorage.getItem(ot))
!e&&this.enableFocusedInbox&&(e="PRIMARY_INBOX")
return e}get currentConvosFilter(){return this.localConvosFilter??this.defaultConvosFilter}get showNoMessagesPresenter(){return(!this.enableFocusedInbox||this.inboxType===dt.PRIMARY||this.inboxType===dt.SECONDARY)&&this.isUnfiltered}get isUnfiltered(){return!this.currentConvosFilter||"PRIMARY_INBOX"===this.currentConvosFilter||"SECONDARY_INBOX"===this.currentConvosFilter}get showCircleInvitations(){return(!this.enableFocusedInbox||this.inboxType===dt.PRIMARY)&&this.isUnfiltered}constructor(){super(...arguments);(0,n.default)(this,"listBubbleId",`list-bubble-${(0,u.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",ye,this);(0,t.default)(this,"badging",_e,this);(0,t.default)(this,"lix",we,this);(0,t.default)(this,"tracking",Me,this);(0,t.default)(this,"i18n",Ce,this);(0,t.default)(this,"windowService",De,this);(0,t.default)(this,"a11yNotification",ke,this);(0,t.default)(this,"msgOverlayService",Se,this);(0,t.default)(this,"commonTime",Oe,this);(0,t.default)(this,"storeShim",Ie,this);(0,t.default)(this,"localStorage",Pe,this);(0,t.default)(this,"legoResolver",xe,this);(0,t.default)(this,"legoTracking",Ee,this);(0,t.default)(this,"msgUserSettings",Re,this);(0,t.default)(this,"msgDataManager",Ae,this);(0,t.default)(this,"formatter",Te,this);(0,t.default)(this,"persistentToastManager",Ne,this);(0,t.default)(this,"mailboxName",Ue,this);(0,t.default)(this,"isHeaderDropdownMenuOpen",Be,this);(0,t.default)(this,"isMessagingSettingsModalOpen",Fe,this);(0,t.default)(this,"inboxDataFetchInProgress",ze,this);(0,t.default)(this,"inboxDataLoaded",Le,this);(0,t.default)(this,"inboxDataFetchFailed",je,this);(0,t.default)(this,"loadMoreError",Ve,this);(0,t.default)(this,"loadMoreInProgress",qe,this);(0,t.default)(this,"numConnections",Ye,this);(0,t.default)(this,"awayMessageSettingsModalIsOpen",He,this);(0,t.default)(this,"selectedConversations",Ke,this);(0,t.default)(this,"selectedConversationUrns",We,this);(0,t.default)(this,"isBulkActionsMode",Ge,this);(0,t.default)(this,"searchTerm",Je,this);(0,t.default)(this,"inboxType",Xe,this);(0,t.default)(this,"isInMinimizeTransition",Qe,this);(0,t.default)(this,"showAwayMessageOnboarding",$e,this);(0,t.default)(this,"showInboxLoader",Ze,this);(0,t.default)(this,"upsellCard",et,this);(0,n.default)(this,"modalReturnFocusElement",".msg-overlay-bubble-header__dropdown-trigger");(0,n.default)(this,"bubbleMinimizeProperty","isMinimized");(0,n.default)(this,"kindnessReminderLegoConfig",ct);(0,n.default)(this,"kindnessReminderHelpCenterLink","/legal/professional-community-policies");(0,n.default)(this,"awayMessageOnboardingLegoConfig",ut);(0,t.default)(this,"kindnessReminderShown",tt,this);(0,n.default)(this,"_previousConvosFilter",null);(0,t.default)(this,"localConvosFilter",nt,this)
new b.default(this.legoResolver,this.legoTracking,this.msgUserSettings,this.storeShim,this.tracking,this.lix).run()
const e=this.enableFocusedInbox?"PRIMARY_INBOX":"INBOX"
this.mailboxName=e
this.msgUserSettings.onFocusedInboxOptOut(this.refreshSettings)
this._fetchInboxData(this.defaultConvosFilter)
this.msgDataManager.fetchPremiumFeatureAccess("CAN_ACCESS_AWAY_MESSAGES").then((e=>{if(!this.isDestroying){this.showAwayMessageOnboarding=e
this.msgDataManager.fetchAwayMessageSettings()}}))
this.isMinimized||this.enableFocusedInbox||this.tracking.firePageViewEvent("flagship3_messaging_overlay_connections.page")}_fetchInboxData(e){this.inboxDataFetchInProgress=!0
this.inboxDataLoaded=!1
const t=this._loadConversations(e)
return(0,g.hashSettled)({conversations:t}).then((e=>{var t,n
if(this.isDestroying)return
if("rejected"===e.conversations.state){this.inboxDataFetchFailed=!0
this.tracking.firePageViewEvent(lt.OVERLAY_FAILED_TO_CONNECT)
return(0,g.resolve)()}null===(t=(n=this.args).afterInboxDataFetch)||void 0===t||t.call(n,this.conversations)
return(0,g.resolve)(e)})).then((()=>{if((0,_.isDestroying)(this))return
const e=[this.msgDataManager.inboxManager.fetchSecondaryInboxData(),this.msgDataManager.nudgingDataManager.fetchConversationNudges()]
return Promise.all(e)})).finally((()=>{if(!this.isDestroying){this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!0}}))}_loadConversations(e){return e?this.loadConversationsByFilter(e).then((t=>{if(this.isDestroying)return
const n=lt.OVERLAY_CONVERSATION_FILTERED_LIST[e]
n&&this.tracking.firePageViewEvent(n)
return t})):this.msgDataManager.getMailbox()}switchInboxTab(e){this.inboxType=e
this.isBulkActionsMode=!1
"SECONDARY"===e&&this.msgDataManager.inboxManager.markSecondaryInboxAsSeen()
this.loadConversationsByFilter(`${this.inboxType}_INBOX`)
const t="PRIMARY"===e?"flagship3_messaging_overlay_primary_tab":"flagship3_messaging_overlay_secondary_tab"
this.tracking.firePageViewEvent(t)}refreshSettings(){this.mailboxName="INBOX"
this.refetchInboxData()}loadConversationsByFilter(e){this.isBulkActionsMode=!1
this.inboxDataLoaded=!1
this.inboxDataFetchInProgress=!0
this.localConvosFilter=e
const{mailboxFilter:t,mailboxName:n}=(0,s.default)(e)
this.mailboxName=n
return this.msgDataManager.getMailbox(this.mailboxName,t).then((async e=>{if(!(0,_.isDestroying)(this)){if(0===e.state.conversations.length&&!e.state.status.loading){await e.loadOlderConversations()
if((0,_.isDestroying)(this))return}return(0,g.resolve)(this.msgDataManager.getTrackedConversations(n))}})).finally((()=>{if(!this.isDestroying){this.inboxDataLoaded=!0
this.inboxDataFetchInProgress=!1}}))}refetchInboxData(){this.inboxDataFetchFailed=!1
this.inboxDataFetchInProgress=!1
this.inboxDataLoaded=!1
this._fetchInboxData("")}_updateMinimizedState(e){(0,m.runTask)(this,(()=>this.msgOverlayService.updateListBubbleMinimizeState(e)))}loadMore(){var e
if(this.loadMoreInProgress)return(0,g.resolve)()
if(0===(null===(e=this.conversations)||void 0===e?void 0:e.length))return(0,g.resolve)()
this.loadMoreInProgress=!0
this.loadMoreError=!1
const t=new g.Promise(((e,t)=>{this.msgDataManager.getMailbox(this.mailboxName).then((e=>e.loadOlderConversations())).then((t=>{(0,_.isDestroying)(this)||e(t)})).catch((e=>{if((0,_.isDestroying)(this))throw e
t(e)}))})),n=ht.beginAsync()
return t.then((e=>{if((0,_.isDestroying)(this))return
const t=this.i18n.lookupTranslation("components/msg-ui@i18n-shared","i18n_a11y_infinite_scroll_conversations")
this.a11yNotification.setTextInLiveRegion(t([{newRecordCount:e}]))
return e})).catch((e=>{if(!this.isDestroying){this.loadMoreError=!0
throw e}})).finally((()=>{ht.endAsync(n)
this.isDestroying||(this.loadMoreInProgress=!1)}))}newConversation(e,t){var n,i
e&&e.stopPropagation()
null===(n=(i=this.args).newConversation)||void 0===n||n.call(i,t)}retryLoadMore(){this.loadMore()}stopEvtPropagation(e){e&&e.stopPropagation()}toggleMinimize(e){var t
null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)
this.isInMinimizeTransition=!0
if(this.isMinimized){this.badging.getBadgeCount("messaging")>0&&this.badging.fireBadgeInteractionEvent(document.getElementById(this.listBubbleId),"msg-overlay-list-bubble-header","messaging")
this.msgOverlayService.markAllAsSeen()}this.msgOverlayService.toggleListBubbleMinimized()
this.isMinimized||this.enableFocusedInbox||this.tracking.firePageViewEvent("flagship3_messaging_overlay_connections.page")}openMessageRequestConversationList(){this.loadConversationsByFilter(it)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_pending_request_inbox")}backToInboxFromMessageRequestList(){this.loadConversationsByFilter("")
this.tracking.fireInteractionEvent("overlay.back_to_inbox_from_requests")}openDeclinedMessageRequestConversationList(){this.loadConversationsByFilter(at)
this.isHeaderDropdownMenuOpen=!1
this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_declined_request_inbox")}openAwayMessageSettingsModal(e){null==e||e.stopPropagation()
this.awayMessageSettingsModalIsOpen=!0}openMessagingSettingsModal(e){e&&e.stopPropagation()
this.isMessagingSettingsModalOpen=!0}onListBubbleItemClick(e){var t
if(!this.conversations.find((t=>t.entityUrn===e)))return
this._toggleConversationSelected(e)
this.selectedConversations=null===(t=this.conversations)||void 0===t?void 0:t.filter((e=>this.selectedConversationUrns.includes(e.entityUrn)))
!this.isBulkActionsMode&&this.selectedConversations.length>0?this.isBulkActionsMode=!0:0===this.selectedConversations.length&&(this.isBulkActionsMode=!1)
const n=this.selectedConversationUrns.includes(e)?"overlay.bulk_select_conversation":"overlay.bulk_unselect_conversation"
this.tracking.fireInteractionEvent(n)}_toggleConversationSelected(e){if(0===this.selectedConversationUrns.length)this.selectedConversationUrns=[e]
else{const t=this.selectedConversationUrns.includes(e)
this.selectedConversationUrns=t?this.selectedConversationUrns.filter((t=>t!==e)):this.selectedConversationUrns.concat(e)}}enterBulkActionsMode(e){e&&e.stopPropagation()
this.isMinimized&&this.toggleMinimize()
this.isBulkActionsMode=!0
this.isHeaderDropdownMenuOpen=!1}onExitBulkActionsMode(){this.selectedConversationUrns=[]
this.selectedConversations=[]
this.isBulkActionsMode=!1}willExecuteBulkAction(){this.isBulkActionsMode=!1}didExecuteBulkAction(e){"delete"===e&&this.selectedConversations.forEach((e=>{this.msgOverlayService.closeBubbleByConversationUrnOrBubbleId(e.entityUrn)}))}applyFilter(e){e?this.localStorage.setItem(ot,e):this.localStorage.removeItem(ot)
this.loadConversationsByFilter(e).then((()=>{(0,_.isDestroying)(this)||this.tracking.firePageViewEvent(lt.OVERLAY_CONVERSATION_FILTERED_LIST[e||"ALL"])}))
this.tracking.fireInteractionEvent(st.SELECT[e||"ALL"],"SHORT_PRESS")}clearFilters(){this.localStorage.removeItem(ot)
this.tracking.fireInteractionEvent(st.DISMISS[this.currentConvosFilter],"SHORT_PRESS")
const e=gt.beginAsync()
this.loadConversationsByFilter("").then((()=>{(0,_.isDestroying)(this)||document.querySelector(".msg-overlay-list-bubble__filters-btn").focus()})).finally((()=>{gt.endAsync(e)}))}impressionKindnessReminder(){this.tracking.firePageViewEvent("d_flagship3_messaging_overlay_kindness_banner")}clickKindnessReminder(){this.tracking.fireInteractionEvent("overlay.open_kindness_banner")
if(h.default){const e=this.kindnessReminderHelpCenterLink
if(!e)return
this.windowService.open(e,"_blank")}}onSearchTermChange(e){this.searchTerm=e}onKindnessReminderWidgetDismiss(){this.kindnessReminderShown=!0
this.tracking.fireInteractionEvent("overlay.dismiss_kindness_banner")}messageRequestListHeaderOnGoBack(){this.loadConversationsByFilter(it)
this.tracking.fireInteractionEvent("overlay.back_to_message_requests_from_declined_messages")}openBubbleByConversationUrn(e){const t=this.conversations.find((t=>t.entityUrn===e))
t&&this.args.openBubble(t)}setLoader(){this.showInboxLoader=!0;(0,m.runTask)(this,(()=>{this.showInboxLoader=!1}),500)}markAllAsRead(){this.msgDataManager.markAllConversationsAsRead().then((()=>{(0,_.isDestroying)(this)||this.clearFilters()})).catch((e=>{if((0,_.isDestroying)(this))throw e
const t=this.i18n.lookupTranslation("components/msg-cross-pillar@selected-filter-presenter","i18n_failed_to_mark_all_read")([])
this.persistentToastManager.error({message:t})
throw e}))}},ye=(0,i.default)(fe.prototype,"authenticatedUser",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=(0,i.default)(fe.prototype,"badging",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=(0,i.default)(fe.prototype,"lix",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=(0,i.default)(fe.prototype,"tracking",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=(0,i.default)(fe.prototype,"i18n",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=(0,i.default)(fe.prototype,"windowService",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=(0,i.default)(fe.prototype,"a11yNotification",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,i.default)(fe.prototype,"msgOverlayService",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=(0,i.default)(fe.prototype,"commonTime",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=(0,i.default)(fe.prototype,"storeShim",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=(0,i.default)(fe.prototype,"localStorage",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=(0,i.default)(fe.prototype,"legoResolver",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=(0,i.default)(fe.prototype,"legoTracking",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=(0,i.default)(fe.prototype,"msgUserSettings",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=(0,i.default)(fe.prototype,"msgDataManager",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=(0,i.default)(fe.prototype,"formatter",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=(0,i.default)(fe.prototype,"persistentToastManager",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=(0,i.default)(fe.prototype,"mailboxName",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Be=(0,i.default)(fe.prototype,"isHeaderDropdownMenuOpen",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=(0,i.default)(fe.prototype,"isMessagingSettingsModalOpen",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ze=(0,i.default)(fe.prototype,"inboxDataFetchInProgress",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Le=(0,i.default)(fe.prototype,"inboxDataLoaded",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),je=(0,i.default)(fe.prototype,"inboxDataFetchFailed",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ve=(0,i.default)(fe.prototype,"loadMoreError",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qe=(0,i.default)(fe.prototype,"loadMoreInProgress",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ye=(0,i.default)(fe.prototype,"numConnections",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=(0,i.default)(fe.prototype,"awayMessageSettingsModalIsOpen",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=(0,i.default)(fe.prototype,"selectedConversations",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),We=(0,i.default)(fe.prototype,"selectedConversationUrns",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ge=(0,i.default)(fe.prototype,"isBulkActionsMode",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=(0,i.default)(fe.prototype,"searchTerm",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=(0,i.default)(fe.prototype,"inboxType",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dt.PRIMARY}}),Qe=(0,i.default)(fe.prototype,"isInMinimizeTransition",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$e=(0,i.default)(fe.prototype,"showAwayMessageOnboarding",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ze=(0,i.default)(fe.prototype,"showInboxLoader",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=(0,i.default)(fe.prototype,"upsellCard",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=(0,i.default)(fe.prototype,"kindnessReminderShown",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=(0,i.default)(fe.prototype,"localConvosFilter",[d.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),(0,i.default)(fe.prototype,"switchInboxTab",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"switchInboxTab"),fe.prototype),(0,i.default)(fe.prototype,"refreshSettings",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"refreshSettings"),fe.prototype),(0,i.default)(fe.prototype,"loadConversationsByFilter",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"loadConversationsByFilter"),fe.prototype),(0,i.default)(fe.prototype,"refetchInboxData",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"refetchInboxData"),fe.prototype),(0,i.default)(fe.prototype,"loadMore",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"loadMore"),fe.prototype),(0,i.default)(fe.prototype,"newConversation",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"newConversation"),fe.prototype),(0,i.default)(fe.prototype,"retryLoadMore",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"retryLoadMore"),fe.prototype),(0,i.default)(fe.prototype,"stopEvtPropagation",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"stopEvtPropagation"),fe.prototype),(0,i.default)(fe.prototype,"toggleMinimize",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"toggleMinimize"),fe.prototype),(0,i.default)(fe.prototype,"openMessageRequestConversationList",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"openMessageRequestConversationList"),fe.prototype),(0,i.default)(fe.prototype,"backToInboxFromMessageRequestList",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"backToInboxFromMessageRequestList"),fe.prototype),(0,i.default)(fe.prototype,"openDeclinedMessageRequestConversationList",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"openDeclinedMessageRequestConversationList"),fe.prototype),(0,i.default)(fe.prototype,"openAwayMessageSettingsModal",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"openAwayMessageSettingsModal"),fe.prototype),(0,i.default)(fe.prototype,"openMessagingSettingsModal",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"openMessagingSettingsModal"),fe.prototype),(0,i.default)(fe.prototype,"onListBubbleItemClick",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"onListBubbleItemClick"),fe.prototype),(0,i.default)(fe.prototype,"enterBulkActionsMode",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"enterBulkActionsMode"),fe.prototype),(0,i.default)(fe.prototype,"onExitBulkActionsMode",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"onExitBulkActionsMode"),fe.prototype),(0,i.default)(fe.prototype,"willExecuteBulkAction",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"willExecuteBulkAction"),fe.prototype),(0,i.default)(fe.prototype,"didExecuteBulkAction",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"didExecuteBulkAction"),fe.prototype),(0,i.default)(fe.prototype,"applyFilter",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"applyFilter"),fe.prototype),(0,i.default)(fe.prototype,"clearFilters",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"clearFilters"),fe.prototype),(0,i.default)(fe.prototype,"impressionKindnessReminder",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"impressionKindnessReminder"),fe.prototype),(0,i.default)(fe.prototype,"clickKindnessReminder",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"clickKindnessReminder"),fe.prototype),(0,i.default)(fe.prototype,"onSearchTermChange",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"onSearchTermChange"),fe.prototype),(0,i.default)(fe.prototype,"onKindnessReminderWidgetDismiss",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"onKindnessReminderWidgetDismiss"),fe.prototype),(0,i.default)(fe.prototype,"messageRequestListHeaderOnGoBack",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"messageRequestListHeaderOnGoBack"),fe.prototype),(0,i.default)(fe.prototype,"openBubbleByConversationUrn",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"openBubbleByConversationUrn"),fe.prototype),(0,i.default)(fe.prototype,"setLoader",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"setLoader"),fe.prototype),(0,i.default)(fe.prototype,"markAllAsRead",[f.action],Object.getOwnPropertyDescriptor(fe.prototype,"markAllAsRead"),fe.prototype),fe))}))
define.alias("ember-media-player/components/media-player","msg-overlay/components/media-player")
define("msg-overlay/components/messaging-overlay-container",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/classPrivateMethodGet","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/component","@ember/template-factory","@ember/destroyable","@ember/array","@ember/object","@ember/service","@glimmer/component","@glimmer/tracking","ember","ember-lifeline","global-utils/utils/is-browser","msg-shared/helpers/is-message-request-conversation","msg-shared/utils/constants","msg-shared/utils/document-is-hidden","msg-data/utils/sdk-view-data-helpers","msg-shared/utils/view-data-helpers","rsvp","data-layer/utils/profile/get-profile","ember-test-waiters"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var k,S,O,I,P,x,E,R,A,T,N,U,B,F,z,L,j,V,q,Y,H,K,W,G,J,X,Q,$,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue
const de=(0,s.createTemplateFactory)({id:"z/0xVzAr",block:'[[[41,[30,0,["focusedMessagingMode"]],[[[1,"  "],[10,1],[14,0,"msg-overlay-container__dimmed-background"],[12],[13],[1,"\\n"]],[]],null],[11,"aside"],[24,1,"msg-overlay"],[16,0,[29,["msg-overlay-container msg-overlay-container-reflow\\n    ",[52,[30,0,["isMaximizedMode"]],"msg-overlay-container--full-screen"]]]],[4,[38,1],[[30,0,["onDidInsert"]]],null],[12],[1,"\\n  "],[8,[39,2],null,[["@filterFromDeeplink","@realtimeMsgNotAutoOpened","@newConversation","@openBubble","@afterInboxDataFetch"],[[30,0,["filterFromDeeplink"]],[30,0,["realtimeMsgNotAutoOpened"]],[30,0,["newConversation"]],[30,0,["openConversation"]],[30,0,["afterInboxDataFetch"]]]],null],[1,"\\n\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["msgOverlayManager","avBubbles"]]],null]],null],null,[[[41,[30,1,["isLiveBroadcast"]],[[[1,"      "],[8,[39,5],null,[["@bundle"],["rooms"]],[["default"],[[[[1,"\\n"],[41,[30,2,["state","fulfilled"]],[[[1,"          "],[8,[39,6],null,[["@bubble","@bubbleId","@closeBubble","@hideAudioBubbleAtMdBreakPoint","@isMinimized","@isMaximized","@toggleMinimize","@refreshPage"],[[30,1],[28,[37,7],[[30,0,["msgOverlayManager","avBubbleIds"]],[30,1]],null],[28,[37,8],[[30,0,["closeAVBubble"]],[30,1]],null],[30,0,["hideAudioBubbleAtMdBreakPoint"]],[30,0,["isAudioBubbleMinimized"]],[30,0,["isAVBubbleMaximized"]],[30,0,["toggleAudioBubbleMinimized"]],[28,[37,9],["refreshRoute"],null]]],null],[1,"\\n"]],[]],null],[1,"      "]],[2]]]]],[1,"\\n"]],[]],[[[1,"      "],[8,[39,10],null,[["@bubble","@bubbleId","@closeBubble","@hideAudioBubbleAtMdBreakPoint","@isMinimized","@toggleMinimize"],[[30,1],[28,[37,7],[[30,0,["msgOverlayManager","avBubbleIds"]],[30,1]],null],[28,[37,8],[[30,0,["closeAVBubble"]],[30,1]],null],[30,0,["hideAudioBubbleAtMdBreakPoint"]],[30,0,["isAudioBubbleMinimized"]],[30,0,["toggleAudioBubbleMinimized"]]]],null],[1,"\\n"]],[]]]],[1]],null],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["msgOverlayManager","openBubbles"]]],null]],null],null,[[[1,"    "],[8,[39,11],null,[["@bubble","@closeBubble","@handleSuccessfulDiscardRequest","@overlayLixes","@messageComposeFlowTrackingId"],[[30,3],[28,[37,8],[[30,0,["closeBubble"]],[30,3]],null],[30,0,["handleSuccessfulDiscardRequest"]],[30,0,["overlayLixes"]],[30,3,["entryPointData","messageComposeFlowTrackingId"]]]],null],[1,"\\n"]],[3]],null],[1,"\\n"],[1,"  "],[10,0],[14,1,"msg-overlay__emoji-hoverable-outlet"],[12],[13],[1,"\\n\\n  "],[10,0],[14,1,"msg-overlay__reactor-list-outlet"],[12],[13],[1,"\\n"],[13]],["bubble","assetLoader","bubble"],false,["if","did-insert","msg-overlay@list-bubble-feature","each","-track-array","asset-loader@deferred-asset-loader","rooms@av-bubble","global-helpers@map-get","fn","ember-route-action-helper@route-action","msg-overlay@audio-bubble","msg-overlay@conversation-bubble-feature"]]',moduleName:"msg-overlay/components/messaging-overlay-container.hbs",isStrictMode:!1}),{CONTROL_NAMES:{OVERLAY:pe}}=f.default,me=/^messaging/,ge=(0,D.buildWaiter)("msg-data:data-manager:refresh-convo-bundle")
let he=e.default=(k=(0,d.inject)("i18n"),S=(0,d.inject)("global-nav-shared@badge"),O=(0,d.inject)("router"),I=(0,d.inject)("tracking"),P=(0,d.inject)("msg-overlay-manager@msg-overlay-manager"),x=(0,d.inject)("msg-shared@first-message"),E=(0,d.inject)("msg-data@data-manager"),R=(0,d.inject)("msg-shared@component-context"),A=(0,d.inject)("msg-shared@messaging-user-settings"),T=(0,d.inject)("global-services@store-shim"),N=(0,d.inject)("lix"),U=(Q=new WeakSet,$=new WeakSet,Z=new WeakSet,ee=new WeakSet,te=new WeakSet,ne=new WeakSet,ie=new WeakSet,ae=new WeakSet,oe=new WeakSet,re=new WeakSet,se=new WeakSet,le=new WeakSet,ce=new WeakSet,ue=new WeakSet,class extends p.default{get isMessagingRoute(){var e
return null===(e=this.router.currentRouteName)||void 0===e?void 0:e.match(me)}get isMaximizedMode(){return this.msgOverlayManager.maximizedMode}get hideAudioBubbleAtMdBreakPoint(){return this.msgOverlayManager.hideAudioBubbleAtMdBreakPoint}get isAudioBubbleMinimized(){return this.msgOverlayManager.avBubbleIsMinimized}get isAVBubbleMaximized(){return this.msgOverlayManager.avBubbleIsMaximized}get isConversationPreviewEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.messaging-circles-pilot")}constructor(){var e,i
super(...arguments)
ue.add(this)
ce.add(this)
le.add(this)
se.add(this)
re.add(this)
oe.add(this)
ae.add(this)
ie.add(this)
ne.add(this)
te.add(this)
ee.add(this)
Z.add(this)
$.add(this)
Q.add(this);(0,n.default)(this,"rumComponentId","msg-overlay");(0,n.default)(this,"overlayLixes",{});(0,t.default)(this,"i18n",B,this);(0,t.default)(this,"badgeService",F,this);(0,t.default)(this,"router",z,this);(0,t.default)(this,"tracking",L,this);(0,t.default)(this,"msgOverlayManager",j,this);(0,t.default)(this,"firstMessage",V,this);(0,t.default)(this,"msgDataManager",q,this);(0,t.default)(this,"msgComponentContextService",Y,this);(0,t.default)(this,"msgUserSettings",H,this);(0,t.default)(this,"storeShim",K,this);(0,t.default)(this,"lix",W,this);(0,t.default)(this,"filterFromDeeplink",G,this);(0,t.default)(this,"focusedMessagingMode",J,this);(0,t.default)(this,"realtimeMsgNotAutoOpened",X,this)
this.msgComponentContextService.setTo("overlay")
const a=null===(e=this.router)||void 0===e||null===(i=e.currentRoute)||void 0===i?void 0:i.queryParams
this.filterFromDeeplink=null==a?void 0:a.msgFilter}willDestroy(){super.willDestroy(...arguments)
this.msgOverlayManager.off("newConversation",this,this.newConversation)}afterInboxDataFetch(e){if(!(0,l.isDestroying)(this)){this.conversationDataFetched=!0
if(this.shouldOpenMostRecentConversation){e.length&&(0,i.default)(this,Z,fe).call(this,e[0])
this.shouldOpenMostRecentConversation=!1}}}async _chainedSync(){const e=await this.msgDataManager.getMailbox()
if((0,l.isDestroying)(this))return
if(e.state.status.loading)return(0,M.resolve)()
const t=ge.beginAsync()
return e.syncConversationsAPI({pageInstance:this.tracking.getCurrentPageInstance()}).finally((()=>{ge.endAsync(t)}))}async onDidInsert(){var e,t;(0,i.default)(this,ue,Pe).call(this);(0,i.default)(this,ee,ye).call(this)
this.msgOverlayManager.setUnseenConvoCountFromBadge()
this.msgOverlayManager.setOverlayHasLoaded()
await this.msgUserSettings.syncUserSettings()
if((0,l.isDestroying)(this))return
const n=null===(e=this.router)||void 0===e||null===(t=e.currentRoute)||void 0===t?void 0:t.queryParams
"true"===(null==n?void 0:n.msgOverlay)?(0,i.default)(this,Q,be).call(this,n):await this.msgOverlayManager.restoreCachedOverlayData(this.msgUserSettings.messagingOverlayPopups)}openConversation(e){this.realtimeMsgNotAutoOpened=!1
const t=(0,_.isInMailConversation)(e),n={conversation:e,isInMail:t,isMinimized:!1,focusInputOnInit:!0},a=this.msgOverlayManager.getOpenBubbleFromConversation(e)
if(a)this.msgOverlayManager.unminimizeAndReadConversation(a)
else{const a=e.groupChat||t
n.isJumbo=this.msgDataManager.isExpandBubbleEnabled||a;(0,i.default)(this,ce,Ie).call(this,n)}t&&this.tracking.fireInteractionEvent(pe.OPEN_INMAIL)}async newConversation(){let{composeOptionType:e,contextualTrackingInfo:t,attachments:n=[],forwardedEvent:a,groupConversationName:o,inMailComposeViewContext:r,invitationUrn:s,is1on1Compose:u=!1,isInMailCompose:d=!1,isJumbo:p=this.msgDataManager.isExpandBubbleEnabled,isConversationPreview:m=!1,entryPointData:g,message:h="",messageActions:b={},messageContext:v,messageRecipients:f=[],recipients:y,msgAdapterOptions:_,placeholderText:M,previewKey:C="",showGroupEditScreen:D,isDeprecatedLinkToJoin:k=!1,smpContent:S=null,subject:O="",update:I=null,dispatcherEntryPointArgs:P,focusInputInit:x}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=y??f;(0,c.isArray)(E)||(E=[E])
const R=this.msgOverlayManager.getOpenBubbleByRecipients(E)
if(R){if(!h)return
this.closeBubble(R)}const A=!s&&d,T=p||A,N=await this.msgDataManager.getMailbox()
if((0,l.isDestroying)(this))return
const U=await N.createDraftConversation(E.map((e=>(0,w.getProfileDashUrn)(e))));(0,l.isDestroying)(this)||(0,i.default)(this,ce,Ie).call(this,{attachments:n,composeOptionType:e,contextualTrackingInfo:t,conversationId:U.entityUrn??U.clientId,conversation:U,entryPointData:g,focusInputOnInit:!0,focusInputInit:x,forwardedEvent:a,groupConversationName:o,hasUnseenMessages:!1,inMailComposeViewContext:r,invitationUrn:s,is1on1Compose:u,isInMailCompose:A,isJumbo:T,isMinimized:!1,isNew:!0,isConversationPreview:m,message:h,messageActions:b,messageContext:v,messageRecipients:E,msgAdapterOptions:_,placeholderText:M,previewKey:C,showGroupEditScreen:D,isDeprecatedLinkToJoin:k,smpContent:S,subject:O,update:I,dispatcherEntryPointArgs:P})}handleSuccessfulDiscardRequest(e){(0,i.default)(this,re,ke).call(this,e)}closeBubble(e){this.focusedMessagingMode=!1
const{clientId:t}=e.conversation;(0,i.default)(this,se,Se).call(this,t)}closeAVBubble(e){this.msgOverlayManager.closeAVBubble(e)}toggleAudioBubbleMinimized(){this.msgOverlayManager.toggleAudioBubbleMinimized()}}),B=(0,a.default)(U.prototype,"i18n",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,a.default)(U.prototype,"badgeService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,a.default)(U.prototype,"router",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.default)(U.prototype,"tracking",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,a.default)(U.prototype,"msgOverlayManager",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,a.default)(U.prototype,"firstMessage",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,a.default)(U.prototype,"msgDataManager",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=(0,a.default)(U.prototype,"msgComponentContextService",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=(0,a.default)(U.prototype,"msgUserSettings",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=(0,a.default)(U.prototype,"storeShim",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=(0,a.default)(U.prototype,"lix",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,a.default)(U.prototype,"filterFromDeeplink",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,a.default)(U.prototype,"focusedMessagingMode",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,a.default)(U.prototype,"realtimeMsgNotAutoOpened",[m.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(U.prototype,"afterInboxDataFetch",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"afterInboxDataFetch"),U.prototype),(0,a.default)(U.prototype,"onDidInsert",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"onDidInsert"),U.prototype),(0,a.default)(U.prototype,"openConversation",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"openConversation"),U.prototype),(0,a.default)(U.prototype,"newConversation",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"newConversation"),U.prototype),(0,a.default)(U.prototype,"handleSuccessfulDiscardRequest",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"handleSuccessfulDiscardRequest"),U.prototype),(0,a.default)(U.prototype,"closeBubble",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"closeBubble"),U.prototype),(0,a.default)(U.prototype,"closeAVBubble",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"closeAVBubble"),U.prototype),(0,a.default)(U.prototype,"toggleAudioBubbleMinimized",[u.action],Object.getOwnPropertyDescriptor(U.prototype,"toggleAudioBubbleMinimized"),U.prototype),U)
async function be(e){const{chatId:t,body:n,msgConversationId:a,msgRecipientId:o,msgCompose:r,msgRecent:s,msgControlName:c}=e
if(this.msgDataManager.dispatcherFetchInitialDataForOverlay)if(t)(0,i.default)(this,$,ve).call(this,{previewKey:t,focusMode:!0})
else{if(!s){const e=[]
o&&e.push(`urn:li:fsd_profile:${o}`)
const t={dispatcherEntryPointArgs:{courierAPIArgs:{composeOptionArgs:{recipientUrns:e}},client:{trackingData:{controlUrn:"email_deeplink"},senderContext:{ui:{isMinimized:!1,isJumbo:!0,message:n,conversationUrn:a}}}}}
this.msgOverlayManager.createConversationBubbleV2(t)
return}this.shouldOpenMostRecentConversation=!0}if("true"===r){let e,t
if(o){e=await(0,C.getProfileById)(this.storeShim,o,"com.linkedin.voyager.dash.deco.identity.profile.MiniProfile")
if((0,l.isDestroying)(this))return}this.newConversation({isMinimized:!1,isJumbo:!0,isNew:!0,message:n,msgAdapterOptions:t,messageRecipients:e?[e]:void 0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this.focusedMessagingMode=!0}else if(a){const e=await this.msgDataManager.fetchConversation(a)
if((0,l.isDestroying)(this)||!e)return;(0,i.default)(this,Z,fe).call(this,e,c)}else t?(0,i.default)(this,$,ve).call(this,{previewKey:t,focusMode:!0}):s&&(this.shouldOpenMostRecentConversation=!0)}function ve(e){let{previewKey:t,focusMode:n=!1}=e
if(this.isConversationPreviewEnabled)if(this.msgDataManager.dispatcherFetchInitialDataForOverlay){const e={isConversationPreview:!0,dispatcherEntryPointArgs:{client:{trackingData:{controlUrn:"request-feedback-modal"},senderContext:{ui:{}}}}}
this.msgOverlayManager.createConversationBubbleV2(e)}else this.newConversation({previewKey:t,isConversationPreview:!0,isMinimized:!1,isJumbo:!0,focusInputOnInit:!0})
else if(this.msgDataManager.dispatcherFetchInitialDataForOverlay){const e={isDeprecatedLinkToJoin:!0,dispatcherEntryPointArgs:{client:{trackingData:{controlUrn:"request-feedback-modal"},senderContext:{ui:{}}}}}
this.msgOverlayManager.createConversationBubbleV2(e)}else this.newConversation({previewKey:t,isDeprecatedLinkToJoin:!0,isMinimized:!1,isJumbo:!0,focusInputOnInit:!0})
this.focusedMessagingMode=n}function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,i.default)(this,ce,Ie).call(this,{conversation:e,inmailReplyDeepLink:t,isMinimized:!1,isJumbo:!0,hasUnseenMessages:!e.read,focusInputOnInit:!0})
this.msgOverlayManager.updateListBubbleMinimizeState(!1)
this.focusedMessagingMode=!0}function ye(){var e=this
if(b.default){(0,h.addEventListener)(this,window,"blur",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,ie,Me).call(e,...n)}));(0,h.addEventListener)(this,document,"click",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,te,_e).call(e,...n)}));(0,h.addEventListener)(this,window,"visibilitychange",(function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a]
return(0,i.default)(e,ae,Ce).call(e,...n)}))
this.msgOverlayManager.on("newConversation",this,this.newConversation)
this.msgOverlayManager.on("conversationPreview",this,(0,i.default)(this,$,ve))
this.msgDataManager.onNewMessageInConversation((function(){if(!(0,l.isDestroying)(e)){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(0,i.default)(e,oe,De).call(e,...n)}}))
this.msgDataManager.onConversationDeleted((function(){if(!(0,l.isDestroying)(e)){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];(0,i.default)(e,re,ke).call(e,...n)}}))}}function _e(e){let{target:t}=e
t.classList&&t.classList.contains("msg-overlay-container__dimmed-background")&&(this.focusedMessagingMode=!1)}function we(){if(b.default){const e=document.activeElement&&document.activeElement.classList
return e&&e.contains("msg-messaging-form__message")}return!1}function Me(){(0,i.default)(this,ne,we).call(this)&&document.activeElement.blur()}function Ce(){(0,y.default)()?(0,i.default)(this,ne,we).call(this)&&document.activeElement.blur():(0,h.throttleTask)(this,"_chainedSync",g.default.testing?1e3:18e5)}function De(e){const t=this.msgDataManager.getTrackedConversation(e.entityUrn)
this.msgDataManager.updateTrackedConversationState(e,t)
if((0,i.default)(this,le,Oe).call(this,t))return
this.msgOverlayManager.playSound()
const n=b.default&&document.hasFocus()&&!(0,y.default)()
n||this.msgOverlayManager.updateDocumentTitle(t)
if(this.msgDataManager.dispatcherFetchInitialDataForOverlay){const e={dispatcherEntryPointArgs:{client:{trackingData:{controlUrn:"auto_open_onrealtime"},senderContext:{ui:{isMinimized:!this.msgUserSettings.messagingOverlayPopups,isTriggeredByRealtime:!0,focusInputOnInit:!1,hasUnseenMessages:!0,conversationUrn:t.entityUrn}}}}},i=this.msgOverlayManager.findExistingConversationBubble(e)
if(i){const e=i.isActive&&!i.isMinimized&&n
if(!this.isMessagingRoute&&!e){this.badgeService.incrementBadge("messaging")
this.msgOverlayManager.setUnseenConvoCountFromBadge()}(0,u.set)(i,"hasUnseenMessages",!e)
e&&this.msgOverlayManager.markConversationAsRead(i)}else this.msgOverlayManager.createConversationBubbleV2(e)}else{const e=this.msgOverlayManager.getOpenBubbleFromConversation(t),a=e&&e.isActive&&!e.isMinimized&&n
if(!this.isMessagingRoute&&!a){this.badgeService.incrementBadge("messaging")
this.msgOverlayManager.setUnseenConvoCountFromBadge()}if(e){(0,u.set)(e,"hasUnseenMessages",!a)
a&&this.msgOverlayManager.markConversationAsRead(e)}else if(!this.isMessagingRoute&&!(0,v.isMessageRequestConversation)(t)){const e=(0,_.isInMailConversation)(t);(0,i.default)(this,ce,Ie).call(this,{conversation:t,focusInputOnInit:!1,hasUnseenMessages:!0,isJumbo:t.groupChat||e,isMinimized:!this.msgUserSettings.messagingOverlayPopups,isTriggeredByRealtime:!0})}}}function ke(e){this.msgOverlayManager.closeBubbleByConversationUrnOrBubbleId(e)
this.msgOverlayManager.syncCachedConvos()}function Se(e){this.msgOverlayManager.closeBubbleByConversationclientId(e)
this.msgOverlayManager.syncCachedConvos()}function Oe(e){return 0===e.unreadCount||"MUTE"===e.notificationStatus}async function Ie(e){const t=await this.msgOverlayManager.createConversationBubble(e)
if(!(0,l.isDestroying)(this)){!t&&e.isTriggeredByRealtime&&(this.realtimeMsgNotAutoOpened=!0)
return t}}function Pe(){const{i18n:e,firstMessage:t}=this,{inviter:n}=t.getMessageInfo()||{}
if(n)if(this.msgDataManager.dispatcherFetchInitialDataForOverlay){const t={dispatcherEntryPointArgs:{courierAPIArgs:{recipientUrns:[n.entityUrn]},client:{trackingData:{controlUrn:"first_message"},senderContext:{ui:{initialBody:e.lookupTranslation("components/msg-overlay@messaging-overlay-container","i18n_first_message_prompt_doing_well")()}}}}}
this.msgOverlayManager.createConversationBubbleV2(t)}else this.newConversation({messageRecipients:n,message:e.lookupTranslation("components/msg-overlay@messaging-overlay-container","i18n_first_message_prompt_doing_well")()})}(0,r.setComponentTemplate)(de,he)}))
define("msg-overlay/components/overlay-conversation-list-feature",["exports","@ember/template-factory","@ember/component/template-only","@ember/component","global-helpers/helpers/and","global-helpers/helpers/eq","global-helpers/helpers/not","msg-ui/components/no-messages-presenter","ember-cli-pemberly-i18n/helpers/t","artdeco-button/components/artdeco-button","message-button/components/entry-point","msg-spinmail/components/conversation-starter-ad-presenter","msg-overlay/components/overlay-conversation-list-item-feature","msg-data/utils/sdk-view-data-helpers","msg-ui/components/loader","@ember/helper","@ember/modifier","global-helpers/helpers/or"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const f=(0,i.setComponentTemplate)((0,t.createTemplateFactory)({id:"+iE7FBQ+",block:'[[[1,"\\n"],[1,"  "],[10,0],[14,0,"msg-overlay-list-bubble__conversations-list"],[12],[1,"\\n"],[41,[28,[32,0],[[28,[32,1],[[30,1,["length"]],0],null],[28,[32,2],[[30,2]],null]],null],[[[41,[30,3],[[[1,"        "],[8,[32,3],null,[["@isOverlay","@useEntryPoint","@newConversation"],[true,[30,4],[30,5]]],null],[1,"\\n"]],[]],[[[1,"        "],[10,0],[12],[1,"\\n          "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble__no-results-image"],[12],[13],[1,"\\n"],[41,[28,[32,1],[[30,6],"CONNECTIONS"],null],[[[1,"            "],[10,"h4"],[14,0,"t-16 t-black t-bold ph text-align-center ph6"],[12],[1,"\\n              "],[1,[28,[32,4],["i18n_no_messages_from_connections","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"          "],[10,2],[14,0,"text-align-center mb4"],[12],[1,"\\n"],[41,[28,[32,1],[[30,6],"BLOCKED"],null],[[[1,"              "],[1,[28,[32,4],["i18n_no_spam_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[32,1],[[30,6],"UNREAD"],null],[[[1,"              "],[1,[28,[32,4],["i18n_no_unread_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[32,1],[[30,6],"INMAIL"],null],[[[1,"              "],[1,[28,[32,4],["i18n_no_inmail_messages","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[32,1],[[30,6],"MESSAGE_REQUEST_PENDING"],null],[[[1,"              "],[1,[28,[32,4],["i18n_no_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[32,1],[[30,6],"MESSAGE_REQUEST_DECLINED"],null],[[[1,"              "],[1,[28,[32,4],["i18n_no_declined_message_request","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[41,[28,[32,1],[[30,6],"CONNECTIONS"],null],[[[1,"              "],[1,[28,[32,4],["i18n_reach_out_message","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n"]],[]],[[[1,"              "],[1,[28,[32,4],["i18n_no_results_found","msg-overlay/components/overlay-conversation-list-feature"],null]],[1,"\\n            "]],[]]]],[]]]],[]]]],[]]]],[]]]],[]]],[1,"          "],[13],[1,"\\n"],[41,[28,[32,1],[[30,6],"CONNECTIONS"],null],[[[1,"            "],[10,0],[14,0,"full-width display-flex justify-center"],[12],[1,"\\n              "],[8,[32,5],[[24,0,"ph0"],[4,[32,6],["click",[30,5]],null]],[["@text","@type"],[[28,[32,4],["i18n_create_new_message","msg-overlay/components/overlay-conversation-list-feature"],null],"tertiary"]],null],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"        "],[13],[1,"\\n"]],[]]]],[]],[[[42,[28,[31,2],[[28,[31,2],[[30,1]],null]],null],"@index",[[[41,[30,7,["isConversationStarterAdPreview"]],[[[1,"          "],[8,[32,7],null,[["@component","@index","@isOverlay"],[[30,7],[30,8],true]],null],[1,"\\n"]],[]],[[[41,[28,[32,8],[[30,4],[30,7,["isDraft"]]],null],[[[44,[[28,[32,9],[[30,7,["decoratedParticipants"]],[30,9]],null]],[[[1,"              "],[8,[32,10],null,[["@controlUrn","@referringModuleKey","@recipientUrns","@existingConversationUrn","@target"],["msg-overlay-inbox-item","messaging:overlay-inbox-conversation",[30,10],[52,[30,7,["isDraft"]],[27],[30,7,["entityUrn"]]],"OVERLAY"]],[["default"],[[[[1,"\\n                "],[8,[32,11],[[24,"data-feedback-redacted",""]],[["@conversation","@currentConvosFilter","@convoIndex","@openBubble","@disableBulkActions","@isBulkActionsMode","@handleBulkActionToggle","@selectedConversationUrns","@conversationLength"],[[30,7],[30,6],[30,8],[30,11],[30,12],[30,13],[28,[32,12],[[30,14],[30,7,["entityUrn"]]],null],[30,15],[30,16]]],null],[1,"\\n              "]],[11]]]]],[1,"\\n"]],[10]]]],[]],[[[1,"            "],[8,[32,11],[[24,"data-feedback-redacted",""]],[["@conversation","@currentConvosFilter","@convoIndex","@openBubble","@disableBulkActions","@isBulkActionsMode","@handleBulkActionToggle","@selectedConversationUrns","@conversationLength"],[[30,7],[30,6],[30,8],[30,17],[30,12],[30,13],[28,[32,12],[[30,14],[30,7,["entityUrn"]]],null],[30,15],[30,16]]],null],[1,"\\n"]],[]]]],[]]]],[7,8]],null]],[]]],[1,"  "],[13],[1,"\\n\\n"],[41,[30,2],[[[1,"    "],[8,[32,13],[[24,0,"full-height justify-center"]],[["@size"],["small"]],null],[1,"\\n"]],[]],null]],["@conversations","@showLoadingState","@showNoMessagesPresenter","@useEntryPoint","@newConversation","@currentConvosFilter","conversation","index","@authenticatedUserMiniProfile","recipientUrns","openMessaging","@disableBulkActions","@isBulkActionsMode","@onBulkActionToggle","@selectedConversationUrns","@conversationLength","@openBubble"],false,["if","each","-track-array","let"]]',moduleName:"msg-overlay/components/overlay-conversation-list-feature.gjs",scope:()=>[a.default,o.default,r.default,s.default,l.default,c.default,b.on,d.default,v.default,m.getNonSelfParticipantsUrns,u.default,p.default,h.fn,g.default],isStrictMode:!0}),(0,n.default)("overlay-conversation-list-feature","OverlayConversationListFeature"))
e.default=f}))
define("msg-overlay/components/overlay-conversation-list-item-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/component","msg-ui/viewdata/sdk-conversation-list-item-viewdata","@ember/object/internals","ember-cli-pemberly-tracking/utils/tracking","msg-shared/utils/constants","@ember/service","tracked-toolbox","@ember/object","@glimmer/component","@ember/modifier","ember-cli-pemberly-tracking/modifiers/track-impression","msg-ui/components/selectable-entity-presenter","hue-web-icons/components/icon","ember-cli-pemberly-i18n/helpers/t","msg-shared-modals/components/conversation-header-dropdown-menu-presenter","text-view-model/helpers/text-view-model","global-helpers/helpers/or","msg-shared/helpers/is-in-overlay","artdeco-notification-badge/components/artdeco-notification-badge","@ember/helper","global-helpers/helpers/and","global-helpers/helpers/not"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D,k,S,O){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var I,P,x,E,R,A,T,N,U,B,F,z,L,j,V
const{CONTROL_NAMES:q,IMPRESSION_KEYS:{CONVERSATION:Y},MODULE_KEYS:{OVERLAY_CONVERSATION_LIST:H},KEYCODES:{ENTER:K,SPACEBAR:W}}=u.default
e.default=(0,r.setComponentTemplate)((0,o.createTemplateFactory)({id:"jmL4xVXi",block:'[[[1,"\\n"],[1,"    "],[11,0],[16,0,[29,["msg-conversation-listitem__link\\n        ",[52,[30,0,["msgDataManager","isUnreadBackgroundsEnabled"]],"msg-overlay-list-bubble__convo-item--v2","msg-overlay-list-bubble__convo-item"]]]],[24,"tabindex","0"],[16,1,[30,0,["conversationCardId"]]],[17,1],[4,[32,0],["click",[30,0,["onClick"]]],null],[4,[32,0],["keydown",[30,0,["onKeyDown"]]],null],[4,[32,0],["mousemove",[30,0,["onMouseMove"]]],null],[4,[32,1],[[30,0,["impressionEventPayload"]]],[["routeName","currentRoute"],[[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n      "],[10,0],[15,0,[29,[[52,[30,0,["msgDataManager","isUnreadBackgroundsEnabled"]],"msg-overlay-list-bubble__convo-card-container--v2","msg-overlay-list-bubble__convo-card-container"],"\\n          ",[52,[28,[32,3],[[30,0,["msgDataManager","isUnreadBackgroundsEnabled"]],[28,[32,4],[[30,0,["viewData","isRead"]]],null]],null],"msg-overlay-list-bubble__convo-card-container--v2-unread"]]]],[12],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card display-flex"],[12],[1,"\\n          "],[8,[32,5],null,[["@viewData","@onCheckboxClick","@checkboxOnly","@checked","@disableBulkActions","@entitySize","@iconSize","@title"],[[30,0,["viewData","conversationEntityViewData"]],[30,0,["handleCheckboxClick"]],[30,2],[30,0,["isChecked"]],[30,3],3,"small",[30,0,["viewData","title"]]]],null],[1,"\\n\\n          "],[10,0],[14,0,"overflow-hidden pl2 msg-overlay-list-bubble__convo-card-content"],[12],[1,"\\n"],[1,"            "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper fl"],[12],[1,"\\n              "],[10,0],[14,0,"msg-conversation-card__row align-items-center display-flex"],[12],[1,"\\n                "],[10,"h3"],[15,0,[29,["msg-conversation-listitem__participant-names msg-conversation-card__participant-names truncate t-14 t-black\\n                    ",[52,[30,0,["viewData","isRead"]],"t-normal","t-bold"]]]],[12],[1,"\\n                  "],[1,[30,0,["viewData","title"]]],[1,"\\n                "],[13],[1,"\\n                "],[10,0],[15,0,[29,["msg-conversation-card__mute-icon-holder\\n                    ",[52,[30,0,["showInboxShortcutsButton"]],"msg-conversation-card__mute-icon-holder--inbox-shortcuts"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","isMute"]],[[[1,"                    "],[10,0],[14,0,"msg-conversation-card__mute-icon"],[12],[1,"\\n                      "],[8,[32,6],[[24,0,"v-align-top"]],[["@a11yText","@name","@type","@size"],[[28,[32,7],["i18n_convo_is_muted","msg-overlay/components/overlay-conversation-list-item-feature"],[["names"],[[30,0,["viewData","title"]]]]],"volume-mute","system","medium"]],null],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n"],[41,[30,0,["viewData","timestampText"]],[[[1,"                  "],[10,"time"],[15,0,[29,["msg-overlay-list-bubble-item__time-stamp t-12\\n                      ",[52,[30,0,["showInboxShortcutsButton"]],"msg-overlay-list-bubble-item__time-stamp--inbox-shortcuts"],"\\n                      ",[52,[30,0,["viewData","isRead"]],"t-normal t-black--light","t-bold t-black"]]]],[12],[1,"\\n                    "],[1,[30,0,["viewData","timestampText"]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[41,[30,0,["showInboxShortcutsButton"]],[[[1,"                  "],[10,0],[14,0,"msg-overlay-list-bubble__inbox-shortcuts-container"],[12],[1,"\\n                    "],[10,0],[14,0,"msg-overlay-list-bubble__inbox-shortcuts"],[12],[1,"\\n                      "],[8,[32,8],null,[["@viewData","@showRenameConversationForm","@toggleConversationMute","@isInboxShortcuts","@isOverlay","@actionTrackingPrefix","@parentRefocusElement"],[[30,0,["viewData","conversationHeaderDropdownMenuViewData"]],[30,0,["handleDropdownRenameForm"]],[30,0,["toggleConversationMute"]],true,true,[30,0,["actionTrackingPrefix"]],[28,[32,9],["#",[30,0,["conversationCardId"]]],null]]],null],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n\\n              "],[10,0],[14,0,"msg-conversation-card__row justify-space-between"],[12],[1,"\\n                "],[10,0],[15,0,[52,[30,0,["twoLineMessageSnippetLayout"]],"msg-overlay-list-bubble__message-snippet-container--narrow-two-line","truncate"]],[12],[1,"\\n"],[41,[30,0,["viewData","showMessageRequestContext"]],[[[1,"                    "],[10,2],[14,0,"display-flex align-items-center overflow-hidden t-12 t-bold"],[12],[1,"\\n                      "],[10,1],[14,0,"truncate flex-1"],[12],[1,"\\n                        "],[1,[28,[32,10],[[30,0,["viewData","messageRequestContext"]]],null]],[1,"\\n                      "],[13],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                  "],[10,2],[15,0,[29,[[52,[28,[32,11],[[30,0,["viewData","showMessageRequestContext"]],[30,0,["viewData","nudgeText"]]],null],"msg-overlay-list-bubble__message-snippet truncate","msg-overlay-list-bubble__message-snippet--v2"],"\\n                      ",[52,[30,0,["viewData","isStarred"]],"msg-overlay-list-bubble__message-snippet--starred"],"\\n                      m0 t-12\\n                      ",[52,[30,0,["viewData","isRead"]],"t-black--light","t-black msg-overlay-list-bubble__message-snippet--unread"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","messageSnippetIcon"]],[[[1,"                      "],[8,[32,6],[[24,0,"msg-conversation-card__message-snippet-icon"]],[["@name","@type","@size"],[[30,0,["viewData","messageSnippetIcon"]],"system","small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["viewData","messageSnippetPillText"]],[[[1,"                      "],[10,1],[15,0,[29,["msg-conversation-card__pill t-14\\n                          ",[52,[51,[30,0,["shouldDisplayGrayMessageSnippetPillText"]]]," t-black "],"\\n                          t-bold pr1"]]],[12],[1,"\\n                        "],[1,[30,0,["viewData","messageSnippetPillText"]]],[1,"\\n                      "],[13],[1,"\\n"]],[]],null],[41,[30,0,["viewData","isConversationWithNonEmptyDraftMessage"]],[[[1,"                      "],[10,"i"],[12],[1,[30,0,["viewData","messageSnippetText"]]],[13],[1,"\\n"]],[]],[[[1,"                      "],[1,[30,0,["viewData","messageSnippetText"]]],[1,"\\n"]],[]]],[1,"                  "],[13],[1,"\\n"],[41,[30,0,["viewData","nudgeText"]],[[[1,"                    "],[11,2],[16,0,[29,[[52,[28,[32,12],null,null],"msg-conversation-card__nudge-text--small","msg-conversation-card__nudge-text--large"],"\\n                        msg-conversation-card__nudge-text"]]],[4,[32,1],null,[["registerOnImpression","routeName","currentRoute"],[[30,0,["onNudgeImpression"]],[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                      "],[1,[30,0,["viewData","nudgeText"]]],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n                "],[10,0],[14,0,"display-flex"],[12],[1,"\\n                  "],[10,0],[15,0,[29,["msg-conversation-card__conversation-status msg-conversation-card__star-icon\\n                      ",[52,[30,0,["viewData","isStarred"]],"msg-conversation-card__star-icon--starred"]]]],[12],[1,"\\n"],[41,[30,0,["viewData","isStarred"]],[[[1,"                      "],[10,1],[14,0,"visually-hidden"],[12],[1,"\\n                        "],[1,[28,[32,7],["i18n_starred_conversation","msg-overlay/components/overlay-conversation-list-item-feature"],null]],[1,"\\n                      "],[13],[1,"\\n                      "],[8,[32,6],null,[["@name","@type","@size"],["star-fill","system","small"]],null],[1,"\\n"]],[]],null],[1,"                  "],[13],[1,"\\n"],[41,[51,[30,0,["viewData","isRead"]]],[[[1,"                    "],[10,0],[14,0,"msg-conversation-card__conversation-status align-items-center flex-grow-1"],[12],[1,"\\n                      "],[8,[32,13],[[24,0,"msg-conversation-card__unread-count msg-conversation-card__unread-count--inbox-shortcuts artdeco-notification-badge--new text-align-center"],[16,"aria-label",[52,[30,0,["viewData","isRead"]],"",[28,[32,7],["aria_unread_count","msg-overlay/components/overlay-conversation-list-item-feature"],[["unreadCount"],[[30,0,["viewData","conversationUnreadCount"]]]]]]]],[["@number","@showCount"],[[30,0,["viewData","conversationUnreadCount"]],true]],[["default"],[[[[1,"\\n"],[1,"                      "]],[]]]]],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["&attrs","@isBulkActionsMode","@disableBulkActions"],false,["if","-get-dynamic-var","unless"]]',moduleName:"msg-overlay/components/overlay-conversation-list-item-feature.gjs",scope:()=>[h.on,b.default,k.get,S.default,O.default,v.default,f.default,y.default,_.default,k.concat,w.default,M.default,C.default,D.default],isStrictMode:!0}),(I=(0,d.inject)("authentication@authenticated-user"),P=(0,d.inject)("formatter"),x=(0,d.inject)("i18n"),E=(0,d.inject)("msg-data@data-manager"),R=(0,d.inject)("date"),A=(0,d.inject)("presence@presence-api-dash"),T=(0,d.inject)("tracking"),N=class extends g.default{constructor(){super(...arguments);(0,n.default)(this,"conversationCardId",`overlay-conversation-card-${(0,l.guidFor)(this)}`);(0,t.default)(this,"authenticatedUser",U,this);(0,t.default)(this,"formatter",B,this);(0,t.default)(this,"i18n",F,this);(0,t.default)(this,"msgDataManager",z,this);(0,t.default)(this,"dateService",L,this);(0,t.default)(this,"presenceAPI",j,this);(0,t.default)(this,"tracking",V,this);(0,n.default)(this,"actionTrackingPrefix",q.OVERLAY_PREFIX)}get controlInteractionEventName(){return`overlay.${this.viewData.controlName}`}get isChecked(){var e
return null===(e=this.args.selectedConversationUrns)||void 0===e?void 0:e.includes(this.viewData.entityUrn)}get showInboxShortcutsButton(){return!this.args.isBulkActionsMode&&!this.args.isOverlaySearch}get twoLineMessageSnippetLayout(){return!this.viewData.messageRequestContext}get shouldDisplayGrayMessageSnippetPillText(){return this.viewData.isConversationWithAdvertiser}get viewData(){const{conversation:e,currentConvosFilter:t}=this.args
return new s.default({conversation:this.msgDataManager.getTrackedConversation(e.entityUrn),currentConvosFilter:t,authenticatedUserMiniProfile:this.authenticatedUser.miniProfile.content,msgDataManager:this.msgDataManager,nowTimestamp:this.dateService.now(),formatter:this.formatter,i18n:this.i18n,presenceAPI:this.presenceAPI})}onKeyDown(e){if(e.keyCode===K||e.keyCode===W){if(null!==e.target.closest(".msg-overlay-list-bubble__inbox-shortcuts"))return
e.preventDefault()
if(document.getElementById(this.conversationCardId).querySelector(".msg-selectable-entity__input")===document.activeElement)return
if(this.args.isBulkActionsMode)this.args.handleBulkActionToggle()
else{this.args.openBubble(this.viewData.entityUrn)
this.tracking.fireInteractionEvent(this.controlInteractionEventName)}}}onMouseMove(e){var t,n
null===(t=(n=this.args).onMouseMove)||void 0===t||t.call(n,e)}onClick(e){if(this.args.isBulkActionsMode)this.args.handleBulkActionToggle()
else{if(null!==e.target.closest(".msg-overlay-list-bubble__inbox-shortcuts"))return
this.args.openBubble(this.viewData.entityUrn)
this.tracking.fireInteractionEvent(this.controlInteractionEventName)
this.msgDataManager.nudgingDataManager.fireClickTracking(this.viewData.entityUrn)}}toggleStarState(e){if(e.keyCode===K||e.keyCode===W||"click"===e.type){e.stopPropagation()
e.preventDefault()
const{entityUrn:t,isStarred:n}=this.viewData
this.msgDataManager.toggleConversationStar(t,!n)
const i=document.getElementById(this.conversationCardId).querySelector(".msg-overlay-list-bubble__star-icon")
null==i||i.blur()}}toggleConversationMute(){const{entityUrn:e,isMute:t}=this.viewData
return this.msgDataManager.toggleConversationMute(e,!t)}handleDropdownRenameForm(e){e.stopPropagation()
e.preventDefault()}onNudgeImpression(){const{convoIndex:e}=this.args,{entityUrn:t,conversationBackendUrn:n}=this.viewData
return()=>this.msgDataManager.nudgingDataManager.onImpression(t,n,e+1,"overlay-conversation-list-item")}impressionEventPayload(){if(this.isDestroying||this.isDestroyed)return[]
const{conversationBackendUrn:e,participantPresenceStatuses:t}=this.viewData
return t.length?{name:Y,body:{moduleKey:H,conversations:[{objectUrn:e,trackingId:(0,c.generateTrackingId)()}],participantPresenceStatuses:t}}:[]}handleCheckboxClick(){this.args.handleBulkActionToggle&&this.args.handleBulkActionToggle(this.viewData.id)}},U=(0,i.default)(N.prototype,"authenticatedUser",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=(0,i.default)(N.prototype,"formatter",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=(0,i.default)(N.prototype,"i18n",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,i.default)(N.prototype,"msgDataManager",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,i.default)(N.prototype,"dateService",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,i.default)(N.prototype,"presenceAPI",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=(0,i.default)(N.prototype,"tracking",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.default)(N.prototype,"viewData",[p.cached],Object.getOwnPropertyDescriptor(N.prototype,"viewData"),N.prototype),(0,i.default)(N.prototype,"onKeyDown",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"onKeyDown"),N.prototype),(0,i.default)(N.prototype,"onMouseMove",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"onMouseMove"),N.prototype),(0,i.default)(N.prototype,"onClick",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"onClick"),N.prototype),(0,i.default)(N.prototype,"toggleStarState",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"toggleStarState"),N.prototype),(0,i.default)(N.prototype,"toggleConversationMute",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"toggleConversationMute"),N.prototype),(0,i.default)(N.prototype,"handleDropdownRenameForm",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"handleDropdownRenameForm"),N.prototype),(0,i.default)(N.prototype,"onNudgeImpression",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"onNudgeImpression"),N.prototype),(0,i.default)(N.prototype,"impressionEventPayload",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"impressionEventPayload"),N.prototype),(0,i.default)(N.prototype,"handleCheckboxClick",[m.action],Object.getOwnPropertyDescriptor(N.prototype,"handleCheckboxClick"),N.prototype),N))}))
define("msg-overlay/components/overlay-search-feature",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","msg-overlay/viewdata/graphql-overlay-search-viewdata","@glimmer/tracking","@glimmer/component","ember-lifeline","ember-batcher","msg-shared/utils/constants","msg-overlay/utils/scroll-blocker-helper","tracked-toolbox","@ember/object","rsvp","@ember/service","@ember/destroyable","@ember/render-modifiers/modifiers/did-insert","ember-cli-pemberly-tracking/modifiers/track-render","ember-cli-pemberly-i18n/helpers/t","hue-web-icons/components/icon","@ember/component","@ember/modifier","artdeco-dropdown/components/artdeco-dropdown","artdeco-dropdown/components/artdeco-dropdown-item","global-helpers/helpers/eq","@ember/helper","dummy-yield-wrapper/components/dummy-yield-wrapper","artdeco-button/components/artdeco-button","artdeco-loader/components/artdeco-loader","global-helpers/helpers/and","msg-overlay/components/connection-search-result-item-presenter","global-helpers/helpers/or","msg-overlay/components/overlay-conversation-list-item-feature","msg-cross-pillar/components/visible-beacon","msg-shared/utils/pem-config","message-button/components/entry-point","msg-data/utils/sdk-view-data-helpers","global-utils/utils/trusted-html-safe","msg-typeahead/components/recipient-suggestions-feature"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f,y,_,w,M,C,D,k,S,O,I,P,x,E,R,A,T,N,U,B,F,z,L){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var j,V,q,Y,H,K,W,G,J,X,Q,$,Z,ee,te,ne,ie,ae,oe,re,se,le,ce,ue,de,pe
const{KEYCODES:me,CONTROL_INTERACTION_KEYS:ge,SDK_FILTER_NAME_MAP:he}=d.default,be=".msg-overlay-list-bubble-search__search-typeahead-input",ve=".msg-overlay-list-bubble-search-content",fe=".msg-overlay-list-bubble-search__list-item",ye=new Set(["ARCHIVED","CONNECTIONS","STARRED","UNREAD","INMAIL","BLOCKED","DRAFTS"])
e.default=(0,M.setComponentTemplate)((0,o.createTemplateFactory)({id:"Rf9xqcOE",block:'[[[1,"\\n"],[1,"    "],[11,0],[16,0,[29,["msg-overlay-list-bubble-search\\n        ",[52,[30,0,["shouldShowSearchContent"]]," msg-overlay-list-bubble-search--search-content-visible"]]]],[4,[32,0],[[30,0,["onElementInsert"]]],null],[4,[32,1],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search",[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n"],[41,[30,1],[[[1,"        "],[10,0],[14,0,"msg-overlay-list-bubble-search__input-container"],[12],[1,"\\n"],[1,"          "],[10,"label"],[14,0,"a11y-text"],[14,"for","msg-overlay-list-bubble-search__search-typeahead-input"],[12],[1,"\\n            "],[1,[28,[32,3],["i18n_a11y_search_hint_text","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n          "],[13],[1,"\\n          "],[10,1],[14,0,"msg-overlay-list-search__search-icon display-flex"],[12],[1,"\\n            "],[8,[32,4],null,[["@type","@size","@name"],["system","small","search"]],null],[1,"\\n          "],[13],[1,"\\n          "],[8,[32,5],[[24,1,"msg-overlay-list-bubble-search__search-typeahead-input"],[24,0,"msg-overlay-list-bubble-search__search-typeahead-input"],[16,"placeholder",[28,[32,3],["i18n_find_a_connection","msg-overlay/components/overlay-search-feature"],null]],[24,"autocomplete","off"],[4,[32,6],["input",[30,0,["onInputChange"]]],null],[4,[32,6],["focusin",[30,0,["onInputFocusIn"]]],null],[4,[32,6],["focusout",[30,0,["onInputFocusOut"]]],null],[4,[32,6],["keyup",[30,0,["onKeyUp"]]],null]],[["@value","@insert-newline"],[[30,0,["searchTerm"]],[30,0,["onInputEnterKeyRelease"]]]],null],[1,"\\n          "],[8,[32,7],null,[["@class","@placement","@justification","@isOpen","@onVisibilityChange"],["msg-overlay-list-bubble__filters-dropdown","bottom","right",[30,0,["isConvoFiltersDropdownOpen"]],[30,0,["toggleConvoFilters"]]]],[["default"],[[[[1,"\\n            "],[8,[30,2,["dropdown-trigger"]],null,[["@class","@tabindex"],["msg-overlay-list-bubble__filters-btn","0"]],[["default"],[[[[1,"\\n              "],[8,[32,4],null,[["@a11yText","@type","@size","@name"],[[28,[32,3],["i18n_filter_messages_by","msg-overlay/components/overlay-search-feature"],null],"system","small","filter"]],null],[1,"\\n            "]],[]]]]],[1,"\\n            "],[8,[30,2,["dropdown-content"]],null,[["@classNames","@arrowDir"],["msg-overlay-list-bubble__filters-dropdown-content","right"]],[["default"],[[[[1,"\\n              "],[10,"ul"],[12],[1,"\\n                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"UNREAD"],null],[28,[32,10],[[30,0,["applyFilter"]],"UNREAD"],null],"button"]],[["default"],[[[[1,"\\n                    "],[10,0],[14,0,"display-flex align-items-center justify-space-between"],[12],[1,"\\n                      "],[10,1],[12],[1,"\\n                        "],[1,[28,[32,3],["i18n_unread","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                      "],[13],[1,"\\n                    "],[13],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n"],[41,[30,0,["msgDataManager","isServerSideDraftsEnabled"]],[[[1,"                  "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                    "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"DRAFTS"],null],[28,[32,10],[[30,0,["applyFilter"]],"DRAFTS"],null],"button"]],[["default"],[[[[1,"\\n                      "],[1,[28,[32,3],["i18n_drafts","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                    "]],[]]]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"STARRED"],null],[28,[32,10],[[30,0,["applyFilter"]],"STARRED"],null],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,3],["i18n_starred","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"INMAIL"],null],[28,[32,10],[[30,0,["applyFilter"]],"INMAIL"],null],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,3],["i18n_inmail","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"CONNECTIONS"],null],[28,[32,10],[[30,0,["applyFilter"]],"CONNECTIONS"],null],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,3],["i18n_connections","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"ARCHIVED"],null],[28,[32,10],[[30,0,["applyFilter"]],"ARCHIVED"],null],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,3],["i18n_archived","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n                "],[10,"li"],[14,0,"msg-overlay-list-bubble__filters-dropdown-content-list-item"],[12],[1,"\\n                  "],[8,[32,8],null,[["@selected","@itemSelected","@role"],[[28,[32,9],[[30,3],"BLOCKED"],null],[28,[32,10],[[30,0,["applyFilter"]],"BLOCKED"],null],"button"]],[["default"],[[[[1,"\\n                    "],[1,[28,[32,3],["i18n_spam","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "]],[]]]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n            "]],[]]]]],[1,"\\n          "]],[2]]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["shouldShowSelectedFilter"]],[[[1,"        "],[18,15,[[28,[32,11],null,[["filterSection"],[[50,[32,12],0,null,null]]]]]],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["hasActiveSearch"]],[[[1,"        "],[8,[32,13],[[4,[32,6],["click",[30,4]],null]],[["@icon","@size","@circle","@class","@text","@type"],["close","small",true,"msg-search-form__cancel-search",[28,[32,3],["i18n_cancel_search","msg-overlay/components/overlay-search-feature"],null],"tertiary"]],null],[1,"\\n"]],[]],null],[1,"      "],[10,0],[15,0,[29,["relative display-flex justify-center flex-column overflow-hidden\\n          ",[52,[51,[30,0,["shouldShowSearchContent"]]]," hidden"]]]],[12],[1,"\\n        "],[10,0],[14,0,"msg-overlay-list-bubble-search-content"],[12],[1,"\\n"],[41,[30,0,["searchPerformed"]],[[[41,[30,0,["shouldShowSearchLoadingView"]],[[[1,"              "],[8,[32,14],null,[["@size","@class"],["small","msg-overlay-list-bubble-search__loading-state"]],null],[1,"\\n"]],[]],[[[1,"              "],[11,0],[24,0,"msg-overlay-list-bubble-search__search-result-container"],[4,[32,6],["mousedown",[30,0,["noOp"]]],null],[12],[1,"\\n"],[41,[30,0,["shouldShowNoResultView"]],[[[1,"                  "],[11,0],[24,0,"msg-overlay-list-bubble-search__no-result-container text-align-center"],[4,[32,1],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_no_results",[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                    "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__no-result-illustration"],[12],[13],[1,"\\n                    "],[10,2],[14,0,"ph2 t-14 t-black t-normal"],[12],[1,"\\n                      "],[1,[28,[32,3],["i18n_we_did_not_find_anything","msg-overlay/components/overlay-search-feature"],[["searchTerm"],[[30,0,["searchTerm"]]]]]],[1,"\\n                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],[[[41,[30,0,["displayedConnections","length"]],[[[1,"                    "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[32,1],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_typeahead_results",[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                      "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                        "],[1,[28,[32,3],["i18n_connections_matched","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                      "],[13],[1,"\\n                    "],[13],[1,"\\n                    "],[10,"ul"],[14,0,"msg-overlay-list-bubble-search__connection-search-result-list"],[12],[1,"\\n"],[42,[28,[31,6],[[28,[31,6],[[30,0,["viewData","connectionSearchResultViewDataElements"]]],null]],null],null,[[[1,"                        "],[10,"li"],[15,0,[29,["msg-overlay-list-bubble-search__list-item display-flex align-items-center pv2 ph3\\n                            ",[52,[28,[32,15],[[28,[32,9],[[30,6],[30,0,["highlightedItemIndex"]]],null],[30,0,["selectedWithKeyboard"]]],null],"msg-overlay-list-bubble-search__list-item--highlighted"]]]],[12],[1,"\\n"],[41,[30,7],[[[1,"                            "],[8,[32,16],null,[["@controlUrn","@referringModuleKey","@recipientUrns","@target"],["msg-overlay-search-inbox-item","messaging:overlay-search-inbox-connection",[30,5,["entityUrn"]],"OVERLAY"]],[["default"],[[[[1,"\\n                              "],[8,[32,17],null,[["@itemIndex","@viewData","@caption","@onClick","@onMouseMove","@openBubble"],[[30,6],[30,5],[28,[32,18],[[30,5,["subtext"]],[30,5,["caption"]]],null],[30,8],[28,[32,10],[[30,0,["onListItemMouseMove"]],[30,6],false],null],[30,8]]],null],[1,"\\n                            "]],[8]]]]],[1,"\\n"]],[]],[[[1,"                            "],[8,[32,17],null,[["@itemIndex","@viewData","@caption","@onClick","@onMouseMove"],[[30,6],[30,5],[28,[32,18],[[30,5,["subtext"]],[30,5,["caption"]]],null],[28,[32,10],[[30,0,["onConnectionSearchResultSelect"]],[30,5,["profileAPIModel"]]],null],[28,[32,10],[[30,0,["onListItemMouseMove"]],[30,6],false],null]]],null],[1,"\\n"]],[]]],[1,"                        "],[13],[1,"\\n"]],[5,6]],null],[1,"                    "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["matchedConversations","length"]],[[[1,"                    "],[11,"header"],[24,0,"msg-overlay-list-bubble__list-header msg-overlay-list-bubble-search__result-header"],[4,[32,1],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_results",[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n                      "],[10,"h5"],[14,0,"msg-overlay-list-bubble__list-header-title t-12 t-black--light t-bold truncate"],[12],[1,"\\n                        "],[1,[28,[32,3],["i18n_conversation_history","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                      "],[13],[1,"\\n                    "],[13],[1,"\\n"],[1,"                    "],[10,0],[14,0,"msg-overlay-list-bubble-search__content-search-result-list"],[12],[1,"\\n"],[42,[28,[31,6],[[28,[31,6],[[30,0,["matchedConversations"]]],null]],null],null,[[[41,[30,7],[[[44,[[28,[32,19],[[30,9,["decoratedParticipants"]],[30,11]],null]],[[[1,"                            "],[8,[32,16],null,[["@controlUrn","@referringModuleKey","@recipientUrns","@existingConversationUrn","@target"],["msg-overlay-search-inbox-item","messaging:overlay-search-inbox-conversation",[30,12],[30,9,["entityUrn"]],"OVERLAY"]],[["default"],[[[[1,"\\n                              "],[8,[32,20],[[16,0,[52,[28,[32,15],[[28,[32,9],[[30,10],[30,0,["highlightedConversationResultIndex"]]],null],[30,0,["selectedWithKeyboard"]]],null],"msg-overlay-list-bubble-search__list-item--highlighted"]]],[["@conversation","@currentConvosFilter","@convoIndex","@openBubble","@onMouseMove","@disableBulkActions","@isOverlaySearch"],[[30,9],[30,3],[30,10],[30,13],[28,[32,10],[[30,0,["onListItemMouseMove"]],[30,10],true],null],true,true]],null],[1,"\\n                            "]],[13]]]]],[1,"\\n"]],[12]]]],[]],[[[1,"                          "],[8,[32,20],[[16,0,[52,[28,[32,15],[[28,[32,9],[[30,10],[30,0,["highlightedConversationResultIndex"]]],null],[30,0,["selectedWithKeyboard"]]],null],"msg-overlay-list-bubble-search__list-item--highlighted"]]],[["@conversation","@currentConvosFilter","@convoIndex","@openBubble","@onMouseMove","@disableBulkActions","@isOverlaySearch"],[[30,9],[30,3],[30,10],[30,0,["onContentSearchResultSelect"]],[28,[32,10],[[30,0,["onListItemMouseMove"]],[30,10],true],null],true,true]],null],[1,"\\n"]],[]]]],[9,10]],null],[41,[30,0,["loadMoreInProgress"]],[[[1,"                        "],[8,[32,14],null,[["@size"],["small"]],null],[1,"\\n"]],[]],null],[41,[30,0,["shouldLoadMoreConversations"]],[[[1,"                        "],[8,[32,21],null,[["@inView","@rootSelector"],[[30,0,["infiniteScroll"]],".msg-overlay-list-bubble-search-content"]],null],[1,"\\n"]],[]],null],[1,"                    "],[13],[1,"\\n"]],[]],null]],[]]],[1,"              "],[13],[1,"\\n"]],[]]]],[]],[[[1,"\\n"],[1,"            "],[11,0],[4,[32,6],["mousedown",[30,0,["noOp"]]],null],[12],[1,"\\n              "],[8,[32,22],[[4,[32,1],null,[["pageKey","routeName","currentRoute"],["flagship3_messaging_overlay_search_suggestions",[28,[32,2],[[53,"outletState"],"render.name"],null],[28,[32,2],[[53,"outletState"],"render"],null]]]]],[["@afterOpen","@canRender","@openBubble"],[[30,0,["onInputFocusOut"]],[30,0,["shouldShowSearchContent"]],[30,14]]],[["default"],[[[[1,"\\n                "],[10,0],[14,0,"msg-overlay-list-bubble-search__history-placeholder-container text-align-center"],[12],[1,"\\n                  "],[10,0],[14,0,"msg-overlay-list-bubble__illustration msg-overlay-list-bubble-search__history-placeholder-illustration"],[12],[13],[1,"\\n                  "],[10,2],[14,0,"t-14 t-black t-normal ph2"],[12],[1,"\\n                    "],[1,[28,[32,3],["i18n_search_your_messages","msg-overlay/components/overlay-search-feature"],null]],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n              "]],[]]]]],[1,"\\n            "],[13],[1,"\\n"]],[]]],[1,"        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["@showSearchInput","dropdown","@currentConvosFilter","@clearActiveSearch","connection","index","@useEntryPoint","openMessaging","conversation","index","@authenticatedUserMiniProfile","recipientUrns","openMessaging","@openBubble","&default"],false,["if","-get-dynamic-var","yield","component","unless","each","-track-array","let"]]',moduleName:"msg-overlay/components/overlay-search-feature.gjs",scope:()=>[f.default,y.default,O.get,_.default,w.default,M.Input,C.on,D.default,k.default,S.default,O.fn,O.hash,I.default,P.default,x.default,E.default,B.default,R.default,A.default,F.getNonSelfParticipantsUrns,T.default,N.default,L.default],isStrictMode:!0}),(j=(0,b.inject)("i18n"),V=(0,b.inject)("tracking"),q=(0,b.inject)("global-services@a11y-notification"),Y=(0,b.inject)("msg-data@data-manager"),H=(0,b.inject)("formatter"),K=(0,b.inject)("authentication@authenticated-user"),W=class extends l.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",G,this);(0,t.default)(this,"tracking",J,this);(0,t.default)(this,"a11yNotification",X,this);(0,t.default)(this,"msgDataManager",Q,this);(0,t.default)(this,"formatter",$,this);(0,t.default)(this,"authenticatedUser",Z,this);(0,t.default)(this,"connectionSearchPerformed",ee,this);(0,t.default)(this,"contentSearchPerformed",te,this);(0,t.default)(this,"inputHasFocus",ne,this);(0,t.default)(this,"matchedConnections",ie,this);(0,t.default)(this,"_matchedConversations",ae,this);(0,t.default)(this,"mailboxName",oe,this);(0,t.default)(this,"isSearchLoading",re,this);(0,t.default)(this,"collection",se,this);(0,t.default)(this,"highlightedItemIndex",le,this);(0,t.default)(this,"searchTerm",ce,this);(0,t.default)(this,"isConvoFiltersDropdownOpen",ue,this);(0,t.default)(this,"loadMoreInProgress",de,this);(0,t.default)(this,"selectedWithKeyboard",pe,this);(0,n.default)(this,"collectionName",void 0);(0,n.default)(this,"searchField",void 0);(0,n.default)(this,"scrollSection",void 0)}get matchedMailboxConversations(){return this.msgDataManager.getTrackedConversations(this.mailboxName)}get matchedConversations(){return this.matchedMailboxConversations}get searchPerformed(){return this.connectionSearchPerformed||this.contentSearchPerformed}get shouldShowSelectedFilter(){const{currentConvosFilter:e}=this.args
return e&&ye.has(e)}get shouldShowSearchContent(){return this.inputHasFocus}get displayedConnections(){return this.matchedConnections.slice(0,3)}get shouldShowNoResultView(){return 0===this.displayedResultsLength&&this.connectionSearchPerformed&&this.contentSearchPerformed}get displayedResultsLength(){return this.displayedConnections.length+this.matchedConversations.length}get listItemCount(){return this.searchPerformed&&this.displayedResultsLength}get highlightedConversationResultIndex(){return this.highlightedItemIndex-this.displayedConnections.length}get shouldShowSearchLoadingView(){const e=this.msgDataManager.getMailboxState(this.mailboxName)
return!e||(this.isSearchLoading||e.status.loading&&!this.loadMoreInProgress)}onElementInsert(e){this.currentElement=e
this.searchField=e.querySelector(be)
this.scrollSection=e.querySelector(ve);(0,p.default)(this,this.scrollSection)}_performSearch(e){this.isSearchLoading=!0
const t=(new Date).getTime()
this.lastRequestTime=t
const n=[this.msgDataManager.fetchTypeaheadResults(e,void 0,U.VOYAGER_MESSAGING_DEGRADATION_METADATA.SEARCH).then((e=>this._handleConnectionSearchResults(e,t)))],{currentConvosFilter:i}=this.args
this.mailboxName=`${e}-${Date.now()}`
const a={kind:"search",keywords:e,firstDegreeConnections:!1}
if("CONNECTIONS"===i){a.categories=["INBOX","SPAM","ARCHIVE"]
a.firstDegreeConnections=!0}else if("UNREAD"===i){a.categories=["INBOX","SPAM","ARCHIVE"]
a.read=!1}else ye.has(i)?a.categories=[he[i]]:a.categories=["INBOX","SPAM","ARCHIVE"]
const o=this.msgDataManager.getMailbox(this.mailboxName,a).then((()=>{(0,v.isDestroying)(this)||this._handleConversationSearchResults(this.msgDataManager.getTrackedConversations(this.mailboxName),t)}))
n.push(o);(0,h.all)(n).then((()=>{if(!this.isDestroying){this.isSearchLoading=!1
0!==this.displayedResultsLength&&this.a11yNotify("i18n_a11y_navigate_search_results")}}))}_handleSearchTermChange(e){var t,n
const i=e?e.trim():"",a=i.length>0
this.highlightedItemIndex=-1
a?(0,c.debounceTask)(this,"_performSearch",i,500):this._clearSearchResults()
null===(t=(n=this.args).onSearchTermChange)||void 0===t||t.call(n,i)}_handleConversationSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,h.reject)()
this.contentSearchPerformed=!0
this._matchedConversations=e
this.a11yNotify("i18n_a11y_conversation_results_found",{resultsLength:e.length})
return(0,h.resolve)()}_handleConnectionSearchResults(e,t){if(t!==this.lastRequestTime||0===this.searchTerm.length)return(0,h.reject)()
this.connectionSearchPerformed=!0
this.matchedConnections=e
this.a11yNotify("i18n_a11y_connection_results_found",{resultsLength:e.length})
return(0,h.resolve)()}_clearSearchResults(){this.connectionSearchPerformed=!1
this.matchedConnections=[]
this.contentSearchPerformed=!1
this._matchedConversations=[]}_clearInputField(){this.searchTerm=""
this._handleSearchTermChange("")}_moveSelectedItem(e){const t=this.listItemCount
if(0===t)return
this.selectedWithKeyboard=!0
const n=this.highlightedItemIndex
let i
i=-1===n?1===e?0:t-1:(n+e+t)%t
this.highlightedItemIndex=i
this._a11yNotifyItemSelectionChange();(0,u.mutateDOM)((()=>{if(!this.isDestroying)if(0===i)this.scrollSection.scrollTop=0
else{const e=this.currentElement.querySelectorAll(fe)[i]
if(e){const t=e.offsetTop,n=t+e.offsetHeight
n>this.scrollSection.offsetHeight+this.scrollSection.scrollTop?this.scrollSection.scrollTop=n-this.scrollSection.offsetHeight:t<this.scrollSection.scrollTop&&(this.scrollSection.scrollTop=t)}}}))}_conversationName(e){if(e.groupChat)return e.title?e.title:(0,z.default)(this.i18n.lookupTranslation("components/msg-overlay@overlay-search-feature","i18n_conversation_familiar_names")([{names:(0,F.participantNamesWithSelf)(e.decoratedParticipants,this.authenticatedUser.miniProfile.content,!0,this.i18n)}]))
const t=this.msgDataManager.getNonSelfParticipantsFromConversationRecord(e)
return t.length>0?(0,F.getParticipantNameByKind)(t[0],this.formatter,"full"):(0,z.default)(this.i18n.lookupTranslation("components/msg-overlay@overlay-search-feature","i18n_just_you")())}_a11yNotifyItemSelectionChange(){if(this.searchPerformed)if(this.highlightedItemIndex<this.displayedConnections.length)this.a11yNotify("i18n_a11y_search_result_connection_name",{name:this.viewData.connectionSearchResultViewDataElements[this.highlightedItemIndex].recipientName,currentIndex:this.highlightedItemIndex+1,totalConnections:this.displayedConnections.length})
else{var e
const t=null===(e=this.matchedConversations[this.highlightedConversationResultIndex])||void 0===e?void 0:e.entityUrn,n=this.msgDataManager.getTrackedConversation(t),i=(0,F.isSponsoredInMail)(n)?"i18n_a11y_search_result_spinmail_name":"i18n_a11y_search_result_conversation_name"
this.a11yNotify(i,{name:this._conversationName(n)})}}_openConnectionSearchResult(e){this._clearInputField()
this.args.openNewConversation({recipients:[e]})
this.tracking.fireInteractionEvent(ge.SELECT_CONNECTION_SEARCH_RESULT)}_openContentSearchResult(e){this._clearInputField()
this.args.openBubble(e)
this.tracking.fireInteractionEvent(ge.SELECT_CONTENT_SEARCH_RESULT)}onKeyUp(e){if(this.inputHasFocus)switch(e.keyCode){case me.UP_ARROW:this._moveSelectedItem(-1)
e.preventDefault()
break
case me.DOWN_ARROW:this._moveSelectedItem(1)
e.preventDefault()
break
case me.ESC:this._clearInputField()}}infiniteScroll(){if(!this.shouldLoadMoreConversations)return(0,h.resolve)(!1)
this.loadMoreInProgress=!0
return this.msgDataManager.getMailbox(this.mailboxName).then((e=>e.loadOlderConversations())).finally((()=>{(0,v.isDestroying)(this)||(this.loadMoreInProgress=!1)}))}get shouldLoadMoreConversations(){if(!this.matchedConversations||0===this.matchedConversations.length)return!1
const e=this.msgDataManager.getMailboxState(this.mailboxName),{fullyLoaded:t}=e.status
return!t&&!this.loadMoreInProgress}get viewData(){const{formatter:e,displayedConnections:t}=this
return new r.default({formatter:e,matchedConnections:t})}a11yNotify(e,t){const n=this.i18n.lookupTranslation("components/msg-overlay@overlay-search-feature",e)
this.a11yNotification.setTextInLiveRegion(n([t]))}toggleConvoFilters(e){this.isConvoFiltersDropdownOpen=e
this.tracking.fireInteractionEvent("overlay.filter_messages_by","SHORT_PRESS")}applyFilter(e){this.isConvoFiltersDropdownOpen=!1
if(this.args.currentConvosFilter!==e){this.args.onFilterApply(e)
this._handleSearchTermChange(this.searchTerm)}}clearFilters(){this.args.onClearFilters()
this._handleSearchTermChange(this.searchTerm)}onInputFocusIn(){this.inputHasFocus=!0
this.highlightedItemIndex=-1;(0,u.mutateDOM)((()=>{this.isDestroying||(this.scrollSection.scrollTop=0)}))
this.tracking.fireInteractionEvent(ge.FOCUS_SEARCH_BOX)}onInputFocusOut(){this.inputHasFocus=!1}onInputEnterKeyRelease(){if(-1!==this.highlightedItemIndex&&this.searchPerformed){const e=this.viewData.connectionSearchResultViewDataElements.length
if(this.highlightedItemIndex<e){const e=this.viewData.connectionSearchResultViewDataElements[this.highlightedItemIndex]
this._openConnectionSearchResult(e.profileAPIModel)}else this._openContentSearchResult(this.matchedConversations[this.highlightedConversationResultIndex])}}clearInputField(){this._clearInputField()
this.tracking.fireInteractionEvent(ge.CANCEL_SEARCH)}onConnectionSearchResultSelect(e){this._openConnectionSearchResult(e)}onContentSearchResultSelect(e){const t=this.matchedConversations.find((t=>t.entityUrn===e))
this._openContentSearchResult(t)}onInputChange(e){this.searchTerm=e.target.value
this._handleSearchTermChange(this.searchTerm)}onListItemMouseMove(e,t,n){if(this.lastX!==n.screenX||this.lastY!==n.screenY){this.selectedWithKeyboard=!1
this.highlightedItemIndex=t?e+this.displayedConnections.length:e
this.lastX=n.screenX
this.lastY=n.screenY}}noOp(e){e.preventDefault()}},G=(0,i.default)(W.prototype,"i18n",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=(0,i.default)(W.prototype,"tracking",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=(0,i.default)(W.prototype,"a11yNotification",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=(0,i.default)(W.prototype,"msgDataManager",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=(0,i.default)(W.prototype,"formatter",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=(0,i.default)(W.prototype,"authenticatedUser",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=(0,i.default)(W.prototype,"connectionSearchPerformed",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),te=(0,i.default)(W.prototype,"contentSearchPerformed",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ne=(0,i.default)(W.prototype,"inputHasFocus",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=(0,i.default)(W.prototype,"matchedConnections",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ae=(0,i.default)(W.prototype,"_matchedConversations",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oe=(0,i.default)(W.prototype,"mailboxName",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=(0,i.default)(W.prototype,"isSearchLoading",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=(0,i.default)(W.prototype,"collection",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=(0,i.default)(W.prototype,"highlightedItemIndex",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),ce=(0,i.default)(W.prototype,"searchTerm",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=(0,i.default)(W.prototype,"isConvoFiltersDropdownOpen",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=(0,i.default)(W.prototype,"loadMoreInProgress",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=(0,i.default)(W.prototype,"selectedWithKeyboard",[s.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(W.prototype,"matchedMailboxConversations",[m.cached],Object.getOwnPropertyDescriptor(W.prototype,"matchedMailboxConversations"),W.prototype),(0,i.default)(W.prototype,"onElementInsert",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onElementInsert"),W.prototype),(0,i.default)(W.prototype,"onKeyUp",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onKeyUp"),W.prototype),(0,i.default)(W.prototype,"infiniteScroll",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"infiniteScroll"),W.prototype),(0,i.default)(W.prototype,"toggleConvoFilters",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"toggleConvoFilters"),W.prototype),(0,i.default)(W.prototype,"applyFilter",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"applyFilter"),W.prototype),(0,i.default)(W.prototype,"clearFilters",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"clearFilters"),W.prototype),(0,i.default)(W.prototype,"onInputFocusIn",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onInputFocusIn"),W.prototype),(0,i.default)(W.prototype,"onInputFocusOut",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onInputFocusOut"),W.prototype),(0,i.default)(W.prototype,"onInputEnterKeyRelease",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onInputEnterKeyRelease"),W.prototype),(0,i.default)(W.prototype,"clearInputField",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"clearInputField"),W.prototype),(0,i.default)(W.prototype,"onConnectionSearchResultSelect",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onConnectionSearchResultSelect"),W.prototype),(0,i.default)(W.prototype,"onContentSearchResultSelect",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onContentSearchResultSelect"),W.prototype),(0,i.default)(W.prototype,"onInputChange",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onInputChange"),W.prototype),(0,i.default)(W.prototype,"onListItemMouseMove",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"onListItemMouseMove"),W.prototype),(0,i.default)(W.prototype,"noOp",[g.action],Object.getOwnPropertyDescriptor(W.prototype,"noOp"),W.prototype),W))}))
define("msg-overlay/components/presence-onboarding-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/helper","@ember/component","rsvp","global-utils/utils/get-csrf-token","@glimmer/tracking","@glimmer/component","@ember/service","@ember/object","@ember/destroyable","@ember/modifier","ember-cli-pemberly-i18n/helpers/t","artdeco-button/components/artdeco-button","ember-cli-pemberly-tracking/modifiers/track-interaction"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h,b,v,f){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var y,_,w,M,C,D,k,S,O,I,P,x,E,R,A,T,N,U
e.default=(0,s.setComponentTemplate)((0,o.createTemplateFactory)({id:"p+SSEtDp",block:'[[[1,"\\n"],[41,[30,0,["showPresenceOnboardingPresenter"]],[[[1,"      "],[11,0],[24,0,"msg-overlay-presence-onboarding-presenter"],[4,[32,0],["click",[30,0,["stopPropagation"]]],null],[12],[1,"\\n        "],[10,2],[14,0,"t-14"],[12],[1,"\\n          "],[1,[28,[32,1],["i18n_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n          "],[10,3],[14,6,"/help/linkedin/answer/84123"],[14,"target","_blank"],[14,"rel","noopener noreferrer"],[14,0,"t-black link-without-visited-state"],[12],[1,"\\n            "],[1,[28,[32,1],["i18n_learn_more","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,0],[14,0,"display-flex justify-flex-end mt2"],[12],[1,"\\n          "],[8,[32,2],[[16,"aria-label",[28,[32,1],["a11y_manage_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[32,0],["click",[30,0,["manageActiveStatus"]]],null],[4,[32,3],["active_status_onboarding_manage"],null]],[["@class","@size","@type","@color"],["mr2","1","tertiary","muted"]],[["default"],[[[[1,"\\n            "],[1,[28,[32,1],["i18n_manage","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n          "]],[]]]]],[1,"\\n          "],[8,[32,2],[[16,"aria-label",[28,[32,1],["a11y_enable_active_status","msg-overlay/components/presence-onboarding-presenter"],null]],[4,[32,0],["click",[30,0,["enableActiveStatus"]]],null],[4,[32,3],["active_status_onboarding_enable"],null]],[["@size"],["1"]],[["default"],[[[[1,"\\n            "],[1,[28,[32,1],["i18n_got_it","msg-overlay/components/presence-onboarding-presenter"],null]],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],[],false,["if"]]',moduleName:"msg-overlay/components/presence-onboarding-presenter.gjs",scope:()=>[h.on,b.default,v.default,f.default],isStrictMode:!0}),(y=(0,p.inject)("global-services@a11y-notification"),_=(0,p.inject)("i18n"),w=(0,p.inject)("lego@resolver"),M=(0,p.inject)("lego@tracking"),C=(0,p.inject)("global-services@store-shim"),D=(0,p.inject)("tracking"),k=(0,p.inject)("global-services@window"),S=(0,p.inject)("lix"),O=class extends d.default{constructor(){super(...arguments);(0,t.default)(this,"a11yNotification",I,this);(0,t.default)(this,"i18n",P,this);(0,t.default)(this,"legoResolver",x,this);(0,t.default)(this,"legoTracking",E,this);(0,t.default)(this,"storeShim",R,this);(0,t.default)(this,"tracking",A,this);(0,t.default)(this,"windowService",T,this);(0,t.default)(this,"lix",N,this);(0,t.default)(this,"showPresenceOnboardingPresenter",U,this);(0,n.default)(this,"_legoWidgetTrackingToken",void 0)
this._fetchLegoWidget().then((()=>{if(!this.isDestroying)return this._fetchActiveStatusSetting()})).then((e=>{this.isDestroying||("HIDDEN"===e?this._showPresenceOnboardingPresenter():this._dismissLegoWidget())}))}get isPageContentGraphQLEnabled(){return this.lix.getTreatmentIsEnabled("voyager.web.hiring-lego-page-content-graphql-migration")}stopPropagation(e){e.stopPropagation()}_showPresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!0
this.tracking.firePageViewEvent("flagship3_messaging_active_status_onboarding")
const e=this.i18n.lookupTranslation("components/msg-overlay@presence-onboarding-presenter","i18n_active_status")()
this.a11yNotification.setTextInLiveRegion(e)}_completePresenceOnboardingPresenter(){this.showPresenceOnboardingPresenter=!1
return this._enableActiveStatusSetting().then((()=>{this.isDestroying||this._dismissLegoWidget()}))}_fetchLegoWidget(){return this.legoResolver.fireLegoCall({pageKey:"messaging_presence",slotId:"onboarding",groupId:"onboarding_group",widgetId:"presence_onboarding"},!0,this.isPageContentGraphQLEnabled).then((e=>{if(!(0,g.isDestroying)(this)){if(!e)return(0,l.reject)()
this._legoWidgetTrackingToken=e.trackingToken
return e}}))}_dismissLegoWidget(){this.legoTracking.sendLegoAction(this._legoWidgetTrackingToken,this.legoTracking.LEGO_ACTION_DISMISS,1)}_fetchActiveStatusSetting(){return this.storeShim.adapterFor("-ember-m3").ajax("/psettings/presence","get",{data:{asJson:!0}}).then((e=>{var t,n
if((0,g.isDestroying)(this))return
const i=null===(t=e.map)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.visibility
if(!i)throw new Error("failed to get active status setting")
return i}))}_enableActiveStatusSetting(){return this.storeShim.adapterFor("-ember-m3").ajax("/psettings/presence/update-presence-settings","post",{data:{visibility:"CONNECTIONS",csrfToken:(0,c.default)()},headers:{"x-requested-with":"XMLHttpRequest"}}).then((e=>{var t
if((0,g.isDestroying)(this))return
const n=null===(t=e.result)||void 0===t?void 0:t.responseCode
if(200!==n)throw new Error(`failed to set active status setting, responseCode: ${n}`)}))}enableActiveStatus(){this._completePresenceOnboardingPresenter()}manageActiveStatus(){this._completePresenceOnboardingPresenter().then((()=>{this.isDestroying||this.windowService.open("/psettings/presence","_blank")}))}},I=(0,i.default)(O.prototype,"a11yNotification",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,i.default)(O.prototype,"i18n",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,i.default)(O.prototype,"legoResolver",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,i.default)(O.prototype,"legoTracking",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=(0,i.default)(O.prototype,"storeShim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,i.default)(O.prototype,"tracking",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,i.default)(O.prototype,"windowService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,i.default)(O.prototype,"lix",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=(0,i.default)(O.prototype,"showPresenceOnboardingPresenter",[u.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,i.default)(O.prototype,"enableActiveStatus",[m.action],Object.getOwnPropertyDescriptor(O.prototype,"enableActiveStatus"),O.prototype),(0,i.default)(O.prototype,"manageActiveStatus",[m.action],Object.getOwnPropertyDescriptor(O.prototype,"manageActiveStatus"),O.prototype),O))}))
define("msg-overlay/components/recommendation-card-presenter",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@ember/template-factory","@ember/helper","@ember/component","@glimmer/component","@ember/service","ember-cli-pemberly-tracking/modifiers/track-impression","@ember/modifier","ember-cli-pemberly-tracking/modifiers/track-interaction","presence/components/entity-with-presence-presenter","global-helpers/helpers/not","ember-cli-pemberly-i18n/helpers/t"],(function(e,t,n,i,a,o,r,s,l,c,u,d,p,m,g,h){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var b,v,f
e.default=(0,s.setComponentTemplate)((0,o.createTemplateFactory)({id:"RYBIhd7U",block:'[[[1,"\\n"],[1,"    "],[11,"li"],[24,0,"msg-overlay-list-bubble__convo-item msg-overlay-list-bubble__profile-item"],[4,[32,0],[[30,1]],[["routeName","currentRoute"],[[28,[32,1],[[53,"outletState"],"render.name"],null],[28,[32,1],[[53,"outletState"],"render"],null]]]],[12],[1,"\\n      "],[11,"button"],[24,0,"msg-conversation-listitem__link msg-overlay-list-bubble__convo-item-link"],[24,"tabindex","0"],[24,4,"button"],[4,[32,2],["click",[30,2]],null],[4,[32,2],["keyup",[30,2]],[["preventDefault"],[true]]],[4,[32,3],["overlay_message_recommendation"],[["onInteract"],[[30,3]]]],[12],[1,"\\n        "],[10,0],[14,0,"msg-conversation-card msg-overlay-list-bubble__convo-card"],[12],[1,"\\n          "],[10,0],[14,0,"msg-conversation-card__presence-entity-container"],[12],[1,"\\n            "],[8,[32,4],[[24,0,"msg-conversation-card__presence-entity"]],[["@viewData","@size"],[[30,4,["EntityWithPresenceViewData"]],3]],null],[1,"\\n          "],[13],[1,"\\n          "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content"],[12],[1,"\\n            "],[10,0],[14,0,"msg-overlay-list-bubble__convo-card-content-wrapper"],[12],[1,"\\n              "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n                "],[10,1],[14,0,"truncate t-14 t-black"],[12],[1,"\\n                  "],[1,[30,4,["suggestedRecipientName"]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n\\n              "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n                "],[10,1],[14,0,"msg-overlay-list-bubble__message-snippet m0 t-12 t-black--light t-normal block truncate"],[12],[1,"\\n                  "],[1,[30,4,["suggestedRecipientOccupation"]]],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n\\n              "],[10,0],[14,0,"msg-conversation-card__row"],[12],[1,"\\n"],[41,[30,0,["reasonTextFromRenderModel"]],[[[1,"                  "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                    "],[1,[30,0,["reasonTextFromRenderModel"]]],[1,"\\n                  "],[13],[1,"\\n"]],[]],[[[41,[28,[32,5],[[30,5]],null],[[[41,[30,4,["suggestionReasons"]],[[[1,"                    "],[10,1],[14,0,"t-12 t-black--light t-normal t-italic block truncate mt1"],[12],[1,"\\n                      "],[1,[52,[30,4,["isCurrentEmployee"]],[28,[32,6],["works_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isPreviousEmployee"]],[28,[32,6],["has_worked_at","msg-overlay/components/recommendation-card-presenter"],[["actor"],[[30,6]]]],[52,[30,4,["isConnectingMember"]],[28,[32,6],["knows_people_at","msg-overlay/components/recommendation-card-presenter"],[["connectionCount","actor"],[[30,4,["numSecondDegreeMembers"]],[30,6]]]]]]]],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                "]],[]],null]],[]]],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["@impressionTrackingHandler","@messageRecommendation","@interactionTrackingHandler","@viewData","@isFeedContext","@actor"],false,["-get-dynamic-var","if"]]',moduleName:"msg-overlay/components/recommendation-card-presenter.gjs",scope:()=>[u.default,r.get,d.on,p.default,m.default,g.default,h.default],isStrictMode:!0}),(b=(0,c.inject)("i18n"),v=class extends l.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",f,this)}get reasonTextFromRenderModel(){const{reasonText:e}=this.args.viewData
if(e)return this.i18n.parseRawString(e)({name:this.args.actor})}},f=(0,i.default)(v.prototype,"i18n",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v))}))
define.alias("helpcenter-in-product-ember/components/search-bar","msg-overlay/components/search-bar")
define.alias("helpcenter-in-product-ember/components/search-results-list","msg-overlay/components/search-results-list")
define("msg-overlay/config/environment",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-overlay/config/environment",n=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(n))}catch(e){t={sparkPlaceholders:{includeHashes:["assets/media-player.amd.js"]}}}e.default=t}))
define("msg-overlay/engine",["exports","@babel/runtime/helpers/esm/defineProperty","strict-resolver","@ember/engine","ember-load-initializers"],(function(e,t,n,i,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const o="msg-overlay",r=class extends i.default{constructor(){super(...arguments);(0,t.default)(this,"Resolver",n.default);(0,t.default)(this,"modulePrefix",o)}};(0,a.default)(r,o)
e.default=r}))
define.alias("ember-truth-helpers/helpers/and","msg-overlay/helpers/and")
define.alias("artdeco-datepicker/helpers/artdeco-adjust-date-for-timezone","msg-overlay/helpers/artdeco-adjust-date-for-timezone")
define.alias("artdeco-datepicker/helpers/artdeco-is-between-dates","msg-overlay/helpers/artdeco-is-between-dates")
define.alias("ember-media-player/helpers/autoplay-media","msg-overlay/helpers/autoplay-media")
define.alias("artdeco-datepicker/helpers/cal-dates-equal","msg-overlay/helpers/cal-dates-equal")
define.alias("ember-element-helper/helpers/element","msg-overlay/helpers/element")
define.alias("ember-holy-futuristic-template-namespacing-batman/helpers/-translate-dynamic-2","msg-overlay/helpers/ember-holy-futuristic-template-namespacing-batman-translate-dynamic-2")
define("msg-overlay/helpers/ensure-safe-component",["exports","@embroider/util"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.EnsureSafeComponentHelper}})}))
define.alias("ember-truth-helpers/helpers/eq","msg-overlay/helpers/eq")
define.alias("ember-media-player/helpers/format-autoplay","msg-overlay/helpers/format-autoplay")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-overlay/helpers/format-number")
define.alias("ember-semaphore/helpers/format-title","msg-overlay/helpers/format-title")
define.alias("ember-truth-helpers/helpers/gt","msg-overlay/helpers/gt")
define.alias("ember-truth-helpers/helpers/gte","msg-overlay/helpers/gte")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-name","msg-overlay/helpers/hue-web-artdeco-icon-migration-runtime")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-v2","msg-overlay/helpers/hue-web-artdeco-li-icon-migration-runtime-v2")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-to-icon-path","msg-overlay/helpers/hue-web-artdeco-li-icon-migration-runtime")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/helpers/convert-argument","msg-overlay/helpers/hue-web-artdeco-migration-runtime")
define.alias("helpcenter-in-product-ember/helpers/includes","msg-overlay/helpers/includes")
define.alias("ember-truth-helpers/helpers/is-array","msg-overlay/helpers/is-array")
define.alias("ember-truth-helpers/helpers/is-empty","msg-overlay/helpers/is-empty")
define.alias("ember-truth-helpers/helpers/is-equal","msg-overlay/helpers/is-equal")
define.alias("artdeco-icons-web/helpers/li-icon","msg-overlay/helpers/li-icon")
define.alias("ember-async-data/helpers/load","msg-overlay/helpers/load")
define.alias("ember-truth-helpers/helpers/lt","msg-overlay/helpers/lt")
define.alias("ember-truth-helpers/helpers/lte","msg-overlay/helpers/lte")
define.alias("ember-truth-helpers/helpers/not-eq","msg-overlay/helpers/not-eq")
define.alias("ember-truth-helpers/helpers/not","msg-overlay/helpers/not")
define.alias("ember-truth-helpers/helpers/or","msg-overlay/helpers/or")
define("msg-overlay/helpers/ref-to",["exports","ember-ref-bucket/helpers/ref-to"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"refTo",{enumerable:!0,get:function(){return t.default}})}))
define.alias("ember-app-scheduler/helpers/route-idle","msg-overlay/helpers/route-idle")
define.alias("ember-media-player/helpers/seek-media","msg-overlay/helpers/seek-media")
define.alias("ember-set-helper/helpers/set","msg-overlay/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-overlay/helpers/t")
define.alias("ember-truth-helpers/helpers/xor","msg-overlay/helpers/xor")
define.alias("ember-uuid","msg-overlay/index")
define("msg-overlay/initializers/icons",["exports","artdeco-icons-web/src/icons","msg-overlay/config/environment"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
function i(e){throw e}e.default={name:"icons",initialize:function(){const{environment:e,APP:a}=n.default
let o,r
a&&({artdecoCustomSpriteUrl:o,artdecoCustomSpriteName:r}=a)
const s="test"!==e
t.default.load(s,o,r).catch(i)}}}))
define.alias("ember-cli-pemberly-lix/initializers/lix","msg-overlay/initializers/lix")
define.alias("ember-m3/initializers/m3-store","msg-overlay/initializers/m3-store")
define("msg-overlay/instance-initializers/artdeco",["exports","artdeco-eyeglass"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.initialize=a
const n=[t.default.contextClasses,t.default.floatingLabel,t.default.focusOutline]
function i(e,t){const i=e[t]
e[t]=function(){n.forEach((e=>e&&"function"==typeof e.teardown&&e.teardown()))
i&&"function"==typeof i&&i.call(e)}}function a(e){if("undefined"!=typeof document){n.forEach((e=>e.install()))
"function"==typeof e.willDestroy?i(e,"willDestroy"):"function"==typeof e.destroy&&i(e,"destroy")}}e.default={name:"artdeco",initialize:a}}))
define.alias("ember-ref-bucket/instance-initializers/global-ref-cleanup","msg-overlay/instance-initializers/global-ref-cleanup")
define.alias("tracking-overlay-service/instance-initializers/tracking-overlay","msg-overlay/instance-initializers/tracking-overlay")
define.alias("artdeco-datepicker/modifiers/artdeco-calendar-click-watcher","msg-overlay/modifiers/artdeco-calendar-click-watcher")
define.alias("ember-ref-bucket/modifiers/create-ref","msg-overlay/modifiers/create-ref")
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-overlay/modifiers/did-insert")
define.alias("ember-resize-modifier/modifiers/did-resize","msg-overlay/modifiers/did-resize")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-overlay/modifiers/did-update")
define("msg-overlay/modifiers/on-dom-insert",["exports","ember-modifier"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.default=(0,t.modifier)((function(e,t){let[n]=t
n(e)
return()=>{}}))}))
define.alias("ember-prop-modifier","msg-overlay/modifiers/prop")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-overlay/modifiers/will-destroy")
define.alias("@embroider/util/services/ensure-registered","msg-overlay/services/-ensure-registered")
define.alias("artdeco-hoverables/services/artdeco-hoverable","msg-overlay/services/artdeco-hoverable")
define.alias("artdeco-modal/services/artdeco-modal","msg-overlay/services/artdeco-modal")
define.alias("artdeco-toast/services/artdeco-toast","msg-overlay/services/artdeco-toast")
define.alias("client-sensor-web/services/client-sensor","msg-overlay/services/client-sensor")
define.alias("ember-date-service/services/date","msg-overlay/services/date")
define.alias("@linkedin/ember-restli-graphql/services/graphql","msg-overlay/services/graphql")
define.alias("@linkedin/ember-pem/services/internal-event-utils","msg-overlay/services/internal-event-utils")
define.alias("@linkedin/ember-pem/services/internal-pem-tracking","msg-overlay/services/internal-pem-tracking")
define.alias("helpcenter-in-product-ember/services/iph-service","msg-overlay/services/iph-service")
define.alias("ember-cli-pemberly-lix/services/lix","msg-overlay/services/lix")
define.alias("ember-m3/services/m3-schema-manager","msg-overlay/services/m3-schema-manager")
define.alias("ember-media-player/services/media-player","msg-overlay/services/media-player")
define.alias("@linkedin/ember-pem/services/pem-response-metadata","msg-overlay/services/pem-response-metadata")
define.alias("@linkedin/ember-pem/services/pem-tracking","msg-overlay/services/pem-tracking")
define.alias("persistent-toast-manager/services/persistent-toast-manager","msg-overlay/services/persistent-toast-manager")
define.alias("@linkedin/ember-qualtrics/services/qualtrics-surveys","msg-overlay/services/qualtrics-surveys")
define.alias("ember-media-player/services/static-asset-loader","msg-overlay/services/static-asset-loader")
define.alias("ember-cli-pemberly-m3/services/store","msg-overlay/services/store")
define.alias("ember-cli-pemberly-litms/services/tag-manager","msg-overlay/services/tag-manager")
define.alias("@linkedin/ember-pem/services/tracer","msg-overlay/services/tracer")
define.alias("ember-cli-pemberly-litms/services/tracking-adapter-for-tag-manager","msg-overlay/services/tracking-adapter-for-tag-manager")
define("msg-overlay/template-registry",[],(function(){}))
define("msg-overlay/templates/application",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"A72Ni7se",block:'[[[8,[39,0],null,null,null]],[],false,["msg-overlay@messaging-overlay-container"]]',moduleName:"msg-overlay/templates/application.hbs",isStrictMode:!1})}))
define.alias("ember-async-data/tracked-async-data","msg-overlay/tracked-async-data")
define.alias("ember-cli-artdeco-tabs/utils/get-box-model-width","msg-overlay/utils/get-box-model-width")
define.alias("client-sensor-web/utils/helpers","msg-overlay/utils/helpers")
define.alias("@linkedin/hue-web-artdeco-migration-runtime/utils/mapping-data","msg-overlay/utils/mapping-data")
define("msg-overlay/utils/recommendation-helpers",["exports","msg-shared/utils/constants"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.USECASE_PARTIAL_LOOKUP=void 0
e.normalizeUsecase=function(e,t){return`${r[e]}_${t?"FULL":"SHORT"}`}
const{CONTEXT_TYPES:{FEED_CONTEXT:n,JOB_CONTEXT:i,COMPANY_CONTEXT:a,PROFILE_CONTEXT:o}}=t.OVERLAY,r=e.USECASE_PARTIAL_LOOKUP={[n]:"ARTICLE_SHARE_OVERLAY",[i]:"OVERLAY_JOB",[a]:"OVERLAY_COMPANY",[o]:"OVERLAY_PROFILE"}}))
define("msg-overlay/utils/scroll-blocker-helper",["exports","ember-lifeline"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=function(e,a){if(a)for(let o=0;o<n.length;o++)(0,t.addEventListener)(e,a,n[o],i)}
const n=["DOMMouseScroll","mousewheel","touchmove","wheel"]
function i(e){e.stopImmediatePropagation()
const{type:t,currentTarget:n,deltaY:i,detail:a,wheelDelta:o}=e,{scrollTop:r,scrollHeight:s,offsetHeight:l}=n
let c=0
c="DOMMouseScroll"===t?-40*a:o||-i
if(c<0&&-c>s-l-r){n.scrollTop=s
e.preventDefault()}else if(c>0&&c>r){n.scrollTop=0
e.preventDefault()}}}))
define("msg-overlay/utils/uuid-generator",["exports","ember-uuid/utils/uuid-generator"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})
Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}})
Object.defineProperty(e,"unparse",{enumerable:!0,get:function(){return t.unparse}})
Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.v1}})
Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return t.v4}})}))
define.alias("ember-vector-images/utils/vector-url","msg-overlay/utils/vector-url")
define("msg-overlay/viewdata/graphql-overlay-search-viewdata",["exports","@babel/runtime/helpers/esm/applyDecoratedDescriptor","msg-data/viewdata","msg-typeahead/viewdata/graphql-possible-recipient-viewdata","tracked-toolbox"],(function(e,t,n,i,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var o
e.default=(o=class extends n.default{get connectionSearchResultViewDataElements(){const{formatter:e,matchedConnections:t}=this.props
return t.map((t=>new i.default({possibleRecipient:t,formatter:e})))}},(0,t.default)(o.prototype,"connectionSearchResultViewDataElements",[a.cached],Object.getOwnPropertyDescriptor(o.prototype,"connectionSearchResultViewDataElements"),o.prototype),o)}))
define("msg-overlay/viewdata/graphql-recommendation-card-viewdata",["exports","msg-data/viewdata","presence/viewdata/host-entity-with-presence-viewdata"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class i extends t.default{get recipientProfile(){var e,t
const n=null===(e=this.props.suggestion.recipientEntityViewModel)||void 0===e||null===(t=e.entity)||void 0===t?void 0:t.profile
return{entityUrn:n.entityUrn,dashEntityUrn:n.entityUrn,objectUrn:n.objectUrn,firstName:n.firstName,lastName:n.lastName,occupation:n.headline,profilePicture:n.profilePicture}}get suggestedRecipientName(){return this.props.formatter.formatName(this.recipientProfile,"full")}get EntityWithPresenceViewData(){return new n.default({altText:this.suggestedRecipientName,profile:this.recipientProfile})}get suggestedRecipientOccupation(){return this.recipientProfile.occupation}get reasonText(){var e
return null===(e=this.props.suggestion.reasonText)||void 0===e?void 0:e.text}get trackingId(){return this.props.suggestion.trackingId}get profileObjectUrn(){const{recipientProfile:e}=this
return e&&e.objectUrn}}e.default=i}))
define("msg-overlay/viewdata/list-bubble-viewdata",["exports","msg-data/viewdata","presence/viewdata/host-entity-with-presence-viewdata"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class i extends t.default{get entityWithPresenceViewData(){const{authenticatedUserProfile:e,formatter:t}=this.props,i={firstName:e.firstName,lastName:e.lastName??""}
return new n.default({profile:e,altText:t.formatName(i,"full")})}}e.default=i}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata",["exports","msg-data/viewdata","msg-shared-modals/viewdata/sdk-conversation-header-dropdown-menu-viewdata","msg-ui/viewdata/sdk-virtual-meeting-cta-viewdata"],(function(e,t,n,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class a extends t.default{get conversationName(){return this.props.conversation.title}get participantNames(){return this.props.participants.map((e=>({firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName})))}get showDropdownMenu(){var e
return!(null===(e=this.props.conversation)||void 0===e||!e.entityUrn)}get virtualMeetingCtaViewData(){const{conversation:e,authenticatedUserProfile:t,msgDataManager:n,participants:a}=this.props
return new i.default({conversation:e,authenticatedUserProfile:t,msgDataManager:n,participants:a})}get conversationHeaderDropdownMenuViewData(){return new n.default({conversation:this.props.conversation,authenticatedUserProfile:this.props.authenticatedUserProfile,participants:this.props.participants,i18n:this.props.i18n,formatter:this.props.formatter,presenceAPI:this.props.presenceAPI,isInteractiveMessagingComponent:!1})}}e.default=a}))
define("msg-overlay/viewdata/sdk-conversation-bubble-header-viewdata",["exports","global-helpers/helpers/urn-to-id","msg-data/viewdata","msg-shared/helpers/is-company-profile","msg-data/utils/sdk-view-data-helpers","urn-utils","msg-ui/viewdata/sdk-conversation-entity-viewdata","msg-overlay/viewdata/sdk-conversation-bubble-header-controls-viewdata"],(function(e,t,n,i,a,o,r,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const l="components/msg-overlay@conversation-bubble-header-feature"
class c extends n.default{get shouldShowHeader(){const{conversation:e}=this.props
return void 0!==e}get participants(){const{conversation:e}=this.props
return null!=e&&e.participants?e.participants.map((e=>this.props.participantStateMap[e])).filter((e=>!!e)):[]}get hasParticipants(){return!!this.participants.length}get isGroupChat(){const{conversation:e}=this.props
return!!e&&e.groupChat}get conversationName(){const{conversation:e}=this.props
return e?e.title:null}get latestEvent(){const{conversation:e,msgDataManager:t}=this.props
return e&&(0,a.getLatestMessage)(e,t)}get messageRecipient(){const{messageRecipients:e}=this.props
return e?e[0]:void 0}get messageRecipientId(){const{messageRecipient:e}=this
return e?e.publicIdentifier:""}get messageRecipientFirstName(){const{messageRecipient:e}=this
return e?e.firstName:null}get messageRecipientLastName(){const{messageRecipient:e}=this
return e?e.lastName:null}get oneToOneParticipantPublicProfileId(){var e,t
const n=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return n.length?(null===(e=n[0])||void 0===e||null===(t=e.profile)||void 0===t?void 0:t.url)??"UNKNOWN":"UNKNOWN"}get pageUrl(){var e
return null===(e=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)[0])||void 0===e?void 0:e.pageUrl}get pageName(){var e,t
return null===(e=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)[0])||void 0===e||null===(t=e.name)||void 0===t?void 0:t.text}get isCompanyRecipient(){var e
const{messageRecipient:t}=this,n=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return 0!==n.length&&(!!(t&&(0,i.isCompanyProfile)(t)||(null===(e=n[0])||void 0===e?void 0:e.kind)===a.PARTICIPANT_TYPES.ORGANIZATION)||!!(0,a.isConversationWithAdvertiser)(this.props.conversation))}get participantNames(){const{conversation:e}=this.props
if(e)return(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile,(0,a.isConversationWithAdvertiser)(e)).map((e=>{var t
return"MEMBER"===e.kind?{firstName:null==e?void 0:e.firstName,lastName:null==e?void 0:e.lastName,maidenName:null==e?void 0:e.maidenName}:{firstName:(null===(t=e.name)||void 0===t?void 0:t.text)??"",lastName:""}}))}get averageResponseTimeText(){var e,t
return null===(e=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)[0])||void 0===e||null===(t=e.averageResponseTimeText)||void 0===t?void 0:t.text}get participantNamesWithSelf(){return(0,a.participantNamesWithSelf)(this.participants,this.props.authenticatedUserProfile,!0,this.props.i18n)}get recipientProfileId(){var e
const t=(0,a.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile)
return t?(0,o.extractEntityInfoFromUrn)(null===(e=t[0])||void 0===e?void 0:e.hostIdentityUrn).id:null}get companyRecipientId(){var e
const{participants:n}=this
return n&&void 0!==(null===(e=n[0])||void 0===e?void 0:e.entityUrn)?(0,t.urnToId)(n[0].entityUrn):null}get hasPresenceInformation(){return(0,a.shouldShowPresenceInformationForConversation)(this.props.conversation,this.props.msgDataManager,this.props.authenticatedUserProfile)}get existingGroupParticipantsTitle(){const{conversation:e,i18n:t}=this.props
if(!e)return null
const{participants:n}=this
let i
i=e.title?1===n.length?t.lookupTranslation(l,"i18n_just_you")():t.lookupTranslation(l,"i18n_participant_familiar")([{names:this.participantNamesWithSelf}]):t.lookupTranslation(l,"i18n_num_participants_in_group_conversation")([{count:this.participants.length}])
return i}get creatorProfileViewEnabled(){const{conversation:e}=this.props
return(0,a.isConversationFeatureSupported)(e,"VIEW_CREATOR_PROFILE")}get conversationEntityViewData(){const{conversation:e,formatter:t,authenticatedUserProfile:n,msgDataManager:i}=this.props
return new r.default({conversation:e,participants:this.participants,latestMessage:this.latestEvent,authenticatedUserMiniProfile:n,msgDataManager:i,formatter:t})}get conversationBubbleHeaderControlsViewData(){return new s.default({conversation:this.props.conversation,participants:this.participants,msgDataManager:this.msgDataManager,i18n:this.props.i18n,formatter:this.props.formatter,authenticatedUserProfile:this.props.authenticatedUserProfile,presenceAPI:this.props.presenceAPI})}}e.default=c}))
define("msg-overlay/viewdata/sdk-conversation-bubble-viewdata",["exports","msg-data/viewdata","msg-data/utils/sdk-view-data-helpers","msg-shared/utils/urn-id-helpers","msg-spinmail/viewdata/sdk-sponsored-conversation-thread-viewdata","msg-spinmail-data/utils/sponsored-conversation-properties","msg-spinmail/viewdata/sdk-spinmail-thread-viewdata","msg-shared/utils/custom-tracking","msg-shared/utils/view-data-helpers"],(function(e,t,n,i,a,o,r,s,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
class c extends t.default{get participants(){var e
return(null===(e=this.props.conversation)||void 0===e?void 0:e.decoratedParticipants)??[]}get latestMessage(){var e
return null===(e=this.props.conversation.messages)||void 0===e?void 0:e.last()}get isUnread(){return!this.props.conversation.read}get isCompanyProfile(){return(0,n.isConversationWithCompany)(this.props.conversation,this.props.authenticatedUserProfile)}get conversationUrn(){return this.props.conversation.entityUrn}get hostConversationUrn(){return`urn:li:fs_conversation:${(0,i.extractMailboxAndConversationId)(this.conversationUrn).conversationId}`}get conversationId(){const{conversation:e}=this.props
return e&&e.entityUrn?(0,i.extractMailboxAndConversationId)(e.entityUrn).conversationId:null}get isVideoMeetingEnabled(){return this.props.conversation&&(0,n.isConversationFeatureSupported)(this.props.conversation,"REPLY")}get isConversationWithAdvertiser(){return this.props.conversation&&(0,n.isConversationWithAdvertiser)(this.props.conversation)}get isInMailOrInMailReply(){return this.props.conversation&&(0,n.isInMailConversation)(this.props.conversation)}get isSponsoredConversation(){return this.props.conversation&&(0,n.isSponsoredConversation)(this.props.conversation)}get isSponsoredInMail(){return this.props.conversation&&(0,n.isSponsoredInMail)(this.props.conversation)}get enableReportingSponsoredConversation(){const{conversation:e}=this.props
return!!e&&((0,o.enableReportingSponsoredMessage)(e)||(0,o.enableReportingSponsoredInMail)(e))}get nonSelfParticipantUrns(){return(0,n.getNonSelfParticipants)(this.participants,this.props.authenticatedUserProfile).map((e=>e.hostIdentityUrn))}get hasInitialFetch(){return!!this.props.conversation.messages.length}get isGroupChat(){return this.props.conversation.groupChat}get isMuted(){return"MUTE"===this.props.conversation.notificationStatus}get conversationBackendUrn(){return this.props.conversation.backendUrn}get participantTrackingUrns(){const{participants:e}=this
return e?(0,s.getParticipantTrackingUrns)(e,!0):[]}get recipientObjectUrns(){var e
return null===(e=this.props.messageRecipients)||void 0===e?void 0:e.filter((e=>e.objectUrn)).map((e=>e.objectUrn))}get recipientUrns(){var e
return null===(e=this.props.messageRecipients)||void 0===e?void 0:e.map((e=>(0,l.getProfileDashUrn)(e)))}get sponsoredCreativeUrn(){var e,t,n,i
return null===(e=this.props.conversation)||void 0===e||null===(t=e.contentMetadata)||void 0===t||null===(n=t.conversationAdContent)||void 0===n||null===(i=n.creativeAdsReportingInfo)||void 0===i?void 0:i.sponsoredCreativeUrn}get inboxType(){var e,t
const{conversation:n}=this.props
return n?null!==(e=n.categories)&&void 0!==e&&e.includes("PRIMARY_INBOX")?"PRIMARY":null!==(t=n.categories)&&void 0!==t&&t.includes("SECONDARY_INBOX")?"SECONDARY":null:null}get spinmailThreadViewData(){return new r.default({conversation:this.props.conversation,msgDataManager:this.props.msgDataManager,authenticatedUserProfile:this.props.authenticatedUserProfile,presenceAPI:this.props.presenceAPI,graphql:this.props.graphql})}get sponsoredConversationThreadViewData(){const{conversation:e,msgDataManager:t,presenceAPI:n}=this.props
return new a.default({conversation:e,msgDataManager:t,presenceAPI:n,authenticatedUserProfile:this.props.authenticatedUserProfile})}}e.default=c}))

//# sourceMappingURL=engine.map